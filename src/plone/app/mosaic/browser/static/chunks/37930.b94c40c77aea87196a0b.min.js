"use strict";(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[37930],{37930:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var r=n(10878),i=n.n(r);n(79875);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t}var t,n,r;return t=e,n=[{key:"createReplyForm",value:function(e){var t=e.attr("id"),n=e.find(".reply-to-comment-button"),r=i()("#commenting").clone(!0);r.find("#formfield-form-widgets-captcha").find("script").remove(),r.appendTo(e).css("display","none"),r.removeAttr("id"),i()(n).css("display","none");var o=r.find("form");o.find("#formfield-form-widgets-comment-text").attr("id","formfield-form-widgets-new-textarea"+t),o.find("#form-widgets-comment-text").attr("id","form-widgets-new-textarea"+t),o.find('input[name="form.widgets.in_reply_to"]').val(t);var a=r.find(".cancelreplytocomment");a.attr("id",t),o.find('input[name="form.buttons.cancel"]').css("display","inline"),r.slideDown("slow"),a.css("display","inline")}},{key:"clearForm",value:function(e){e.find(".error").removeClass("error"),e.find(".fieldErrorBox").remove(),e.find('input[type="text"]').attr("value",""),e.find("textarea").attr("value","")}},{key:"init_comment_eventhandler",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){i()('input[name="form.button.TransmitComment"]').on("click",(function(e){e.preventDefault();var t=i()(this).parents("form"),n=i()(t).serialize(),r=i()(t).attr("action"),o=i()(this).parents(".comment").attr("id");return i().ajax({type:"GET",url:r,data:n,context:this,success:function(e){var t=location.href;i()(this).parents(".comment").load(t+" #"+o+".comment",(function(){i()(this).find(".comment").unwrap(),init_comment_eventhandler(),i()(".pat-plone-modal").patPloneModal()}))},error:function(e){return!0}}),!1})),i().fn.prepOverlay&&i()('form[name="edit"]').prepOverlay({cssclass:"overlay-edit-comment",width:"60%",subtype:"ajax",filter:"#content>*"}),i()('input[name="form.button.DeleteComment"]').on("click",(function(e){e.preventDefault();var t=i()(this).parents("form"),n=i()(t).serialize(),r=i()(t).attr("action");return i().ajax({type:"POST",url:r,data:n,context:i()(this).parents(".comment"),success:function(e){for(var t=i()(this),n=t.attr("class"),r=parseInt(n[n.indexOf("replyTreeLevel")+"replyTreeLevel".length],10),o=".replyTreeLevel"+r,a=0;a<r;a++)o+=", .replyTreeLevel"+a;t.nextUntil(o).each((function(){i()(this).fadeOut("fast",(function(){i()(this).remove()}))})),t.prev('[class*="replyTreeLevel'+(r-1)+'"]').find('form[name="delete"]').css("display","inline"),i()(this).fadeOut("fast",(function(){i()(this).remove()}))},error:function(e,t){return!0}}),!1}))}))},{key:"init",value:function(){var e=this;e.init_comment_eventhandler();var t=i()("#commenting"),n=t.find('input[name="form.widgets.in_reply_to"]');if(0!==n.length&&""!==n.val()){var r="#"+n.val(),o=i()(".discussion").find(r);e.createReplyForm(o),e.clearForm(t)}i()(".reply-to-comment-button").bind("click",(function(t){var n=i()(this).parents().filter(".comment");e.createReplyForm(n),e.clearForm(n)})),i()("#commenting #form-buttons-cancel").bind("click",(function(t){t.preventDefault();var n=i()(this).parents().filter(".comment").find(".reply-to-comment-button");e.reply_to_comment_form=i()(this).parents().filter(".reply"),e.reply_to_comment_form.slideUp("slow",(function(){i()(this).remove()})),n.css("display","inline")})),i()(".reply").find('input[name="form.buttons.reply"]').css("display","none"),i()(".reply").find('input[name="form.buttons.cancel"]').css("display","none"),i()(".reply-to-comment-button").removeClass("hide")}}],n&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}]);