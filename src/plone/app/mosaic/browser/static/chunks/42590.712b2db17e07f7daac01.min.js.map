{"version":3,"file":"chunks/42590.712b2db17e07f7daac01.min.js","mappings":"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","sources":["webpack://plone-mosaic/./node_modules/tinymce/plugins/table/plugin.js"],"sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.7 (2022-12-06)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$2 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray = isType$1('array');\n    var isNull = eq$2(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$2(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none$2 = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none$2,\n        each: noop,\n        bind: none$2,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none$2();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from$1 = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none$2,\n      from: from$1\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains$2 = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range$1 = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var map$1 = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$2 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter$2 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each$2(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$1 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten$1 = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind$2 = function (xs, f) {\n      return flatten$1(map$1(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var pure = function (x) {\n      return [x];\n    };\n    var sort$1 = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get$d = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$d(xs, 0);\n    };\n    var last$2 = function (xs) {\n      return get$d(xs, xs.length - 1);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$2(group(1), group(2));\n    };\n    var detect$6 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$2(0, 0);\n    };\n    var nu$2 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$2,\n      detect: detect$6,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$1(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$5 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$1(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$5(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$5(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$1 = function (s) {\n      return !isNotEmpty(s);\n    };\n    var toFloat = function (value) {\n      var num = parseFloat(value);\n      return isNaN(num) ? Optional.none() : Optional.some(num);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$4 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$4 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom$1(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom$1(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom$1(node);\n    };\n    var fromDom$1 = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint$1 = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$1);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom$1,\n      fromPoint: fromPoint$1\n    };\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all$1 = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$1(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is$2;\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, identity);\n    };\n    var size = function (obj) {\n      return keys(obj).length;\n    };\n    var get$c = function (obj, key) {\n      return has$1(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has$1 = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has$1(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var isEmpty = function (r) {\n      for (var x in r) {\n        if (hasOwnProperty.call(r, x)) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    var validSectionList = [\n      'tfoot',\n      'thead',\n      'tbody',\n      'colgroup'\n    ];\n    var isValidSection = function (parentName) {\n      return contains$2(validSectionList, parentName);\n    };\n    var grid = function (rows, columns) {\n      return {\n        rows: rows,\n        columns: columns\n      };\n    };\n    var address = function (row, column) {\n      return {\n        row: row,\n        column: column\n      };\n    };\n    var detail = function (element, rowspan, colspan) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan\n      };\n    };\n    var detailnew = function (element, rowspan, colspan, isNew) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        isNew: isNew\n      };\n    };\n    var extended = function (element, rowspan, colspan, row, column, isLocked) {\n      return {\n        element: element,\n        rowspan: rowspan,\n        colspan: colspan,\n        row: row,\n        column: column,\n        isLocked: isLocked\n      };\n    };\n    var rowdetail = function (element, cells, section) {\n      return {\n        element: element,\n        cells: cells,\n        section: section\n      };\n    };\n    var rowdetailnew = function (element, cells, section, isNew) {\n      return {\n        element: element,\n        cells: cells,\n        section: section,\n        isNew: isNew\n      };\n    };\n    var elementnew = function (element, isNew, isLocked) {\n      return {\n        element: element,\n        isNew: isNew,\n        isLocked: isLocked\n      };\n    };\n    var rowcells = function (element, cells, section, isNew) {\n      return {\n        element: element,\n        cells: cells,\n        section: section,\n        isNew: isNew\n      };\n    };\n    var bounds = function (startRow, startCol, finishRow, finishCol) {\n      return {\n        startRow: startRow,\n        startCol: startCol,\n        finishRow: finishRow,\n        finishCol: finishCol\n      };\n    };\n    var columnext = function (element, colspan, column) {\n      return {\n        element: element,\n        colspan: colspan,\n        column: column\n      };\n    };\n    var colgroup = function (element, columns) {\n      return {\n        element: element,\n        columns: columns\n      };\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type$1 = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type$1(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type$1(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType(ELEMENT);\n    var isText = isType(TEXT);\n    var isDocument = isType(DOCUMENT);\n    var isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement(e) && name(e) === tag;\n      };\n    };\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentElement = function (element) {\n      return Optional.from(element.dom.parentElement).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children$3 = function (element) {\n      return map$1(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child$3 = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child$3(element, 0);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body$1 = function () {\n      return getBody$1(SugarElement.fromDom(document));\n    };\n    var getBody$1 = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var ancestors$4 = function (scope, predicate, isRoot) {\n      return filter$2(parents(scope, isRoot), predicate);\n    };\n    var children$2 = function (scope, predicate) {\n      return filter$2(children$3(scope), predicate);\n    };\n    var descendants$1 = function (scope, predicate) {\n      var result = [];\n      each$2(children$3(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$3 = function (scope, selector, isRoot) {\n      return ancestors$4(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var children$1 = function (scope, selector) {\n      return children$2(scope, function (e) {\n        return is$2(e, selector);\n      });\n    };\n    var descendants = function (scope, selector) {\n      return all$1(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$2 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$2, scope, predicate, isRoot);\n    };\n    var child$2 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find$1(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    var descendant$1 = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor$2(scope, function (e) {\n        return is$2(e, selector);\n      }, isRoot);\n    };\n    var child$1 = function (scope, selector) {\n      return child$2(scope, function (e) {\n        return is$2(e, selector);\n      });\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$2(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$2 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll$1 = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, attrs) {\n      each$1(attrs, function (v, k) {\n        v.fold(function () {\n          remove$7(element, k);\n        }, function (value) {\n          rawSet(element.dom, k, value);\n        });\n      });\n    };\n    var get$b = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$b(element, key));\n    };\n    var remove$7 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone$2 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var is = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var bindFrom = function (a, f) {\n      return a !== undefined && a !== null ? f(a) : Optional.none();\n    };\n    var flatten = function (oot) {\n      return oot.bind(identity);\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$a = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw$2 = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (is(getOpt(element, 'style').map(trim), '')) {\n        remove$7(element, 'style');\n      }\n    };\n    var copy$2 = function (source, target) {\n      var sourceDom = source.dom;\n      var targetDom = target.dom;\n      if (isSupported(sourceDom) && isSupported(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var getAttrValue = function (cell, name, fallback) {\n      if (fallback === void 0) {\n        fallback = 0;\n      }\n      return getOpt(cell, name).map(function (value) {\n        return parseInt(value, 10);\n      }).getOr(fallback);\n    };\n    var getSpan = function (cell, type) {\n      return getAttrValue(cell, type, 1);\n    };\n    var hasColspan = function (cellOrCol) {\n      if (isTag('col')(cellOrCol)) {\n        return getAttrValue(cellOrCol, 'span', 1) > 1;\n      } else {\n        return getSpan(cellOrCol, 'colspan') > 1;\n      }\n    };\n    var hasRowspan = function (cell) {\n      return getSpan(cell, 'rowspan') > 1;\n    };\n    var getCssValue = function (element, property) {\n      return parseInt(get$a(element, property), 10);\n    };\n    var minWidth = constant(10);\n    var minHeight = constant(10);\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, always);\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind$2(children$3(scope), function (x) {\n        if (is$2(x, selector)) {\n          return predicate(x) ? [x] : [];\n        } else {\n          return filterFirstLayer(x, selector, predicate);\n        }\n      });\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Optional.none();\n      }\n      if (contains$2(tags, name(element))) {\n        return Optional.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is$2(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells$1 = function (ancestor) {\n      return firstLayer(ancestor, 'th,td');\n    };\n    var columns$1 = function (ancestor) {\n      if (is$2(ancestor, 'colgroup')) {\n        return children$1(ancestor, 'col');\n      } else {\n        return bind$2(columnGroups(ancestor), function (columnGroup) {\n          return children$1(columnGroup, 'col');\n        });\n      }\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var rows$1 = function (ancestor) {\n      return firstLayer(ancestor, 'tr');\n    };\n    var columnGroups = function (ancestor) {\n      return table(ancestor).fold(constant([]), function (table) {\n        return children$1(table, 'colgroup');\n      });\n    };\n\n    var fromRowsOrColGroups = function (elems, getSection) {\n      return map$1(elems, function (row) {\n        if (name(row) === 'colgroup') {\n          var cells = map$1(columns$1(row), function (column) {\n            var colspan = getAttrValue(column, 'span', 1);\n            return detail(column, 1, colspan);\n          });\n          return rowdetail(row, cells, 'colgroup');\n        } else {\n          var cells = map$1(cells$1(row), function (cell) {\n            var rowspan = getAttrValue(cell, 'rowspan', 1);\n            var colspan = getAttrValue(cell, 'colspan', 1);\n            return detail(cell, rowspan, colspan);\n          });\n          return rowdetail(row, cells, getSection(row));\n        }\n      });\n    };\n    var getParentSection = function (group) {\n      return parent(group).map(function (parent) {\n        var parentName = name(parent);\n        return isValidSection(parentName) ? parentName : 'tbody';\n      }).getOr('tbody');\n    };\n    var fromTable$1 = function (table) {\n      var rows = rows$1(table);\n      var columnGroups$1 = columnGroups(table);\n      var elems = __spreadArray(__spreadArray([], columnGroups$1, true), rows, true);\n      return fromRowsOrColGroups(elems, getParentSection);\n    };\n    var fromPastedRows = function (elems, section) {\n      return fromRowsOrColGroups(elems, function () {\n        return section;\n      });\n    };\n\n    var addCells = function (gridRow, index, cells) {\n      var existingCells = gridRow.cells;\n      var before = existingCells.slice(0, index);\n      var after = existingCells.slice(index);\n      var newCells = before.concat(cells).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var addCell = function (gridRow, index, cell) {\n      return addCells(gridRow, index, [cell]);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells;\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(gridRow.element, cells, gridRow.section, gridRow.isNew);\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells;\n      var r = map$1(cells, f);\n      return rowcells(gridRow.element, r, gridRow.section, gridRow.isNew);\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element;\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells.length;\n    };\n    var extractGridDetails = function (grid) {\n      var result = partition(grid, function (row) {\n        return row.section === 'colgroup';\n      });\n      return {\n        rows: result.fail,\n        cols: result.pass\n      };\n    };\n    var clone$1 = function (gridRow, cloneRow, cloneCell) {\n      var newCells = map$1(gridRow.cells, cloneCell);\n      return rowcells(cloneRow(gridRow.element), newCells, gridRow.section, true);\n    };\n\n    var LOCKED_COL_ATTR = 'data-snooker-locked-cols';\n    var getLockedColumnsFromTable = function (table) {\n      return getOpt(table, LOCKED_COL_ATTR).bind(function (lockedColStr) {\n        return Optional.from(lockedColStr.match(/\\d+/g));\n      }).map(function (lockedCols) {\n        return mapToObject(lockedCols, always);\n      });\n    };\n    var getLockedColumnsFromGrid = function (grid) {\n      var locked = foldl(extractGridDetails(grid).rows, function (acc, row) {\n        each$2(row.cells, function (cell, idx) {\n          if (cell.isLocked) {\n            acc[idx] = true;\n          }\n        });\n        return acc;\n      }, {});\n      var lockedArr = mapToArray(locked, function (_val, key) {\n        return parseInt(key, 10);\n      });\n      return sort$1(lockedArr);\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      return Optional.from(warehouse.access[key(row, column)]);\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element);\n      });\n      return filtered.length > 0 ? Optional.some(filtered[0]) : Optional.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind$2(warehouse.all, function (r) {\n        return r.cells;\n      });\n      return filter$2(all, predicate);\n    };\n    var generateColumns = function (rowData) {\n      var columnsGroup = {};\n      var index = 0;\n      each$2(rowData.cells, function (column) {\n        var colspan = column.colspan;\n        range$1(colspan, function (columnIndex) {\n          var colIndex = index + columnIndex;\n          columnsGroup[colIndex] = columnext(column.element, colspan, colIndex);\n        });\n        index += colspan;\n      });\n      return columnsGroup;\n    };\n    var generate$1 = function (list) {\n      var access = {};\n      var cells = [];\n      var tableOpt = head(list).map(function (rowData) {\n        return rowData.element;\n      }).bind(table);\n      var lockedColumns = tableOpt.bind(getLockedColumnsFromTable).getOr({});\n      var maxRows = 0;\n      var maxColumns = 0;\n      var rowCount = 0;\n      var _a = partition(list, function (rowData) {\n          return rowData.section === 'colgroup';\n        }), colgroupRows = _a.pass, rows = _a.fail;\n      each$2(rows, function (rowData) {\n        var currentRow = [];\n        each$2(rowData.cells, function (rowCell) {\n          var start = 0;\n          while (access[key(rowCount, start)] !== undefined) {\n            start++;\n          }\n          var isLocked = hasNonNullableKey(lockedColumns, start.toString());\n          var current = extended(rowCell.element, rowCell.rowspan, rowCell.colspan, rowCount, start, isLocked);\n          for (var occupiedColumnPosition = 0; occupiedColumnPosition < rowCell.colspan; occupiedColumnPosition++) {\n            for (var occupiedRowPosition = 0; occupiedRowPosition < rowCell.rowspan; occupiedRowPosition++) {\n              var rowPosition = rowCount + occupiedRowPosition;\n              var columnPosition = start + occupiedColumnPosition;\n              var newpos = key(rowPosition, columnPosition);\n              access[newpos] = current;\n              maxColumns = Math.max(maxColumns, columnPosition + 1);\n            }\n          }\n          currentRow.push(current);\n        });\n        maxRows++;\n        cells.push(rowdetail(rowData.element, currentRow, rowData.section));\n        rowCount++;\n      });\n      var _b = last$2(colgroupRows).map(function (rowData) {\n          var columns = generateColumns(rowData);\n          var colgroup$1 = colgroup(rowData.element, values(columns));\n          return {\n            colgroups: [colgroup$1],\n            columns: columns\n          };\n        }).getOrThunk(function () {\n          return {\n            colgroups: [],\n            columns: {}\n          };\n        }), columns = _b.columns, colgroups = _b.colgroups;\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: grid$1,\n        access: access,\n        all: cells,\n        columns: columns,\n        colgroups: colgroups\n      };\n    };\n    var fromTable = function (table) {\n      var list = fromTable$1(table);\n      return generate$1(list);\n    };\n    var justCells = function (warehouse) {\n      return bind$2(warehouse.all, function (w) {\n        return w.cells;\n      });\n    };\n    var justColumns = function (warehouse) {\n      return values(warehouse.columns);\n    };\n    var hasColumns = function (warehouse) {\n      return keys(warehouse.columns).length > 0;\n    };\n    var getColumnAt = function (warehouse, columnIndex) {\n      return Optional.from(warehouse.columns[columnIndex]);\n    };\n    var Warehouse = {\n      fromTable: fromTable,\n      generate: generate$1,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells,\n      justColumns: justColumns,\n      hasColumns: hasColumns,\n      getColumnAt: getColumnAt\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column;\n      var rightEdge = detail.column + detail.colspan - 1;\n      var topEdge = detail.row;\n      var bottomEdge = detail.row + detail.rowspan - 1;\n      return leftEdge <= bounds.finishCol && rightEdge >= bounds.startCol && (topEdge <= bounds.finishRow && bottomEdge >= bounds.startRow);\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column >= bounds.startCol && detail.column + detail.colspan - 1 <= bounds.finishCol && detail.row >= bounds.startRow && detail.row + detail.rowspan - 1 <= bounds.finishRow;\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Optional.some(bounds) : Optional.none();\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row, detailB.row), Math.min(detailA.column, detailB.column), Math.max(detailA.row + detailA.rowspan - 1, detailB.row + detailB.rowspan - 1), Math.max(detailA.column + detailA.colspan - 1, detailB.column + detailB.colspan - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq$1);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq$1);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox$1 = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return isRectangular(warehouse, bounds);\n      });\n    };\n\n    var moveBy$1 = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq$1).bind(function (detail) {\n        var startRow = row > 0 ? detail.row + detail.rowspan - 1 : detail.row;\n        var startCol = column > 0 ? detail.column + detail.colspan - 1 : detail.column;\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element;\n        });\n      });\n    };\n    var intercepts$1 = function (warehouse, start, finish) {\n      return getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(inSelection, bounds));\n        return map$1(inside, function (detail) {\n          return detail.element;\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element;\n      });\n    };\n\n    var moveBy = function (cell, deltaRow, deltaColumn) {\n      return table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return moveBy$1(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return intercepts$1(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq$1(table, firstTable) ? Optional.some(first) : parentCell(warehouse, first);\n      var optLastCell = eq$1(table, lastTable) ? Optional.some(last) : parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return intercepts$1(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return getBox$1(warehouse, first, last);\n    };\n    var getWarehouse = Warehouse.fromTable;\n\n    var before$4 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after$5 = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append$1(v, element);\n        });\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child$3(parent, index).fold(function () {\n        append$1(parent, element);\n      }, function (v) {\n        before$4(v, element);\n      });\n    };\n    var wrap = function (element, wrapper) {\n      before$4(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    var before$3 = function (marker, elements) {\n      each$2(elements, function (x) {\n        before$4(marker, x);\n      });\n    };\n    var after$4 = function (marker, elements) {\n      each$2(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after$5(e, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$2(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each$2(children$3(element), function (rogue) {\n        remove$5(rogue);\n      });\n    };\n    var remove$5 = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children = children$3(wrapper);\n      if (children.length > 0) {\n        before$3(wrapper, children);\n      }\n      remove$5(wrapper);\n    };\n\n    var NodeValue = function (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    };\n\n    var api$2 = NodeValue(isText, 'text');\n    var get$9 = function (element) {\n      return api$2.get(element);\n    };\n    var getOption = function (element) {\n      return api$2.getOption(element);\n    };\n    var set = function (element, value) {\n      return api$2.set(element, value);\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone = function (element) {\n        return SugarElement.fromDom(element.dom.cloneNode(false));\n      };\n      var document = function (element) {\n        return documentOrOwner(element).dom;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains$2(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains$2([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var isNonEditable = function (element) {\n        return isElement(element) && get$b(element, 'contenteditable') === 'false';\n      };\n      var comparePosition = function (element, other) {\n        return element.dom.compareDocumentPosition(other.dom);\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone$2(source);\n        setAll$1(destination, as);\n      };\n      var isSpecial = function (element) {\n        var tag = name(element);\n        return contains$2([\n          'script',\n          'noscript',\n          'iframe',\n          'noframes',\n          'noembed',\n          'title',\n          'style',\n          'textarea',\n          'xmp'\n        ], tag);\n      };\n      var getLanguage = function (element) {\n        return isElement(element) ? getOpt(element, 'lang') : Optional.none();\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor$2,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants,\n          predicate: descendants$1\n        }),\n        styles: constant({\n          get: get$a,\n          getRaw: getRaw$2,\n          set: set$1,\n          remove: remove$6\n        }),\n        attrs: constant({\n          get: get$b,\n          set: set$2,\n          remove: remove$7,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before$4,\n          after: after$5,\n          afterAll: after$4,\n          append: append$1,\n          appendAll: append,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$5\n        }),\n        create: constant({\n          nu: SugarElement.fromTag,\n          clone: clone,\n          text: SugarElement.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children$3,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          isSpecial: isSpecial,\n          getLanguage: getLanguage,\n          getText: get$9,\n          setText: set,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag,\n          isNonEditable: isNonEditable\n        }),\n        eq: eq$1,\n        is: is$1\n      };\n    }\n\n    var all = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all(universe, look, elements, unsafeOne) : Optional.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find$1(pruned1, function (x) {\n        return exists(pruned2, eq(universe, x));\n      });\n      return {\n        firstpath: pruned1,\n        secondpath: pruned2,\n        shared: shared\n      };\n    };\n\n    var sharedOne$1 = oneAll;\n    var ancestors$1 = ancestors$2;\n\n    var universe$3 = DomUniverse();\n    var sharedOne = function (look, elements) {\n      return sharedOne$1(universe$3, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var ancestors = function (start, finish, isRoot) {\n      return ancestors$1(universe$3, start, finish, isRoot);\n    };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq$1(element, rootTable);\n        };\n      };\n      if (eq$1(start, finish)) {\n        return Optional.some({\n          boxes: Optional.some([start]),\n          start: start,\n          finish: finish\n        });\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq$1(startTable, finishTable)) {\n              return Optional.some({\n                boxes: intercepts(startTable, start, finish),\n                start: start,\n                finish: finish\n              });\n            } else if (contains(startTable, finishTable)) {\n              var ancestorCells = ancestors$3(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Optional.some({\n                boxes: nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              });\n            } else if (contains(finishTable, startTable)) {\n              var ancestorCells = ancestors$3(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Optional.some({\n                boxes: nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              });\n            } else {\n              return ancestors(start, finish).shared.bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$3(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$3(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Optional.some({\n                    boxes: nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  });\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve$1 = function (container, selector) {\n      var sels = descendants(container, selector);\n      return sels.length > 0 ? Optional.some(sels) : Optional.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find$1(boxes, function (box) {\n        return is$2(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant(container, firstSelectedSelector).bind(function (first) {\n        return descendant(container, lastSelectedSelector).bind(function (last) {\n          return sharedOne(lookupTable, [\n            first,\n            last\n          ]).map(function (table) {\n            return {\n              first: first,\n              last: last,\n              table: table\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes.map(function (boxes) {\n              return {\n                boxes: boxes,\n                start: identified.start,\n                finish: identified.finish\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return moveBy(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n\n    var retrieve = function (container, selector) {\n      return retrieve$1(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq$1(container, ancestor);\n        };\n        var sectionSelector = 'thead,tfoot,tbody,table';\n        var firstAncestor = ancestor$1(edges.first, sectionSelector, isRoot);\n        var lastAncestor = ancestor$1(edges.last, sectionSelector, isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq$1(fA, lA) ? getBox(edges.table, edges.first, edges.last) : Optional.none();\n          });\n        });\n      });\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each$2(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              var foldArgs = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                foldArgs[_i] = arguments[_i];\n              }\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              var target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var type = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['element'] }\n    ]);\n    var cata$2 = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var none$1 = type.none;\n    var multiple = type.multiple;\n    var single = type.single;\n\n    var Selections = function (lazyRoot, getStart, selectedSelector) {\n      var get = function () {\n        return retrieve(lazyRoot(), selectedSelector).fold(function () {\n          return getStart().fold(none$1, single);\n        }, function (cells) {\n          return multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var clone = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone(original, false);\n    };\n    var deep = function (original) {\n      return clone(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone$2(original);\n      setAll$1(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children$3(deep(original));\n      append(nu, cloneChildren);\n      return nu;\n    };\n    var mutate$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before$4(original, nu);\n      var children = children$3(original);\n      append(nu, children);\n      remove$5(original);\n      return nu;\n    };\n\n    var Dimension = function (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$a(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$a(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    };\n\n    var needManualCalc = function () {\n      var browser = detect$3().browser;\n      return browser.isIE() || browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      return toFloat(px).getOr(fallback);\n    };\n    var getProp = function (element, name, fallback) {\n      return toNumber(get$a(element, name), fallback);\n    };\n    var getBoxSizing = function (element) {\n      return get$a(element, 'box-sizing');\n    };\n    var calcContentBoxSize = function (element, size, upper, lower) {\n      var paddingUpper = getProp(element, 'padding-' + upper, 0);\n      var paddingLower = getProp(element, 'padding-' + lower, 0);\n      var borderUpper = getProp(element, 'border-' + upper + '-width', 0);\n      var borderLower = getProp(element, 'border-' + lower + '-width', 0);\n      return size - paddingUpper - paddingLower - borderUpper - borderLower;\n    };\n    var getCalculatedHeight = function (element, boxSizing) {\n      var dom = element.dom;\n      var height = dom.getBoundingClientRect().height || dom.offsetHeight;\n      return boxSizing === 'border-box' ? height : calcContentBoxSize(element, height, 'top', 'bottom');\n    };\n    var getCalculatedWidth = function (element, boxSizing) {\n      var dom = element.dom;\n      var width = dom.getBoundingClientRect().width || dom.offsetWidth;\n      return boxSizing === 'border-box' ? width : calcContentBoxSize(element, width, 'left', 'right');\n    };\n    var getHeight$1 = function (element) {\n      return needManualCalc() ? getCalculatedHeight(element, getBoxSizing(element)) : getProp(element, 'height', element.dom.offsetHeight);\n    };\n    var getWidth = function (element) {\n      return needManualCalc() ? getCalculatedWidth(element, getBoxSizing(element)) : getProp(element, 'width', element.dom.offsetWidth);\n    };\n    var getInnerWidth = function (element) {\n      return getCalculatedWidth(element, 'content-box');\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var get$8 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$1.getOuter(element);\n    };\n    var getInner = getInnerWidth;\n    var getRuntime$1 = getWidth;\n\n    var columns = function (warehouse, isValidCell) {\n      if (isValidCell === void 0) {\n        isValidCell = always;\n      }\n      var grid = warehouse.grid;\n      var cols = range$1(grid.columns, identity);\n      var rowsArr = range$1(grid.rows, identity);\n      return map$1(cols, function (col) {\n        var getBlock = function () {\n          return bind$2(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column === col;\n            }).toArray();\n          });\n        };\n        var isValid = function (detail) {\n          return detail.colspan === 1 && isValidCell(detail.element);\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isValid, getFallback);\n      });\n    };\n    var decide = function (getBlock, isValid, getFallback) {\n      var inBlock = getBlock();\n      var validInBlock = find$1(inBlock, isValid);\n      var detailOption = validInBlock.orThunk(function () {\n        return Optional.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element;\n      });\n    };\n    var rows = function (warehouse) {\n      var grid = warehouse.grid;\n      var rowsArr = range$1(grid.rows, identity);\n      var cols = range$1(grid.columns, identity);\n      return map$1(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind$2(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Optional.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Optional.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Optional.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$a(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$7 = function (element) {\n      return api.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api.getOuter(element);\n    };\n    var getRuntime = getHeight$1;\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = function (row, y) {\n      return {\n        row: row,\n        y: y\n      };\n    };\n    var colInfo = function (col, x) {\n      return {\n        col: col,\n        x: x\n      };\n    };\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left + getOuter$2(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left;\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop$1 = function (cell) {\n      return absolute(cell).top;\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop$1(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop$1(cell) + getOuter$1(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map$1(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop$1\n    };\n    var ltr$1 = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl$1 = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var detect$2 = onDirection(ltr$1, rtl$1);\n    var width = {\n      delta: function (amount, table) {\n        return detect$2(table).delta(amount, table);\n      },\n      positions: function (cols, table) {\n        return detect$2(table).positions(cols, table);\n      },\n      edge: function (cell) {\n        return detect$2(cell).edge(cell);\n      }\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n\n    var rPercentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var rPixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var isCol$2 = isTag('col');\n    var getPercentSize = function (elm, outerGetter, innerGetter) {\n      var relativeParent = parentElement(elm).getOrThunk(function () {\n        return getBody$1(owner(elm));\n      });\n      return outerGetter(elm) / innerGetter(relativeParent) * 100;\n    };\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRuntime(cell) + 'px';\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseFloat(value);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$7(cell);\n      }\n      return normalizePixelSize(value, cell, get$7, setHeight);\n    };\n    var get$6 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getRaw$1 = function (element, prop) {\n      return getRaw$2(element, prop).orThunk(function () {\n        return getOpt(element, prop).map(function (val) {\n          return val + 'px';\n        });\n      });\n    };\n    var getRawWidth$1 = function (element) {\n      return getRaw$1(element, 'width');\n    };\n    var getRawHeight = function (element) {\n      return getRaw$1(element, 'height');\n    };\n    var getPercentageWidth = function (cell) {\n      return getPercentSize(cell, get$8, getInner);\n    };\n    var getPixelWidth$1 = function (cell) {\n      return isCol$2(cell) ? get$8(cell) : getRuntime$1(cell);\n    };\n    var getHeight = function (cell) {\n      return get$6(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth$1(cell);\n      return width.bind(function (w) {\n        return parse(w, [\n          'fixed',\n          'relative',\n          'empty'\n        ]);\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var getPixelTableWidth = function (table) {\n      return get$8(table) + 'px';\n    };\n    var getPercentTableWidth = function (table) {\n      return getPercentSize(table, get$8, getInner) + '%';\n    };\n    var isPercentSizing$1 = function (table) {\n      return getRawWidth$1(table).exists(function (size) {\n        return rPercentageBasedSizeRegex.test(size);\n      });\n    };\n    var isPixelSizing$1 = function (table) {\n      return getRawWidth$1(table).exists(function (size) {\n        return rPixelBasedSizeRegex.test(size);\n      });\n    };\n    var isNoneSizing$1 = function (table) {\n      return getRawWidth$1(table).isNone();\n    };\n    var percentageBasedSizeRegex = constant(rPercentageBasedSizeRegex);\n\n    var isCol$1 = isTag('col');\n    var getRawW = function (cell) {\n      return getRawWidth$1(cell).getOrThunk(function () {\n        return getPixelWidth$1(cell) + 'px';\n      });\n    };\n    var getRawH = function (cell) {\n      return getRawHeight(cell).getOrThunk(function () {\n        return getHeight(cell) + 'px';\n      });\n    };\n    var justCols = function (warehouse) {\n      return map$1(Warehouse.justColumns(warehouse), function (column) {\n        return Optional.from(column.element);\n      });\n    };\n    var isValidColumn = function (cell) {\n      var browser = detect$3().browser;\n      var supportsColWidths = browser.isChrome() || browser.isFirefox();\n      return isCol$1(cell) ? supportsColWidths : true;\n    };\n    var getDimension = function (cellOpt, index, backups, filter, getter, fallback) {\n      return cellOpt.filter(filter).fold(function () {\n        return fallback(deduce(backups, index));\n      }, function (cell) {\n        return getter(cell);\n      });\n    };\n    var getWidthFrom = function (warehouse, table, getWidth, fallback) {\n      var columnCells = columns(warehouse);\n      var columns$1 = Warehouse.hasColumns(warehouse) ? justCols(warehouse) : columnCells;\n      var backups = [Optional.some(width.edge(table))].concat(map$1(width.positions(columnCells, table), function (pos) {\n        return pos.map(function (p) {\n          return p.x;\n        });\n      }));\n      var colFilter = not(hasColspan);\n      return map$1(columns$1, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, colFilter, function (column) {\n          if (isValidColumn(column)) {\n            return getWidth(column);\n          } else {\n            var cell = bindFrom(columnCells[c], identity);\n            return getDimension(cell, c, backups, colFilter, function (cell) {\n              return fallback(Optional.some(get$8(cell)));\n            }, fallback);\n          }\n        }, fallback);\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, table) {\n      return getWidthFrom(warehouse, table, getRawW, getDeduced);\n    };\n    var getPercentageWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      });\n    };\n    var getPixelWidths = function (warehouse, table, tableSize) {\n      return getWidthFrom(warehouse, table, getPixelWidth$1, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      });\n    };\n    var getHeightFrom = function (warehouse, table, direction, getHeight, fallback) {\n      var rows$1 = rows(warehouse);\n      var backups = [Optional.some(direction.edge(table))].concat(map$1(direction.positions(rows$1, table), function (pos) {\n        return pos.map(function (p) {\n          return p.y;\n        });\n      }));\n      return map$1(rows$1, function (cellOption, c) {\n        return getDimension(cellOption, c, backups, not(hasRowspan), getHeight, fallback);\n      });\n    };\n    var getPixelHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getHeight, function (deduced) {\n        return deduced.getOrThunk(minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, table, direction) {\n      return getHeightFrom(warehouse, table, direction, getRawH, getDeduced);\n    };\n\n    var widthLookup = function (table, getter) {\n      return function () {\n        if (inBody(table)) {\n          return getter(table);\n        } else {\n          return parseFloat(getRaw$2(table, 'width').getOr('0'));\n        }\n      };\n    };\n    var noneSize = function (table) {\n      var getWidth = widthLookup(table, get$8);\n      var zero = constant(0);\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: zero,\n        singleColumnWidth: constant([0]),\n        minCellWidth: zero,\n        setElementWidth: noop,\n        adjustTableWidth: noop,\n        isRelative: true,\n        label: 'none'\n      };\n    };\n    var percentageSize = function (table) {\n      var getFloatWidth = widthLookup(table, function (elem) {\n        return parseFloat(getPercentTableWidth(elem));\n      });\n      var getWidth = widthLookup(table, get$8);\n      var getCellDelta = function (delta) {\n        return delta / getWidth() * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return minWidth() / getWidth() * 100;\n      };\n      var adjustTableWidth = function (delta) {\n        var currentWidth = getFloatWidth();\n        var change = delta / 100 * currentWidth;\n        var newWidth = currentWidth + change;\n        setPercentageWidth(table, newWidth);\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPercentageWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getFloatWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: setPercentageWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: true,\n        label: 'percent'\n      };\n    };\n    var pixelSize = function (table) {\n      var getWidth = widthLookup(table, get$8);\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var adjustTableWidth = function (delta) {\n        var newWidth = getWidth() + delta;\n        setPixelWidth(table, newWidth);\n      };\n      var getWidths = function (warehouse, tableSize) {\n        return getPixelWidths(warehouse, table, tableSize);\n      };\n      return {\n        width: getWidth,\n        pixelWidth: getWidth,\n        getWidths: getWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minWidth,\n        setElementWidth: setPixelWidth,\n        adjustTableWidth: adjustTableWidth,\n        isRelative: false,\n        label: 'pixel'\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(element);\n      } else {\n        return pixelSize(element);\n      }\n    };\n    var getTableSize = function (table) {\n      var width = getRawWidth$1(table);\n      return width.fold(function () {\n        return noneSize(table);\n      }, function (w) {\n        return chooseSize(table, w);\n      });\n    };\n    var TableSize = {\n      getTableSize: getTableSize,\n      pixelSize: pixelSize,\n      percentageSize: percentageSize,\n      noneSize: noneSize\n    };\n\n    var statsStruct = function (minRow, minCol, maxRow, maxCol, allCells, selectedCells) {\n      return {\n        minRow: minRow,\n        minCol: minCol,\n        maxRow: maxRow,\n        maxCol: maxCol,\n        allCells: allCells,\n        selectedCells: selectedCells\n      };\n    };\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      var allCells = [];\n      var selectedCells = [];\n      each$1(house.access, function (detail) {\n        allCells.push(detail);\n        if (isSelected(detail)) {\n          selectedCells.push(detail);\n          var startRow = detail.row;\n          var endRow = startRow + detail.rowspan - 1;\n          var startCol = detail.column;\n          var endCol = startCol + detail.colspan - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol, allCells, selectedCells);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element;\n      var td = SugarElement.fromTag('td');\n      append$1(td, SugarElement.fromTag('br'));\n      var f = seenSelected ? append$1 : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid.columns;\n      var totalRows = house.grid.rows;\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow || i > stats.maxRow || j < stats.minCol || j > stats.maxCol)) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (replica, stats, house, widthDelta) {\n      each$1(house.columns, function (col) {\n        if (col.column < stats.minCol || col.column > stats.maxCol) {\n          remove$5(col.element);\n        }\n      });\n      var emptyRows = filter$2(firstLayer(replica, 'tr'), function (row) {\n        return row.dom.childElementCount === 0;\n      });\n      each$2(emptyRows, remove$5);\n      if (stats.minCol === stats.maxCol || stats.minRow === stats.maxRow) {\n        each$2(firstLayer(replica, 'th,td'), function (cell) {\n          remove$7(cell, 'rowspan');\n          remove$7(cell, 'colspan');\n        });\n      }\n      remove$7(replica, LOCKED_COL_ATTR);\n      remove$7(replica, 'data-snooker-col-series');\n      var tableSize = TableSize.getTableSize(replica);\n      tableSize.adjustTableWidth(widthDelta);\n    };\n    var getTableWidthDelta = function (table, warehouse, tableSize, stats) {\n      if (stats.minCol === 0 && warehouse.grid.columns === stats.maxCol + 1) {\n        return 0;\n      }\n      var colWidths = getPixelWidths(warehouse, table, tableSize);\n      var allColsWidth = foldl(colWidths, function (acc, width) {\n        return acc + width;\n      }, 0);\n      var selectedColsWidth = foldl(colWidths.slice(stats.minCol, stats.maxCol + 1), function (acc, width) {\n        return acc + width;\n      }, 0);\n      var newWidth = selectedColsWidth / allColsWidth * tableSize.pixelWidth();\n      var delta = newWidth - tableSize.pixelWidth();\n      return tableSize.getCellDelta(delta);\n    };\n    var extract$1 = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is$2(detail.element, selectedSelector);\n      };\n      var replica = deep(table);\n      var list = fromTable$1(replica);\n      var tableSize = TableSize.getTableSize(table);\n      var replicaHouse = Warehouse.generate(list);\n      var replicaStats = findSelectedStats(replicaHouse, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = filterFirstLayer(replica, 'th,td', function (cell) {\n        return is$2(cell, selector);\n      });\n      each$2(unselectedCells, remove$5);\n      fillInGaps(list, replicaHouse, replicaStats, isSelected);\n      var house = Warehouse.fromTable(table);\n      var widthDelta = getTableWidthDelta(table, house, tableSize, replicaStats);\n      clean(replica, replicaStats, replicaHouse, widthDelta);\n      return replica;\n    };\n\n    var nbsp = '\\xA0';\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children$3(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant$1(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children = children$3(element);\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var transferableAttributes = {\n      scope: [\n        'row',\n        'col'\n      ]\n    };\n    var createCell = function (doc) {\n      return function () {\n        var td = SugarElement.fromTag('td', doc.dom);\n        append$1(td, SugarElement.fromTag('br', doc.dom));\n        return td;\n      };\n    };\n    var createCol = function (doc) {\n      return function () {\n        return SugarElement.fromTag('col', doc.dom);\n      };\n    };\n    var createColgroup = function (doc) {\n      return function () {\n        return SugarElement.fromTag('colgroup', doc.dom);\n      };\n    };\n    var createRow$1 = function (doc) {\n      return function () {\n        return SugarElement.fromTag('tr', doc.dom);\n      };\n    };\n    var replace$1 = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove$7(replica, k);\n        } else {\n          set$2(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$3(firstText, formatSelector, function (element) {\n          return eq$1(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove$7(clonedFormat, 'contenteditable');\n          append$1(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cloneAppropriateAttributes = function (original, clone) {\n      each$1(transferableAttributes, function (validAttributes, attributeName) {\n        return getOpt(original, attributeName).filter(function (attribute) {\n          return contains$2(validAttributes, attribute);\n        }).each(function (attribute) {\n          return set$2(clone, attributeName, attribute);\n        });\n      });\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var cloneCss = function (prev, clone) {\n        copy$2(prev.element, clone);\n        remove$6(clone, 'height');\n        if (prev.colspan !== 1) {\n          remove$6(clone, 'width');\n        }\n      };\n      var newCell = function (prev) {\n        var td = SugarElement.fromTag(name(prev.element), doc.dom);\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element, td, formats) : td;\n        append$1(lastNode, SugarElement.fromTag('br'));\n        cloneCss(prev, td);\n        cloneAppropriateAttributes(prev.element, td);\n        mutate(prev.element, td);\n        return td;\n      };\n      var newCol = function (prev) {\n        var col = SugarElement.fromTag(name(prev.element), doc.dom);\n        cloneCss(prev, col);\n        mutate(prev.element, col);\n        return col;\n      };\n      return {\n        col: newCol,\n        colgroup: createColgroup(doc),\n        row: createRow$1(doc),\n        cell: newCell,\n        replace: replace$1,\n        colGap: createCol(doc),\n        gap: createCell(doc)\n      };\n    };\n    var paste$1 = function (doc) {\n      return {\n        col: createCol(doc),\n        colgroup: createColgroup(doc),\n        row: createRow$1(doc),\n        cell: createCell(doc),\n        replace: pasteReplace,\n        colGap: createCol(doc),\n        gap: createCell(doc)\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children$3(SugarElement.fromDom(div));\n    };\n    var fromDom = function (nodes) {\n      return map$1(nodes, SugarElement.fromDom);\n    };\n\n    var getNodeName = function (elm) {\n      return elm.nodeName.toLowerCase();\n    };\n    var getBody = function (editor) {\n      return SugarElement.fromDom(editor.getBody());\n    };\n    var getPixelWidth = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq$1(element, getBody(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addPxSuffix = function (size) {\n      return /^\\d+(\\.\\d+)?$/.test(size) ? size + 'px' : size;\n    };\n    var removeDataStyle = function (table) {\n      remove$7(table, 'data-mce-style');\n      var removeStyleAttribute = function (element) {\n        return remove$7(element, 'data-mce-style');\n      };\n      each$2(cells$1(table), removeStyleAttribute);\n      each$2(columns$1(table), removeStyleAttribute);\n      each$2(rows$1(table), removeStyleAttribute);\n    };\n    var getRawWidth = function (editor, elm) {\n      var raw = editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      return Optional.from(raw).filter(isNotEmpty);\n    };\n    var isPercentage$1 = function (value) {\n      return /^(\\d+(\\.\\d+)?)%$/.test(value);\n    };\n    var isPixel = function (value) {\n      return /^(\\d+(\\.\\d+)?)px$/.test(value);\n    };\n    var getSelectionStart = function (editor) {\n      return SugarElement.fromDom(editor.selection.getStart());\n    };\n    var getSelectionEnd = function (editor) {\n      return SugarElement.fromDom(editor.selection.getEnd());\n    };\n\n    var selection = function (selections) {\n      return cata$2(selections.get(), constant([]), identity, pure);\n    };\n    var unmergable = function (selections) {\n      var hasSpan = function (elem, type) {\n        return getOpt(elem, type).exists(function (span) {\n          return parseInt(span, 10) > 1;\n        });\n      };\n      var hasRowOrColSpan = function (elem) {\n        return hasSpan(elem, 'rowspan') || hasSpan(elem, 'colspan');\n      };\n      var candidates = selection(selections);\n      return candidates.length > 0 && forall(candidates, hasRowOrColSpan) ? Optional.some(candidates) : Optional.none();\n    };\n    var mergable = function (table, selections, ephemera) {\n      return cata$2(selections.get(), Optional.none, function (cells) {\n        if (cells.length <= 1) {\n          return Optional.none();\n        } else {\n          return retrieveBox(table, ephemera.firstSelectedSelector, ephemera.lastSelectedSelector).map(function (bounds) {\n            return {\n              bounds: bounds,\n              cells: cells\n            };\n          });\n        }\n      }, Optional.none);\n    };\n\n    var strSelected = 'data-mce-selected';\n    var strSelectedSelector = 'td[' + strSelected + '],th[' + strSelected + ']';\n    var strAttributeSelector = '[' + strSelected + ']';\n    var strFirstSelected = 'data-mce-first-selected';\n    var strFirstSelectedSelector = 'td[' + strFirstSelected + '],th[' + strFirstSelected + ']';\n    var strLastSelected = 'data-mce-last-selected';\n    var strLastSelectedSelector = 'td[' + strLastSelected + '],th[' + strLastSelected + ']';\n    var attributeSelector = strAttributeSelector;\n    var ephemera = {\n      selected: strSelected,\n      selectedSelector: strSelectedSelector,\n      firstSelected: strFirstSelected,\n      firstSelectedSelector: strFirstSelectedSelector,\n      lastSelected: strLastSelected,\n      lastSelectedSelector: strLastSelectedSelector\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: cell,\n        mergable: Optional.none(),\n        unmergable: Optional.none(),\n        selection: [cell]\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: cell,\n        mergable: mergable(table, selections, ephemera),\n        unmergable: unmergable(selections),\n        selection: selection(selections)\n      };\n    };\n    var paste = function (element, clipboard, generators) {\n      return {\n        element: element,\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n    var pasteRows = function (selections, cell, clipboard, generators) {\n      return {\n        selection: selection(selections),\n        clipboard: clipboard,\n        generators: generators\n      };\n    };\n\n    var getSelectionCellFallback = function (element) {\n      return table(element).bind(function (table) {\n        return retrieve(table, ephemera.firstSelectedSelector);\n      }).fold(constant(element), function (cells) {\n        return cells[0];\n      });\n    };\n    var getSelectionFromSelector = function (selector) {\n      return function (initCell, isRoot) {\n        var cellName = name(initCell);\n        var cell = cellName === 'col' || cellName === 'colgroup' ? getSelectionCellFallback(initCell) : initCell;\n        return closest$1(cell, selector, isRoot);\n      };\n    };\n    var getSelectionCellOrCaption = getSelectionFromSelector('th,td,caption');\n    var getSelectionCell = getSelectionFromSelector('th,td');\n    var getCellsFromSelection = function (selections) {\n      return selection(selections);\n    };\n    var getRowsFromSelection = function (selected, selector) {\n      var cellOpt = getSelectionCell(selected);\n      var rowsOpt = cellOpt.bind(function (cell) {\n        return table(cell);\n      }).map(function (table) {\n        return rows$1(table);\n      });\n      return lift2(cellOpt, rowsOpt, function (cell, rows) {\n        return filter$2(rows, function (row) {\n          return exists(fromDom(row.dom.cells), function (rowCell) {\n            return get$b(rowCell, selector) === '1' || eq$1(rowCell, cell);\n          });\n        });\n      }).getOr([]);\n    };\n\n    var extractSelected = function (cells) {\n      return table(cells[0]).map(function (table) {\n        var replica = extract$1(table, attributeSelector);\n        removeDataStyle(replica);\n        return [replica];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map$1(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom, {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map$1(elements, function (element) {\n        return element.dom.innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          cata$2(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var selectedCells = getCellsFromSelection(selections);\n          head(selectedCells).each(function (cell) {\n            table(cell).each(function (table) {\n              var elements = filter$2(fromHtml(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              var isTable = isTag('table');\n              if (elements.length === 1 && isTable(elements[0])) {\n                e.preventDefault();\n                var doc = SugarElement.fromDom(editor.getDoc());\n                var generators = paste$1(doc);\n                var targets = paste(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function () {\n                  editor.focus();\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n\n    var adt$7 = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt$7);\n\n    var neighbours = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize, resize) {\n      var result = input.slice(0);\n      var context = neighbours(input, column);\n      var onNone = constant(map$1(result, constant(0)));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onLeft = function (index, next) {\n        return resize.calcLeftEdgeDeltas(result, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onMiddle = function (prev, index, next) {\n        return resize.calcMiddleDeltas(result, prev, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      var onRight = function (prev, index) {\n        return resize.calcRightEdgeDeltas(result, prev, index, step, tableSize.minCellWidth(), tableSize.isRelative);\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidthForCells = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map$1(all, function (cell) {\n        var width = total(cell.column, cell.column + cell.colspan, widths);\n        return {\n          element: cell.element,\n          width: width,\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateWidthForColumns = function (warehouse, widths) {\n      var groups = Warehouse.justColumns(warehouse);\n      return map$1(groups, function (column, index) {\n        return {\n          element: column.element,\n          width: widths[index],\n          colspan: column.colspan\n        };\n      });\n    };\n    var recalculateHeightForCells = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map$1(all, function (cell) {\n        var height = total(cell.row, cell.row + cell.rowspan, heights);\n        return {\n          element: cell.element,\n          height: height,\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map$1(warehouse.all, function (row, i) {\n        return {\n          element: row.element,\n          height: heights[i]\n        };\n      });\n    };\n\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var recalculate = function (warehouse, widths) {\n      if (Warehouse.hasColumns(warehouse)) {\n        return recalculateWidthForColumns(warehouse, widths);\n      } else {\n        return recalculateWidthForCells(warehouse, widths);\n      }\n    };\n    var recalculateAndApply = function (warehouse, widths, tableSize) {\n      var newSizes = recalculate(warehouse, widths);\n      each$2(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element, cell.width);\n      });\n    };\n    var adjustWidth = function (table, delta, index, resizing, tableSize) {\n      var warehouse = Warehouse.fromTable(table);\n      var step = tableSize.getCellDelta(delta);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      var isLastColumn = index === warehouse.grid.columns - 1;\n      var clampedStep = resizing.clampTableDelta(widths, index, step, tableSize.minCellWidth(), isLastColumn);\n      var deltas = determine(widths, index, clampedStep, tableSize, resizing);\n      var newWidths = map$1(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      recalculateAndApply(warehouse, newWidths, tableSize);\n      resizing.resizeTable(tableSize.adjustTableWidth, clampedStep, isLastColumn);\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = Warehouse.fromTable(table);\n      var heights = getPixelHeights(warehouse, table, direction);\n      var newHeights = map$1(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, minHeight()) : dy;\n      });\n      var newCellSizes = recalculateHeightForCells(warehouse, newHeights);\n      var newRowSizes = matchRowHeight(warehouse, newHeights);\n      each$2(newRowSizes, function (row) {\n        setHeight(row.element, row.height);\n      });\n      each$2(newCellSizes, function (cell) {\n        setHeight(cell.element, cell.height);\n      });\n      var total = sumUp(newHeights);\n      setHeight(table, total);\n    };\n    var adjustAndRedistributeWidths$1 = function (_table, list, details, tableSize, resizeBehaviour) {\n      var warehouse = Warehouse.generate(list);\n      var sizes = tableSize.getWidths(warehouse, tableSize);\n      var tablePixelWidth = tableSize.pixelWidth();\n      var _a = resizeBehaviour.calcRedestributedWidths(sizes, tablePixelWidth, details.pixelDelta, tableSize.isRelative), newSizes = _a.newSizes, delta = _a.delta;\n      recalculateAndApply(warehouse, newSizes, tableSize);\n      tableSize.adjustTableWidth(delta);\n    };\n    var adjustWidthTo = function (_table, list, _info, tableSize) {\n      var warehouse = Warehouse.generate(list);\n      var widths = tableSize.getWidths(warehouse, tableSize);\n      recalculateAndApply(warehouse, widths, tableSize);\n    };\n\n    var zero = function (array) {\n      return map$1(array, constant(0));\n    };\n    var surround = function (sizes, startIndex, endIndex, results, f) {\n      return f(sizes.slice(0, startIndex)).concat(results).concat(f(sizes.slice(endIndex)));\n    };\n    var clampDeltaHelper = function (predicate) {\n      return function (sizes, index, delta, minCellSize) {\n        if (!predicate(delta)) {\n          return delta;\n        } else {\n          var newSize = Math.max(minCellSize, sizes[index] - Math.abs(delta));\n          var diff = Math.abs(newSize - sizes[index]);\n          return delta >= 0 ? diff : -diff;\n        }\n      };\n    };\n    var clampNegativeDelta = clampDeltaHelper(function (delta) {\n      return delta < 0;\n    });\n    var clampDelta = clampDeltaHelper(always);\n    var resizeTable = function () {\n      var calcFixedDeltas = function (sizes, index, next, delta, minCellSize) {\n        var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          0\n        ], zero);\n      };\n      var calcRelativeDeltas = function (sizes, index, delta, minCellSize) {\n        var ratio = (100 + delta) / 100;\n        var newThis = Math.max(minCellSize, (sizes[index] + delta) / ratio);\n        return map$1(sizes, function (size, idx) {\n          var newSize = idx === index ? newThis : size / ratio;\n          return newSize - size;\n        });\n      };\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          return calcFixedDeltas(sizes, index, next, delta, minCellSize);\n        }\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize, isRelative) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize, isRelative);\n      };\n      var resizeTable = function (resizer, delta) {\n        return resizer(delta);\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, index, delta, minCellSize, isRelative) {\n        if (isRelative) {\n          return calcRelativeDeltas(sizes, index, delta, minCellSize);\n        } else {\n          var clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);\n          return zero(sizes.slice(0, index)).concat([clampedDelta]);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, totalWidth, pixelDelta, isRelative) {\n        if (isRelative) {\n          var tableWidth = totalWidth + pixelDelta;\n          var ratio_1 = tableWidth / totalWidth;\n          var newSizes = map$1(sizes, function (size) {\n            return size / ratio_1;\n          });\n          return {\n            delta: ratio_1 * 100 - 100,\n            newSizes: newSizes\n          };\n        } else {\n          return {\n            delta: pixelDelta,\n            newSizes: sizes\n          };\n        }\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampNegativeDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n    var preserveTable = function () {\n      var calcLeftEdgeDeltas = function (sizes, index, next, delta, minCellSize) {\n        var idx = delta >= 0 ? next : index;\n        var clampedDelta = clampDelta(sizes, idx, delta, minCellSize);\n        return surround(sizes, index, next + 1, [\n          clampedDelta,\n          -clampedDelta\n        ], zero);\n      };\n      var calcMiddleDeltas = function (sizes, _prev, index, next, delta, minCellSize) {\n        return calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize);\n      };\n      var resizeTable = function (resizer, delta, isLastColumn) {\n        if (isLastColumn) {\n          resizer(delta);\n        }\n      };\n      var calcRightEdgeDeltas = function (sizes, _prev, _index, delta, _minCellSize, isRelative) {\n        if (isRelative) {\n          return zero(sizes);\n        } else {\n          var diff = delta / sizes.length;\n          return map$1(sizes, constant(diff));\n        }\n      };\n      var clampTableDelta = function (sizes, index, delta, minCellSize, isLastColumn) {\n        if (isLastColumn) {\n          if (delta >= 0) {\n            return delta;\n          } else {\n            var maxDelta = foldl(sizes, function (a, b) {\n              return a + b - minCellSize;\n            }, 0);\n            return Math.max(-maxDelta, delta);\n          }\n        } else {\n          return clampNegativeDelta(sizes, index, delta, minCellSize);\n        }\n      };\n      var calcRedestributedWidths = function (sizes, _totalWidth, _pixelDelta, _isRelative) {\n        return {\n          delta: 0,\n          newSizes: sizes\n        };\n      };\n      return {\n        resizeTable: resizeTable,\n        clampTableDelta: clampTableDelta,\n        calcLeftEdgeDeltas: calcLeftEdgeDeltas,\n        calcMiddleDeltas: calcMiddleDeltas,\n        calcRightEdgeDeltas: calcRightEdgeDeltas,\n        calcRedestributedWidths: calcRedestributedWidths\n      };\n    };\n\n    var only = function (element, isResizable) {\n      var parent = Optional.from(element.dom.documentElement).map(SugarElement.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var detached = function (editable, chrome, isResizable) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin,\n        isResizable: isResizable\n      };\n    };\n    var body = function (editable, chrome, isResizable) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(SugarPosition(0, 0)),\n        isResizable: isResizable\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body\n    };\n\n    var adt$6 = Adt.generate([\n      { invalid: ['raw'] },\n      { pixels: ['value'] },\n      { percent: ['value'] }\n    ]);\n    var validateFor = function (suffix, type, value) {\n      var rawAmount = value.substring(0, value.length - suffix.length);\n      var amount = parseFloat(rawAmount);\n      return rawAmount === amount.toString() ? type(amount) : adt$6.invalid(value);\n    };\n    var from = function (value) {\n      if (endsWith(value, '%')) {\n        return validateFor('%', adt$6.percent, value);\n      }\n      if (endsWith(value, 'px')) {\n        return validateFor('px', adt$6.pixels, value);\n      }\n      return adt$6.invalid(value);\n    };\n    var Size = __assign(__assign({}, adt$6), { from: from });\n\n    var redistributeToPercent = function (widths, totalWidth) {\n      return map$1(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          var ratio = px / totalWidth * 100;\n          return ratio + '%';\n        }, function (pc) {\n          return pc + '%';\n        });\n      });\n    };\n    var redistributeToPx = function (widths, totalWidth, newTotalWidth) {\n      var scale = newTotalWidth / totalWidth;\n      return map$1(widths, function (w) {\n        var colType = Size.from(w);\n        return colType.fold(function () {\n          return w;\n        }, function (px) {\n          return px * scale + 'px';\n        }, function (pc) {\n          return pc / 100 * newTotalWidth + 'px';\n        });\n      });\n    };\n    var redistributeEmpty = function (newWidthType, columns) {\n      var f = newWidthType.fold(function () {\n        return constant('');\n      }, function (pixels) {\n        var num = pixels / columns;\n        return constant(num + 'px');\n      }, function () {\n        var num = 100 / columns;\n        return constant(num + '%');\n      });\n      return range$1(columns, f);\n    };\n    var redistributeValues = function (newWidthType, widths, totalWidth) {\n      return newWidthType.fold(function () {\n        return widths;\n      }, function (px) {\n        return redistributeToPx(widths, totalWidth, px);\n      }, function (_pc) {\n        return redistributeToPercent(widths, totalWidth);\n      });\n    };\n    var redistribute$1 = function (widths, totalWidth, newWidth) {\n      var newType = Size.from(newWidth);\n      var floats = forall(widths, function (s) {\n        return s === '0px';\n      }) ? redistributeEmpty(newType, widths.length) : redistributeValues(newType, widths, totalWidth);\n      return normalize(floats);\n    };\n    var sum = function (values, fallback) {\n      if (values.length === 0) {\n        return fallback;\n      }\n      return foldr(values, function (rest, v) {\n        return Size.from(v).fold(constant(0), identity, identity) + rest;\n      }, 0);\n    };\n    var roundDown = function (num, unit) {\n      var floored = Math.floor(num);\n      return {\n        value: floored + unit,\n        remainder: num - floored\n      };\n    };\n    var add$3 = function (value, amount) {\n      return Size.from(value).fold(constant(value), function (px) {\n        return px + amount + 'px';\n      }, function (pc) {\n        return pc + amount + '%';\n      });\n    };\n    var normalize = function (values) {\n      if (values.length === 0) {\n        return values;\n      }\n      var scan = foldr(values, function (rest, value) {\n        var info = Size.from(value).fold(function () {\n          return {\n            value: value,\n            remainder: 0\n          };\n        }, function (num) {\n          return roundDown(num, 'px');\n        }, function (num) {\n          return {\n            value: num + '%',\n            remainder: 0\n          };\n        });\n        return {\n          output: [info.value].concat(rest.output),\n          remainder: rest.remainder + info.remainder\n        };\n      }, {\n        output: [],\n        remainder: 0\n      });\n      var r = scan.output;\n      return r.slice(0, r.length - 1).concat([add$3(r[r.length - 1], Math.round(scan.remainder))]);\n    };\n    var validate = Size.from;\n\n    var redistributeToW = function (newWidths, cells, unit) {\n      each$2(cells, function (cell) {\n        var widths = newWidths.slice(cell.column, cell.colspan + cell.column);\n        var w = sum(widths, minWidth());\n        set$1(cell.element, 'width', w + unit);\n      });\n    };\n    var redistributeToColumns = function (newWidths, columns, unit) {\n      each$2(columns, function (column, index) {\n        var width = sum([newWidths[index]], minWidth());\n        set$1(column.element, 'width', width + unit);\n      });\n    };\n    var redistributeToH = function (newHeights, rows, cells, unit) {\n      each$2(cells, function (cell) {\n        var heights = newHeights.slice(cell.row, cell.rowspan + cell.row);\n        var h = sum(heights, minHeight());\n        set$1(cell.element, 'height', h + unit);\n      });\n      each$2(rows, function (row, i) {\n        set$1(row.element, 'height', newHeights[i]);\n      });\n    };\n    var getUnit = function (newSize) {\n      return validate(newSize).fold(constant('px'), constant('px'), constant('%'));\n    };\n    var redistribute = function (table, optWidth, optHeight) {\n      var warehouse = Warehouse.fromTable(table);\n      var rows = warehouse.all;\n      var cells = Warehouse.justCells(warehouse);\n      var columns = Warehouse.justColumns(warehouse);\n      optWidth.each(function (newWidth) {\n        var widthUnit = getUnit(newWidth);\n        var totalWidth = get$8(table);\n        var oldWidths = getRawWidths(warehouse, table);\n        var nuWidths = redistribute$1(oldWidths, totalWidth, newWidth);\n        if (Warehouse.hasColumns(warehouse)) {\n          redistributeToColumns(nuWidths, columns, widthUnit);\n        } else {\n          redistributeToW(nuWidths, cells, widthUnit);\n        }\n        set$1(table, 'width', newWidth);\n      });\n      optHeight.each(function (newHeight) {\n        var hUnit = getUnit(newHeight);\n        var totalHeight = get$7(table);\n        var oldHeights = getRawHeights(warehouse, table, height);\n        var nuHeights = redistribute$1(oldHeights, totalHeight, newHeight);\n        redistributeToH(nuHeights, rows, cells, hUnit);\n        set$1(table, 'height', newHeight);\n      });\n    };\n    var isPercentSizing = isPercentSizing$1;\n    var isPixelSizing = isPixelSizing$1;\n    var isNoneSizing = isNoneSizing$1;\n\n    var getGridSize = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      return warehouse.grid;\n    };\n\n    var Event = function (fields) {\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter$2(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = {};\n        each$2(fields, function (name, i) {\n          event[name] = args[i];\n        });\n        each$2(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create$4 = function (typeDefs) {\n      var registry = map(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n\n    var last = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        cancel();\n        timer = setTimeout(function () {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var sort = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each$2(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort(everything);\n      var dupe = find$1(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains$2(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter$2(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter$2(keys, function (key) {\n        return !contains$2(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    var InDrag = function () {\n      var previous = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = create$4({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    };\n\n    var NoDrag = function () {\n      var events = create$4({ move: Event(['info']) });\n      return {\n        onEvent: noop,\n        reset: noop,\n        events: events.registry\n      };\n    };\n\n    var Movement = function () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    };\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = create$4({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info);\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent$1 = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle$2 = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent$1(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle$2(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var filter = always;\n    var bind = function (element, event, handler) {\n      return bind$1(element, event, filter, handler);\n    };\n    var fromRawEvent = fromRawEvent$1;\n\n    var read = function (element, attr) {\n      var value = get$b(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$2 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set$2(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$4 = function (element, attr, id) {\n      var nu = filter$2(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$2(element, attr, nu.join(' '));\n      } else {\n        remove$7(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$5 = function (element) {\n      return read(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add$2(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$4(element, 'class', clazz);\n    };\n\n    var add = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$5(element);\n      if (classList.length === 0) {\n        remove$7(element, 'class');\n      }\n    };\n    var remove$2 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles$1 = css('ephox-dragster');\n    var resolve$1 = styles$1.resolve;\n\n    var Blocker = function (options) {\n      var settings = __assign({ layerClass: resolve$1('blocker') }, options);\n      var div = SugarElement.fromTag('div');\n      set$2(div, 'role', 'presentation');\n      setAll(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add(div, resolve$1('blocker'));\n      add(div, settings.layerClass);\n      var element = constant(div);\n      var destroy = function () {\n        remove$5(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var compare = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n    var extract = function (event) {\n      return Optional.some(SugarPosition(event.x, event.y));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left, info.top);\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append$1(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$5(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var transform$1 = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return setup(mutation, mode, settings);\n    };\n\n    var closest = function (target) {\n      return closest$1(target, '[contenteditable]');\n    };\n    var isEditable$1 = function (element, assumeEditable) {\n      if (assumeEditable === void 0) {\n        assumeEditable = false;\n      }\n      if (!detect$3().browser.isIE() && inBody(element)) {\n        return element.dom.isContentEditable;\n      } else {\n        return closest(element).fold(constant(assumeEditable), function (editable) {\n          return getRaw(editable) === 'true';\n        });\n      }\n    };\n    var getRaw = function (element) {\n      return element.dom.contentEditable;\n    };\n\n    var styles = css('ephox-snooker');\n    var resolve = styles.resolve;\n\n    var Mutation = function () {\n      var events = create$4({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = create$4({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Optional.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta, event.yDelta, t);\n        });\n      });\n      var assign = function (t) {\n        target = Optional.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var col = function (column, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll(bar, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll$1(bar, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n    var row = function (r, x, y, w, h) {\n      var bar = SugarElement.fromTag('div');\n      setAll(bar, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll$1(bar, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return bar;\n    };\n\n    var resizeBar = resolve('resizer-bar');\n    var resizeRowBar = resolve('resizer-rows');\n    var resizeColBar = resolve('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var resizableRows = function (warehouse, isResizable) {\n      return bind$2(warehouse.all, function (row, i) {\n        return isResizable(row.element) ? [i] : [];\n      });\n    };\n    var resizableColumns = function (warehouse, isResizable) {\n      var resizableCols = [];\n      range$1(warehouse.grid.columns, function (index) {\n        var colElmOpt = Warehouse.getColumnAt(warehouse, index).map(function (col) {\n          return col.element;\n        });\n        if (colElmOpt.forall(isResizable)) {\n          resizableCols.push(index);\n        }\n      });\n      return filter$2(resizableCols, function (colIndex) {\n        var columnCells = Warehouse.filterItems(warehouse, function (cell) {\n          return cell.column === colIndex;\n        });\n        return forall(columnCells, function (cell) {\n          return isResizable(cell.element);\n        });\n      });\n    };\n    var destroy = function (wire) {\n      var previous = descendants(wire.parent(), '.' + resizeBar);\n      each$2(previous, remove$5);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each$2(positions, function (cpOption) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add(bar, resizeBar);\n          append$1(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = col(cp.col, cp.x - origin.left, position.top - origin.top, BAR_THICKNESS, tableHeight);\n        add(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = row(cp.row, position.left - origin.left, cp.y - origin.top, tableWidth, BAR_THICKNESS);\n        add(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (warhouse, wire, table, rows, cols) {\n      var position = absolute(table);\n      var isResizable = wire.isResizable;\n      var rowPositions = rows.length > 0 ? height.positions(rows, table) : [];\n      var resizableRowBars = rowPositions.length > 0 ? resizableRows(warhouse, isResizable) : [];\n      var resizableRowPositions = filter$2(rowPositions, function (_pos, i) {\n        return exists(resizableRowBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshRow(wire, resizableRowPositions, position, getOuter$2(table));\n      var colPositions = cols.length > 0 ? width.positions(cols, table) : [];\n      var resizableColBars = colPositions.length > 0 ? resizableColumns(warhouse, isResizable) : [];\n      var resizableColPositions = filter$2(colPositions, function (_pos, i) {\n        return exists(resizableColBars, function (barIndex) {\n          return i === barIndex;\n        });\n      });\n      refreshCol(wire, resizableColPositions, position, getOuter$1(table));\n    };\n    var refresh = function (wire, table) {\n      destroy(wire);\n      if (wire.isResizable(table)) {\n        var warehouse = Warehouse.fromTable(table);\n        var rows$1 = rows(warehouse);\n        var cols = columns(warehouse);\n        refreshGrid(warehouse, wire, table, rows$1, cols);\n      }\n    };\n    var each = function (wire, f) {\n      var bars = descendants(wire.parent(), '.' + resizeBar);\n      each$2(bars, f);\n    };\n    var hide = function (wire) {\n      each(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has(element, resizeColBar);\n    };\n\n    var resizeBarDragging = resolve('resizer-bar-dragging');\n    var BarManager = function (wire) {\n      var mutation = BarMutation();\n      var resizing = transform$1(mutation, {});\n      var hoverTable = Optional.none();\n      var getResizer = function (element, type) {\n        return Optional.from(get$b(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target, 'data-row').each(function (_dataRow) {\n          var currentRow = getCssValue(event.target, 'top');\n          set$1(event.target, 'top', currentRow + event.yDelta + 'px');\n        });\n        getResizer(event.target, 'data-column').each(function (_dataCol) {\n          var currentCol = getCssValue(event.target, 'left');\n          set$1(event.target, 'left', currentCol + event.xDelta + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = getCssValue(target, dir);\n        var oldX = getAttrValue(target, 'data-initial-' + dir, 0);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove$7(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove$7(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            refresh(wire, table);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set$2(target, 'data-initial-' + dir, getCssValue(target, dir));\n        add(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind(wire.parent(), 'mousedown', function (event) {\n        if (isRowBar(event.target)) {\n          handler(event.target, 'top');\n        }\n        if (isColBar(event.target)) {\n          handler(event.target, 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq$1(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(isEditable$1);\n      };\n      var mouseover = bind(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target).fold(function () {\n          if (inBody(event.target)) {\n            destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Optional.some(table);\n          refresh(wire, table);\n        });\n      });\n      var destroy$1 = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        destroy(wire);\n      };\n      var refresh$1 = function (tbl) {\n        refresh(wire, tbl);\n      };\n      var events = create$4({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy$1,\n        refresh: refresh$1,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(hide, wire),\n        showBars: curry(show, wire),\n        events: events.registry\n      };\n    };\n\n    var create$3 = function (wire, resizing, lazySizing) {\n      var hdirection = height;\n      var vdirection = width;\n      var manager = BarManager(wire);\n      var events = create$4({\n        beforeResize: Event([\n          'table',\n          'type'\n        ]),\n        afterResize: Event([\n          'table',\n          'type'\n        ]),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'row');\n        var delta = hdirection.delta(event.delta, table);\n        adjustHeight(table, delta, event.row, hdirection);\n        events.trigger.afterResize(table, 'row');\n      });\n      manager.events.startAdjust.bind(function (_event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        var table = event.table;\n        events.trigger.beforeResize(table, 'col');\n        var delta = vdirection.delta(event.delta, table);\n        var tableSize = lazySizing(table);\n        adjustWidth(table, delta, event.column, resizing, tableSize);\n        events.trigger.afterResize(table, 'col');\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    };\n    var TableResize = { create: create$3 };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireTableSelectionChange = function (editor, cells, start, finish, otherCells) {\n      editor.fire('TableSelectionChange', {\n        cells: cells,\n        start: start,\n        finish: finish,\n        otherCells: otherCells\n      });\n    };\n    var fireTableSelectionClear = function (editor) {\n      editor.fire('TableSelectionClear');\n    };\n    var fireTableModified = function (editor, table, data) {\n      editor.fire('TableModified', __assign(__assign({}, data), { table: table }));\n    };\n    var styleModified = {\n      structure: false,\n      style: true\n    };\n    var structureModified = {\n      structure: true,\n      style: false\n    };\n    var styleAndStructureModified = {\n      structure: true,\n      style: true\n    };\n\n    var defaultTableToolbar = 'tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol';\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var defaultCellBorderWidths = range$1(5, function (i) {\n      var size = i + 1 + 'px';\n      return {\n        title: size,\n        value: size\n      };\n    });\n    var defaultCellBorderStyles = map$1([\n      'Solid',\n      'Dotted',\n      'Dashed',\n      'Double',\n      'Groove',\n      'Ridge',\n      'Inset',\n      'Outset',\n      'None',\n      'Hidden'\n    ], function (type) {\n      return {\n        title: type,\n        value: type.toLowerCase()\n      };\n    });\n    var determineDefaultStyles = function (editor) {\n      var _a;\n      if (isPixelsForced(editor)) {\n        var dom = editor.dom;\n        var parentBlock = (_a = dom.getParent(editor.selection.getStart(), dom.isBlock)) !== null && _a !== void 0 ? _a : editor.getBody();\n        var contentWidth = getInner(SugarElement.fromDom(parentBlock));\n        return __assign(__assign({}, defaultStyles), { width: contentWidth + 'px' });\n      } else if (isResponsiveForced(editor)) {\n        return filter$1(defaultStyles, function (_value, key) {\n          return key !== 'width';\n        });\n      } else {\n        return defaultStyles;\n      }\n    };\n    var defaultAttributes = { border: '1' };\n    var defaultColumnResizingBehaviour = 'preservetable';\n    var getTableSizingMode = function (editor) {\n      return editor.getParam('table_sizing_mode', 'auto');\n    };\n    var getTableResponseWidth = function (editor) {\n      return editor.getParam('table_responsive_width');\n    };\n    var getTableBorderWidths = function (editor) {\n      return editor.getParam('table_border_widths', defaultCellBorderWidths, 'array');\n    };\n    var getTableBorderStyles = function (editor) {\n      return editor.getParam('table_border_styles', defaultCellBorderStyles, 'array');\n    };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', determineDefaultStyles(editor), 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var isPercentagesForced = function (editor) {\n      return getTableSizingMode(editor) === 'relative' || getTableResponseWidth(editor) === true;\n    };\n    var isPixelsForced = function (editor) {\n      return getTableSizingMode(editor) === 'fixed' || getTableResponseWidth(editor) === false;\n    };\n    var isResponsiveForced = function (editor) {\n      return getTableSizingMode(editor) === 'responsive';\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('table_toolbar', defaultTableToolbar);\n    };\n    var useColumnGroup = function (editor) {\n      return editor.getParam('table_use_colgroups', false, 'boolean');\n    };\n    var getTableHeaderType = function (editor) {\n      var defaultValue = 'section';\n      var value = editor.getParam('table_header_type', defaultValue, 'string');\n      var validValues = [\n        'section',\n        'cells',\n        'sectionCells',\n        'auto'\n      ];\n      if (!contains$2(validValues, value)) {\n        return defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getColumnResizingBehaviour = function (editor) {\n      var validModes = [\n        'preservetable',\n        'resizetable'\n      ];\n      var givenMode = editor.getParam('table_column_resizing', defaultColumnResizingBehaviour, 'string');\n      return find$1(validModes, function (mode) {\n        return mode === givenMode;\n      }).getOr(defaultColumnResizingBehaviour);\n    };\n    var isPreserveTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'preservetable';\n    };\n    var isResizeTableColumnResizing = function (editor) {\n      return getColumnResizingBehaviour(editor) === 'resizetable';\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Optional.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Optional.some(cloneElements);\n      } else {\n        return Optional.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return isString(objectResizing) ? objectResizing === 'table' : objectResizing;\n    };\n    var getTableBackgroundColorMap = function (editor) {\n      return editor.getParam('table_background_color_map', [], 'array');\n    };\n    var getTableBorderColorMap = function (editor) {\n      return editor.getParam('table_border_color_map', [], 'array');\n    };\n\n    var get$4 = function (editor, table) {\n      if (isPercentagesForced(editor)) {\n        return TableSize.percentageSize(table);\n      } else if (isPixelsForced(editor)) {\n        return TableSize.pixelSize(table);\n      } else {\n        return TableSize.getTableSize(table);\n      }\n    };\n\n    var cleanupLegacyAttributes = function (element) {\n      remove$7(element, 'width');\n    };\n    var convertToPercentSize = function (table) {\n      var newWidth = getPercentTableWidth(table);\n      redistribute(table, Optional.some(newWidth), Optional.none());\n      cleanupLegacyAttributes(table);\n    };\n    var convertToPixelSize = function (table) {\n      var newWidth = getPixelTableWidth(table);\n      redistribute(table, Optional.some(newWidth), Optional.none());\n      cleanupLegacyAttributes(table);\n    };\n    var convertToNoneSize = function (table) {\n      remove$6(table, 'width');\n      var columns = columns$1(table);\n      var rowElements = columns.length > 0 ? columns : cells$1(table);\n      each$2(rowElements, function (cell) {\n        remove$6(cell, 'width');\n        cleanupLegacyAttributes(cell);\n      });\n      cleanupLegacyAttributes(table);\n    };\n\n    var enforcePercentage = convertToPercentSize;\n    var enforcePixels = convertToPixelSize;\n    var enforceNone = convertToNoneSize;\n    var syncPixels = function (table) {\n      var warehouse = Warehouse.fromTable(table);\n      if (!Warehouse.hasColumns(warehouse)) {\n        each$2(cells$1(table), function (cell) {\n          var computedWidth = get$a(cell, 'width');\n          set$1(cell, 'width', computedWidth);\n          remove$7(cell, 'width');\n        });\n      }\n    };\n\n    var createContainer = function () {\n      var container = SugarElement.fromTag('div');\n      setAll(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append$1(body$1(), container);\n      return container;\n    };\n    var get$3 = function (editor, isResizable) {\n      return editor.inline ? ResizeWire.body(getBody(editor), createContainer(), isResizable) : ResizeWire.only(SugarElement.fromDom(editor.getDoc()), isResizable);\n    };\n    var remove$1 = function (editor, wire) {\n      if (editor.inline) {\n        remove$5(wire.parent());\n      }\n    };\n\n    var barResizerPrefix = 'bar-';\n    var isResizable = function (elm) {\n      return get$b(elm, 'data-mce-resize') !== 'false';\n    };\n    var getResizeHandler = function (editor) {\n      var selectionRng = Optional.none();\n      var resize = Optional.none();\n      var wire = Optional.none();\n      var startW;\n      var startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(SugarElement.fromDom(editor.getBody()), isResizable));\n      };\n      var lazySizing = function (table) {\n        return get$4(editor, table);\n      };\n      var lazyResizingBehaviour = function () {\n        return isPreserveTableColumnResizing(editor) ? preserveTable() : resizeTable();\n      };\n      var getNumColumns = function (table) {\n        return getGridSize(table).columns;\n      };\n      var afterCornerResize = function (table, origin, width) {\n        var isRightEdgeResize = endsWith(origin, 'e');\n        if (startRawW === '') {\n          enforcePercentage(table);\n        }\n        if (width !== startW && startRawW !== '') {\n          set$1(table, 'width', startRawW);\n          var resizing = lazyResizingBehaviour();\n          var tableSize = lazySizing(table);\n          var col = isPreserveTableColumnResizing(editor) || isRightEdgeResize ? getNumColumns(table) - 1 : 0;\n          adjustWidth(table, width - startW, col, resizing, tableSize);\n        } else if (isPercentage$1(startRawW)) {\n          var percentW = parseFloat(startRawW.replace('%', ''));\n          var targetPercentW = width * percentW / startW;\n          set$1(table, 'width', targetPercentW + '%');\n        }\n        if (isPixel(startRawW)) {\n          syncPixels(table);\n        }\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          remove$1(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var rawWire = get$3(editor, isResizable);\n        wire = Optional.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var resizing = lazyResizingBehaviour();\n          var sz = TableResize.create(rawWire, resizing, lazySizing);\n          sz.on();\n          sz.events.startDrag.bind(function (_event) {\n            selectionRng = Optional.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table.dom;\n            fireObjectResizeStart(editor, rawTable, getPixelWidth(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table;\n            var rawTable = table.dom;\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth(rawTable), getPixelHeight(rawTable), barResizerPrefix + event.type);\n            editor.undoManager.add();\n          });\n          resize = Optional.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          each$2(editor.dom.select('.mce-clonedresizable'), function (clone) {\n            editor.dom.addClass(clone, 'mce-' + getColumnResizingBehaviour(editor) + '-columns');\n          });\n          if (!isPixelSizing(table) && isPixelsForced(editor)) {\n            enforcePixels(table);\n          } else if (!isPercentSizing(table) && isPercentagesForced(editor)) {\n            enforcePercentage(table);\n          }\n          if (isNoneSizing(table) && startsWith(e.origin, barResizerPrefix)) {\n            enforcePercentage(table);\n          }\n          startW = e.width;\n          startRawW = isResponsiveForced(editor) ? '' : getRawWidth(editor, targetElm).getOr('');\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = SugarElement.fromDom(targetElm);\n          var origin_1 = e.origin;\n          if (startsWith(origin_1, 'corner-')) {\n            afterCornerResize(table, origin_1, e.width);\n          }\n          removeDataStyle(table);\n          fireTableModified(editor, table.dom, styleModified);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        lazyResize().each(function (resize) {\n          if (editor.mode.isReadOnly()) {\n            resize.hideBars();\n          } else {\n            resize.showBars();\n          }\n        });\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n\n    var scan$1 = function (universe, element, direction) {\n      if (universe.property().isText(element) && universe.property().getText(element).trim().length === 0 || universe.property().isComment(element)) {\n        return direction(element).bind(function (elem) {\n          return scan$1(universe, elem, direction).orThunk(function () {\n            return Optional.some(elem);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var toEnd = function (universe, element) {\n      if (universe.property().isText(element)) {\n        return universe.property().getText(element).length;\n      }\n      var children = universe.property().children(element);\n      return children.length;\n    };\n    var freefallRtl$2 = function (universe, element) {\n      var candidate = scan$1(universe, element, universe.query().prevSibling).getOr(element);\n      if (universe.property().isText(candidate)) {\n        return point(candidate, toEnd(universe, candidate));\n      }\n      var children = universe.property().children(candidate);\n      return children.length > 0 ? freefallRtl$2(universe, children[children.length - 1]) : point(candidate, toEnd(universe, candidate));\n    };\n\n    var freefallRtl$1 = freefallRtl$2;\n\n    var universe$2 = DomUniverse();\n    var freefallRtl = function (element) {\n      return freefallRtl$1(universe$2, element);\n    };\n\n    var halve = function (main, other) {\n      var colspan = getSpan(main, 'colspan');\n      if (colspan === 1) {\n        var width = getGenericWidth(main);\n        width.each(function (w) {\n          var newWidth = w.value / 2;\n          setGenericWidth(main, newWidth, w.unit);\n          setGenericWidth(other, newWidth, w.unit);\n        });\n      }\n    };\n\n    var isHeaderCell = isTag('th');\n    var isHeaderCells = function (cells) {\n      return forall(cells, function (cell) {\n        return isHeaderCell(cell.element);\n      });\n    };\n    var getRowHeaderType = function (isHeaderRow, isHeaderCells) {\n      if (isHeaderRow && isHeaderCells) {\n        return 'sectionCells';\n      } else if (isHeaderRow) {\n        return 'section';\n      } else {\n        return 'cells';\n      }\n    };\n    var getRowType$1 = function (row) {\n      var isHeaderRow = row.section === 'thead';\n      var isHeaderCells = is(findCommonCellType(row.cells), 'th');\n      if (isHeaderRow || isHeaderCells) {\n        return {\n          type: 'header',\n          subType: getRowHeaderType(isHeaderRow, isHeaderCells)\n        };\n      } else if (row.section === 'tfoot') {\n        return { type: 'footer' };\n      } else {\n        return { type: 'body' };\n      }\n    };\n    var findCommonCellType = function (cells) {\n      var headerCells = filter$2(cells, function (cell) {\n        return isHeaderCell(cell.element);\n      });\n      if (headerCells.length === 0) {\n        return Optional.some('td');\n      } else if (headerCells.length === cells.length) {\n        return Optional.some('th');\n      } else {\n        return Optional.none();\n      }\n    };\n    var findCommonRowType = function (rows) {\n      var rowTypes = map$1(rows, function (row) {\n        return getRowType$1(row).type;\n      });\n      var hasHeader = contains$2(rowTypes, 'header');\n      var hasFooter = contains$2(rowTypes, 'footer');\n      if (!hasHeader && !hasFooter) {\n        return Optional.some('body');\n      } else {\n        var hasBody = contains$2(rowTypes, 'body');\n        if (hasHeader && !hasBody && !hasFooter) {\n          return Optional.some('header');\n        } else if (!hasHeader && !hasBody && hasFooter) {\n          return Optional.some('footer');\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var findTableRowHeaderType = function (warehouse) {\n      return findMap(warehouse.all, function (row) {\n        var rowType = getRowType$1(row);\n        return rowType.type === 'header' ? Optional.from(rowType.subType) : Optional.none();\n      });\n    };\n\n    var transformCell = function (cell, comparator, substitution) {\n      return elementnew(substitution(cell.element, comparator), true, cell.isLocked);\n    };\n    var transformRow = function (row, section) {\n      return row.section !== section ? rowcells(row.element, row.cells, section, row.isNew) : row;\n    };\n    var section = function () {\n      return {\n        transformRow: transformRow,\n        transformCell: function (cell, comparator, substitution) {\n          var newCell = substitution(cell.element, comparator);\n          var fixedCell = name(newCell) !== 'td' ? mutate$1(newCell, 'td') : newCell;\n          return elementnew(fixedCell, cell.isNew, cell.isLocked);\n        }\n      };\n    };\n    var sectionCells = function () {\n      return {\n        transformRow: transformRow,\n        transformCell: transformCell\n      };\n    };\n    var cells = function () {\n      return {\n        transformRow: function (row, section) {\n          var newSection = section === 'thead' ? 'tbody' : section;\n          return transformRow(row, newSection);\n        },\n        transformCell: transformCell\n      };\n    };\n    var fallback = function () {\n      return {\n        transformRow: identity,\n        transformCell: transformCell\n      };\n    };\n    var getTableSectionType = function (table, fallback) {\n      var warehouse = Warehouse.fromTable(table);\n      var type = findTableRowHeaderType(warehouse).getOr(fallback);\n      switch (type) {\n      case 'section':\n        return section();\n      case 'sectionCells':\n        return sectionCells();\n      case 'cells':\n        return cells();\n      }\n    };\n    var TableSection = {\n      getTableSectionType: getTableSectionType,\n      section: section,\n      sectionCells: sectionCells,\n      cells: cells,\n      fallback: fallback\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove$7(element, property);\n      } else {\n        set$2(element, property, value);\n      }\n    };\n    var insert$1 = function (table, selector, element) {\n      last$2(children$1(table, selector)).fold(function () {\n        return prepend(table, element);\n      }, function (child) {\n        return after$5(child, element);\n      });\n    };\n    var generateSection = function (table, sectionName) {\n      var section = child$1(table, sectionName).getOrThunk(function () {\n        var newSection = SugarElement.fromTag(sectionName, owner(table).dom);\n        if (sectionName === 'thead') {\n          insert$1(table, 'caption,colgroup', newSection);\n        } else if (sectionName === 'colgroup') {\n          insert$1(table, 'caption', newSection);\n        } else {\n          append$1(table, newSection);\n        }\n        return newSection;\n      });\n      empty(section);\n      return section;\n    };\n    var render$1 = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var syncRows = function (gridSection) {\n        return map$1(gridSection, function (row) {\n          if (row.isNew) {\n            newRows.push(row.element);\n          }\n          var tr = row.element;\n          empty(tr);\n          each$2(row.cells, function (cell) {\n            if (cell.isNew) {\n              newCells.push(cell.element);\n            }\n            setIfNot(cell.element, 'colspan', cell.colspan, 1);\n            setIfNot(cell.element, 'rowspan', cell.rowspan, 1);\n            append$1(tr, cell.element);\n          });\n          return tr;\n        });\n      };\n      var syncColGroup = function (gridSection) {\n        return bind$2(gridSection, function (colGroup) {\n          return map$1(colGroup.cells, function (col) {\n            setIfNot(col.element, 'span', col.colspan, 1);\n            return col.element;\n          });\n        });\n      };\n      var renderSection = function (gridSection, sectionName) {\n        var section = generateSection(table, sectionName);\n        var sync = sectionName === 'colgroup' ? syncColGroup : syncRows;\n        var sectionElems = sync(gridSection);\n        append(section, sectionElems);\n      };\n      var removeSection = function (sectionName) {\n        child$1(table, sectionName).each(remove$5);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      var columnGroupsSection = [];\n      each$2(grid, function (row) {\n        switch (row.section) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        case 'colgroup':\n          columnGroupsSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(columnGroupsSection, 'colgroup');\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: newRows,\n        newCells: newCells\n      };\n    };\n    var copy = function (grid) {\n      return map$1(grid, function (row) {\n        var tr = shallow(row.element);\n        each$2(row.cells, function (cell) {\n          var clonedCell = deep(cell.element);\n          setIfNot(clonedCell, 'colspan', cell.colspan, 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan, 1);\n          append$1(tr, clonedCell);\n        });\n        return tr;\n      });\n    };\n\n    var getColumn = function (grid, index) {\n      return map$1(grid, function (row) {\n        return getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element, x.element);\n      });\n      return index.getOr(xs.length);\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var gridRow = getRow(grid, row);\n      var isColRow = gridRow.section === 'colgroup';\n      var colspan = findDiff(gridRow.cells.slice(column), comparator);\n      var rowspan = isColRow ? 1 : findDiff(getColumn(grid.slice(row), column), comparator);\n      return {\n        colspan: colspan,\n        rowspan: rowspan\n      };\n    };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map$1(grid, function (row) {\n        return map$1(row.cells, never);\n      });\n      var updateSeen = function (rowIndex, columnIndex, rowspan, colspan) {\n        for (var row = rowIndex; row < rowIndex + rowspan; row++) {\n          for (var column = columnIndex; column < columnIndex + colspan; column++) {\n            seen[row][column] = true;\n          }\n        }\n      };\n      return map$1(grid, function (row, rowIndex) {\n        var details = bind$2(row.cells, function (cell, columnIndex) {\n          if (seen[rowIndex][columnIndex] === false) {\n            var result = subgrid(grid, rowIndex, columnIndex, comparator);\n            updateSeen(rowIndex, columnIndex, result.rowspan, result.colspan);\n            return [detailnew(cell.element, result.rowspan, result.colspan, cell.isNew)];\n          } else {\n            return [];\n          }\n        });\n        return rowdetailnew(row.element, details, row.section, row.isNew);\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      each$2(warehouse.colgroups, function (colgroup) {\n        var colgroupCols = [];\n        for (var columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++) {\n          var element = Warehouse.getColumnAt(warehouse, columnIndex).map(function (column) {\n            return elementnew(column.element, isNew, false);\n          }).getOrThunk(function () {\n            return elementnew(generators.colGap(), true, false);\n          });\n          colgroupCols.push(element);\n        }\n        grid.push(rowcells(colgroup.element, colgroupCols, 'colgroup', isNew));\n      });\n      for (var rowIndex = 0; rowIndex < warehouse.grid.rows; rowIndex++) {\n        var rowCells = [];\n        for (var columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++) {\n          var element = Warehouse.getAt(warehouse, rowIndex, columnIndex).map(function (item) {\n            return elementnew(item.element, isNew, item.isLocked);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true, false);\n          });\n          rowCells.push(element);\n        }\n        var rowDetail = warehouse.all[rowIndex];\n        var row = rowcells(rowDetail.element, rowCells, rowDetail.section, isNew);\n        grid.push(row);\n      }\n      return grid;\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return toGrid(warehouse, generators, false);\n    };\n    var toDetailList = function (grid) {\n      return toDetails(grid, eq$1);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      return findMap(warehouse.all, function (r) {\n        return find$1(r.cells, function (e) {\n          return eq$1(element, e.element);\n        });\n      });\n    };\n    var extractCells = function (warehouse, target, predicate) {\n      var details = map$1(target.selection, function (cell$1) {\n        return cell(cell$1).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        }).filter(predicate);\n      });\n      var cells = cat(details);\n      return someIf(cells.length > 0, cells);\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, behaviours) {\n        var warehouse = Warehouse.fromTable(table);\n        var tableSection = Optional.from(behaviours === null || behaviours === void 0 ? void 0 : behaviours.section).getOrThunk(TableSection.fallback);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq$1, genWrappers(generators), tableSection);\n          var lockedColumns = getLockedColumnsFromGrid(result.grid);\n          var grid = toDetailList(result.grid);\n          return {\n            info: info,\n            grid: grid,\n            cursor: result.cursor,\n            lockedColumns: lockedColumns\n          };\n        });\n        return output.bind(function (out) {\n          var newElements = render$1(table, out.grid);\n          var tableSizing = Optional.from(behaviours === null || behaviours === void 0 ? void 0 : behaviours.sizing).getOrThunk(function () {\n            return TableSize.getTableSize(table);\n          });\n          var resizing = Optional.from(behaviours === null || behaviours === void 0 ? void 0 : behaviours.resize).getOrThunk(preserveTable);\n          adjustment(table, out.grid, out.info, {\n            sizing: tableSizing,\n            resize: resizing,\n            section: tableSection\n          });\n          postAction(table);\n          refresh(wire, table);\n          remove$7(table, LOCKED_COL_ATTR);\n          if (out.lockedColumns.length > 0) {\n            set$2(table, LOCKED_COL_ATTR, out.lockedColumns.join(','));\n          }\n          return Optional.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onPaste = function (warehouse, target) {\n      return cell(target.element).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign(__assign({}, details), {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteByEditor = function (warehouse, target) {\n      return extractCells(warehouse, target, always).map(function (cells) {\n        return {\n          cells: cells,\n          generators: target.generators,\n          clipboard: target.clipboard\n        };\n      });\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable;\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable;\n    };\n    var onCells = function (warehouse, target) {\n      return extractCells(warehouse, target, always);\n    };\n    var onUnlockedCells = function (warehouse, target) {\n      return extractCells(warehouse, target, function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var isUnlockedTableCell = function (warehouse, cell) {\n      return findInWarehouse(warehouse, cell).exists(function (detail) {\n        return !detail.isLocked;\n      });\n    };\n    var allUnlocked = function (warehouse, cells) {\n      return forall(cells, function (cell) {\n        return isUnlockedTableCell(warehouse, cell);\n      });\n    };\n    var onUnlockedMergable = function (warehouse, target) {\n      return onMergable(warehouse, target).filter(function (mergeable) {\n        return allUnlocked(warehouse, mergeable.cells);\n      });\n    };\n    var onUnlockedUnmergable = function (warehouse, target) {\n      return onUnmergable(warehouse, target).filter(function (cells) {\n        return allUnlocked(warehouse, cells);\n      });\n    };\n\n    var merge$2 = function (grid, bounds, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (rows.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow; i <= bounds.finishRow; i++) {\n        for (var j = bounds.startCol; j <= bounds.finishCol; j++) {\n          var row = rows[i];\n          var isLocked = getCell(row, j).isLocked;\n          mutateCell(row, j, elementnew(substitution(), false, isLocked));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var first = true;\n      for (var i = 0; i < rows.length; i++) {\n        for (var j = 0; j < cellLength(rows[0]); j++) {\n          var row = rows[i];\n          var currentCell = getCell(row, j);\n          var currentCellElm = currentCell.element;\n          var isToReplace = comparator(currentCellElm, target);\n          if (isToReplace === true && first === false) {\n            mutateCell(row, j, elementnew(substitution(), true, currentCell.isLocked));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element, cell.element);\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitCols = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid[0].cells.length) {\n        each$2(grid, function (row) {\n          var prevCell = row.cells[index - 1];\n          var current = row.cells[index];\n          var isToReplace = comparator(current.element, prevCell.element);\n          if (isToReplace) {\n            mutateCell(row, index, elementnew(substitution(), true, current.isLocked));\n          }\n        });\n      }\n      return grid;\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      if (index > 0 && index < rows.length) {\n        var rowPrevCells = rows[index - 1].cells;\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each$2(cells, function (cell) {\n          var replacement = Optional.none();\n          for (var i = index; i < rows.length; i++) {\n            var _loop_1 = function (j) {\n              var row = rows[i];\n              var current = getCell(row, j);\n              var isToReplace = comparator(current.element, cell.element);\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Optional.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  mutateCell(row, j, elementnew(sub, true, current.isLocked));\n                });\n              }\n            };\n            for (var j = 0; j < cellLength(rows[0]); j++) {\n              _loop_1(j);\n            }\n          }\n        });\n      }\n      return grid;\n    };\n\n    var value$1 = function (o) {\n      var or = function (_opt) {\n        return value$1(o);\n      };\n      var orThunk = function (_f) {\n        return value$1(o);\n      };\n      var map = function (f) {\n        return value$1(f(o));\n      };\n      var mapError = function (_f) {\n        return value$1(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = identity;\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value$1);\n    };\n    var Result = {\n      value: value$1,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row >= gridA.length || startAddress.column > cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row + ', column: ' + startAddress.column);\n      }\n      var rowRemainder = gridA.slice(startAddress.row);\n      var colRemainder = rowRemainder[0].cells.slice(startAddress.column);\n      var colRequired = cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: rowRemainder.length - rowRequired,\n        colDelta: colRemainder.length - colRequired\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = cellLength(gridA[0]);\n      var colLengthB = cellLength(gridB[0]);\n      return {\n        rowDelta: 0,\n        colDelta: colLengthA - colLengthB\n      };\n    };\n    var measureHeight = function (gridA, gridB) {\n      var rowLengthA = gridA.length;\n      var rowLengthB = gridB.length;\n      return {\n        rowDelta: rowLengthA - rowLengthB,\n        colDelta: 0\n      };\n    };\n    var generateElements = function (amount, row, generators, isLocked) {\n      var generator = row.section === 'colgroup' ? generators.col : generators.cell;\n      return range$1(amount, function (idx) {\n        return elementnew(generator(), true, isLocked(idx));\n      });\n    };\n    var rowFill = function (grid, amount, generators, lockedColumns) {\n      var exampleRow = grid[grid.length - 1];\n      return grid.concat(range$1(amount, function () {\n        var generator = exampleRow.section === 'colgroup' ? generators.colgroup : generators.row;\n        var row = clone$1(exampleRow, generator, identity);\n        var elements = generateElements(row.cells.length, row, generators, function (idx) {\n          return has$1(lockedColumns, idx.toString());\n        });\n        return setCells(row, elements);\n      }));\n    };\n    var colFill = function (grid, amount, generators, startIndex) {\n      return map$1(grid, function (row) {\n        var newChildren = generateElements(amount, row, generators, never);\n        return addCells(row, startIndex, newChildren);\n      });\n    };\n    var lockedColFill = function (grid, generators, lockedColumns) {\n      return map$1(grid, function (row) {\n        return foldl(lockedColumns, function (acc, colNum) {\n          var newChild = generateElements(1, row, generators, always)[0];\n          return addCell(acc, colNum, newChild);\n        }, row);\n      });\n    };\n    var tailor = function (gridA, delta, generators) {\n      var fillCols = delta.colDelta < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta < 0 ? rowFill : identity;\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var gridWidth = cellLength(gridA[0]);\n      var isLastColLocked = exists(lockedColumns, function (locked) {\n        return locked === gridWidth - 1;\n      });\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta), generators, isLastColLocked ? gridWidth - 1 : gridWidth);\n      var newLockedColumns = getLockedColumnsFromGrid(modifiedCols);\n      return fillRows(modifiedCols, Math.abs(delta.rowDelta), generators, mapToObject(newLockedColumns, always));\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element);\n      var currentRow = grid[row];\n      return grid.length > 1 && cellLength(currentRow) > 1 && (col > 0 && matching(getCellElement(currentRow, col - 1)) || col < currentRow.cells.length - 1 && matching(getCellElement(currentRow, col + 1)) || row > 0 && matching(getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator, lockedColumns) {\n      var startRow = startAddress.row;\n      var startCol = startAddress.column;\n      var mergeHeight = gridB.length;\n      var mergeWidth = cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth + lockedColumns.length;\n      var lockedColumnObj = mapToObject(lockedColumns, always);\n      for (var r = startRow; r < endRow; r++) {\n        var skippedCol = 0;\n        for (var c = startCol; c < endCol; c++) {\n          if (lockedColumnObj[c]) {\n            skippedCol++;\n            continue;\n          }\n          if (isSpanning(gridA, r, c, comparator)) {\n            unmerge(gridA, getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var gridBColIndex = c - startCol - skippedCol;\n          var newCell = getCell(gridB[r - startRow], gridBColIndex);\n          var newCellElm = newCell.element;\n          var replacement = generator.replace(newCellElm);\n          mutateCell(gridA[r], c, elementnew(replacement, true, newCell.isLocked));\n        }\n      }\n      return gridA;\n    };\n    var getValidStartAddress = function (currentStartAddress, grid, lockedColumns) {\n      var gridColLength = cellLength(grid[0]);\n      var adjustedRowAddress = extractGridDetails(grid).cols.length + currentStartAddress.row;\n      var possibleColAddresses = range$1(gridColLength - currentStartAddress.column, function (num) {\n        return num + currentStartAddress.column;\n      });\n      var validColAddress = find$1(possibleColAddresses, function (num) {\n        return forall(lockedColumns, function (col) {\n          return col !== num;\n        });\n      }).getOr(gridColLength - 1);\n      return {\n        row: adjustedRowAddress,\n        column: validColAddress\n      };\n    };\n    var getLockedColumnsWithinBounds = function (startAddress, grid, lockedColumns) {\n      return filter$2(lockedColumns, function (colNum) {\n        return colNum >= startAddress.column && colNum <= cellLength(grid[0]) + startAddress.column;\n      });\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var lockedColumns = getLockedColumnsFromGrid(gridA);\n      var validStartAddress = getValidStartAddress(startAddress, gridA, lockedColumns);\n      var gridBRows = extractGridDetails(gridB).rows;\n      var lockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridBRows, lockedColumns);\n      var result = measure(validStartAddress, gridA, gridBRows);\n      return result.map(function (diff) {\n        var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - lockedColumnsWithinBounds.length });\n        var fittedGrid = tailor(gridA, delta, generator);\n        var newLockedColumns = getLockedColumnsFromGrid(fittedGrid);\n        var newLockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridBRows, newLockedColumns);\n        return mergeTables(validStartAddress, fittedGrid, gridBRows, generator, comparator, newLockedColumnsWithinBounds);\n      });\n    };\n    var insertCols = function (index, gridA, gridB, generator, comparator) {\n      splitCols(gridA, index, comparator, generator.cell);\n      var delta = measureHeight(gridB, gridA);\n      var fittedNewGrid = tailor(gridB, delta, generator);\n      var secondDelta = measureHeight(gridA, fittedNewGrid);\n      var fittedOldGrid = tailor(gridA, secondDelta, generator);\n      return map$1(fittedOldGrid, function (gridRow, i) {\n        return addCells(gridRow, index, fittedNewGrid[i].cells);\n      });\n    };\n    var insertRows = function (index, gridA, gridB, generator, comparator) {\n      splitRows(gridA, index, comparator, generator.cell);\n      var locked = getLockedColumnsFromGrid(gridA);\n      var diff = measureWidth(gridA, gridB);\n      var delta = __assign(__assign({}, diff), { colDelta: diff.colDelta - locked.length });\n      var fittedOldGrid = tailor(gridA, delta, generator);\n      var _a = extractGridDetails(fittedOldGrid), oldCols = _a.cols, oldRows = _a.rows;\n      var newLocked = getLockedColumnsFromGrid(fittedOldGrid);\n      var secondDiff = measureWidth(gridB, gridA);\n      var secondDelta = __assign(__assign({}, secondDiff), { colDelta: secondDiff.colDelta + newLocked.length });\n      var fittedGridB = lockedColFill(gridB, generator, newLocked);\n      var fittedNewGrid = tailor(fittedGridB, secondDelta, generator);\n      return oldCols.concat(oldRows.slice(0, index)).concat(fittedNewGrid).concat(oldRows.slice(index, oldRows.length));\n    };\n\n    var cloneRow = function (row, cloneCell, comparator, substitution) {\n      return clone$1(row, function (elem) {\n        return substitution(elem, comparator);\n      }, cloneCell);\n    };\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      var before = rows.slice(0, index);\n      var after = rows.slice(index);\n      var newRow = cloneRow(rows[example], function (ex, c) {\n        var withinSpan = index > 0 && index < rows.length && comparator(getCellElement(rows[index - 1], c), getCellElement(rows[index], c));\n        var ret = withinSpan ? getCell(rows[index], c) : elementnew(substitution(ex.element, comparator), true, ex.isLocked);\n        return ret;\n      }, comparator, substitution);\n      return cols.concat(before).concat([newRow]).concat(after);\n    };\n    var getElementFor = function (row, column, section, withinSpan, example, comparator, substitution) {\n      if (section === 'colgroup' || !withinSpan) {\n        var cell = getCell(row, example);\n        return elementnew(substitution(cell.element, comparator), true, false);\n      } else {\n        return getCell(row, column);\n      }\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map$1(grid, function (row) {\n        var withinSpan = index > 0 && index < cellLength(row) && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n        var sub = getElementFor(row, index, row.section, withinSpan, example, comparator, substitution);\n        return addCell(row, index, sub);\n      });\n    };\n    var deleteColumnsAt = function (grid, columns) {\n      return bind$2(grid, function (row) {\n        var existingCells = row.cells;\n        var cells = foldr(columns, function (acc, column) {\n          return column >= 0 && column < acc.length ? acc.slice(0, column).concat(acc.slice(column + 1)) : acc;\n        }, existingCells);\n        return cells.length > 0 ? [rowcells(row.element, cells, row.section, row.isNew)] : [];\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      var _a = extractGridDetails(grid), rows = _a.rows, cols = _a.cols;\n      return cols.concat(rows.slice(0, start)).concat(rows.slice(finish + 1));\n    };\n\n    var notInStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(getCellElement(grid[rowIndex - 1], colIndex), getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notInStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(getCellElement(row, index - 1), getCellElement(row, index));\n    };\n    var isDuplicatedCell = function (grid, rowIndex, colIndex, comparator) {\n      return notInStartRow(grid, rowIndex, colIndex, comparator) || notInStartColumn(grid[rowIndex], colIndex, comparator);\n    };\n    var rowReplacerPredicate = function (targetRow, columnHeaders) {\n      var entireTableIsHeader = forall(columnHeaders, identity) && isHeaderCells(targetRow.cells);\n      return entireTableIsHeader ? always : function (cell, _rowIndex, colIndex) {\n        var type = name(cell.element);\n        return !(type === 'th' && columnHeaders[colIndex]);\n      };\n    };\n    var columnReplacePredicate = function (targetColumn, rowHeaders) {\n      var entireTableIsHeader = forall(rowHeaders, identity) && isHeaderCells(targetColumn);\n      return entireTableIsHeader ? always : function (cell, rowIndex, _colIndex) {\n        var type = name(cell.element);\n        return !(type === 'th' && rowHeaders[rowIndex]);\n      };\n    };\n    var determineScope = function (applyScope, element, newScope, isInHeader) {\n      var hasSpan = function (scope) {\n        return scope === 'row' ? hasRowspan(element) : hasColspan(element);\n      };\n      var getScope = function (scope) {\n        return hasSpan(scope) ? scope + 'group' : scope;\n      };\n      if (applyScope) {\n        return isHeaderCell(element) ? getScope(newScope) : null;\n      } else if (isInHeader && isHeaderCell(element)) {\n        var oppositeScope = newScope === 'row' ? 'col' : 'row';\n        return getScope(oppositeScope);\n      } else {\n        return null;\n      }\n    };\n    var rowScopeGenerator = function (applyScope, columnHeaders) {\n      return function (cell, rowIndex, columnIndex) {\n        return Optional.some(determineScope(applyScope, cell.element, 'col', columnHeaders[columnIndex]));\n      };\n    };\n    var columnScopeGenerator = function (applyScope, rowHeaders) {\n      return function (cell, rowIndex) {\n        return Optional.some(determineScope(applyScope, cell.element, 'row', rowHeaders[rowIndex]));\n      };\n    };\n    var replace = function (cell, comparator, substitute) {\n      return elementnew(substitute(cell.element, comparator), true, cell.isLocked);\n    };\n    var replaceIn = function (grid, targets, comparator, substitute, replacer, genScope, shouldReplace) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element, target.element);\n        });\n      };\n      return map$1(grid, function (row, rowIndex) {\n        return mapCells(row, function (cell, colIndex) {\n          if (isTarget(cell)) {\n            var newCell_1 = shouldReplace(cell, rowIndex, colIndex) ? replacer(cell, comparator, substitute) : cell;\n            genScope(newCell_1, rowIndex, colIndex).each(function (scope) {\n              setOptions(newCell_1.element, { scope: Optional.from(scope) });\n            });\n            return newCell_1;\n          } else {\n            return cell;\n          }\n        });\n      });\n    };\n    var getColumnCells = function (rows, columnIndex, comparator) {\n      return bind$2(rows, function (row, i) {\n        return isDuplicatedCell(rows, i, columnIndex, comparator) ? [] : [getCell(row, columnIndex)];\n      });\n    };\n    var getRowCells = function (rows, rowIndex, comparator) {\n      var targetRow = rows[rowIndex];\n      return bind$2(targetRow.cells, function (item, i) {\n        return isDuplicatedCell(rows, rowIndex, i, comparator) ? [] : [item];\n      });\n    };\n    var replaceColumns = function (grid, indexes, applyScope, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targets = bind$2(indexes, function (index) {\n        return getColumnCells(rows, index, comparator);\n      });\n      var rowHeaders = map$1(grid, function (row) {\n        return isHeaderCells(row.cells);\n      });\n      var shouldReplaceCell = columnReplacePredicate(targets, rowHeaders);\n      var scopeGenerator = columnScopeGenerator(applyScope, rowHeaders);\n      return replaceIn(grid, targets, comparator, substitution, replace, scopeGenerator, shouldReplaceCell);\n    };\n    var replaceRows = function (grid, indexes, section, applyScope, comparator, substitution, tableSection) {\n      var _a = extractGridDetails(grid), cols = _a.cols, rows = _a.rows;\n      var targetRow = rows[indexes[0]];\n      var targets = bind$2(indexes, function (index) {\n        return getRowCells(rows, index, comparator);\n      });\n      var columnHeaders = map$1(targetRow.cells, function (_cell, index) {\n        return isHeaderCells(getColumnCells(rows, index, comparator));\n      });\n      var newRows = __spreadArray([], rows, true);\n      each$2(indexes, function (index) {\n        newRows[index] = tableSection.transformRow(rows[index], section);\n      });\n      var newGrid = cols.concat(newRows);\n      var shouldReplaceCell = rowReplacerPredicate(targetRow, columnHeaders);\n      var scopeGenerator = rowScopeGenerator(applyScope, columnHeaders);\n      return replaceIn(newGrid, targets, comparator, substitution, tableSection.transformCell, scopeGenerator, shouldReplaceCell);\n    };\n    var replaceCells = function (grid, details, comparator, substitution) {\n      var rows = extractGridDetails(grid).rows;\n      var targetCells = map$1(details, function (detail) {\n        return getCell(rows[detail.row], detail.column);\n      });\n      return replaceIn(grid, targetCells, comparator, substitution, replace, Optional.none, always);\n    };\n\n    var uniqueColumns = function (details) {\n      var uniqueCheck = function (rest, detail) {\n        var columnExists = exists(rest, function (currentDetail) {\n          return currentDetail.column === detail.column;\n        });\n        return columnExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, uniqueCheck, []).sort(function (detailA, detailB) {\n        return detailA.column - detailB.column;\n      });\n    };\n\n    var isCol = isTag('col');\n    var isColgroup = isTag('colgroup');\n    var isRow$1 = function (element) {\n      return name(element) === 'tr' || isColgroup(element);\n    };\n    var elementToData = function (element) {\n      var colspan = getAttrValue(element, 'colspan', 1);\n      var rowspan = getAttrValue(element, 'rowspan', 1);\n      return {\n        element: element,\n        colspan: colspan,\n        rowspan: rowspan\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      var nuCell = function (data) {\n        return isCol(data.element) ? generators.col(data) : generators.cell(data);\n      };\n      var nuRow = function (data) {\n        return isColgroup(data.element) ? generators.colgroup(data) : generators.row(data);\n      };\n      var add = function (element) {\n        if (isRow$1(element)) {\n          return nuRow({ element: element });\n        } else {\n          var replacement = nuCell(toData(element));\n          recent = Optional.some({\n            item: element,\n            replacement: replacement\n          });\n          return replacement;\n        }\n      };\n      var recent = Optional.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return { getOrInit: getOrInit };\n    };\n    var transform = function (tag) {\n      return function (generators) {\n        var list = [];\n        var find = function (element, comparator) {\n          return find$1(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = tag === 'td' ? { scope: null } : {};\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          if (isRow$1(element) || isCol(element)) {\n            return element;\n          } else {\n            return find(element, comparator).fold(function () {\n              return makeNew(element);\n            }, function (p) {\n              return comparator(element, p.item) ? p.sub : makeNew(element);\n            });\n          }\n        };\n        return { replaceOrInit: replaceOrInit };\n      };\n    };\n    var getScopeAttribute = function (cell) {\n      return getOpt(cell, 'scope').map(function (attribute) {\n        return attribute.substr(0, 3);\n      });\n    };\n    var merging = function (generators) {\n      var unmerge = function (cell) {\n        var scope = getScopeAttribute(cell);\n        scope.each(function (attribute) {\n          return set$2(cell, 'scope', attribute);\n        });\n        return function () {\n          var raw = generators.cell({\n            element: cell,\n            colspan: 1,\n            rowspan: 1\n          });\n          remove$6(raw, 'width');\n          remove$6(cell, 'width');\n          scope.each(function (attribute) {\n            return set$2(raw, 'scope', attribute);\n          });\n          return raw;\n        };\n      };\n      var merge = function (cells) {\n        var getScopeProperty = function () {\n          var stringAttributes = cat(map$1(cells, getScopeAttribute));\n          if (stringAttributes.length === 0) {\n            return Optional.none();\n          } else {\n            var baseScope_1 = stringAttributes[0];\n            var scopes_1 = [\n              'row',\n              'col'\n            ];\n            var isMixed = exists(stringAttributes, function (attribute) {\n              return attribute !== baseScope_1 && contains$2(scopes_1, attribute);\n            });\n            return isMixed ? Optional.none() : Optional.from(baseScope_1);\n          }\n        };\n        remove$6(cells[0], 'width');\n        getScopeProperty().fold(function () {\n          return remove$7(cells[0], 'scope');\n        }, function (attribute) {\n          return set$2(cells[0], 'scope', attribute + 'group');\n        });\n        return constant(cells[0]);\n      };\n      return {\n        unmerge: unmerge,\n        merge: merge\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList$1 = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains$2([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock$1 = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains$2(blockList, tagName);\n    };\n    var isEmptyTag$1 = function (universe, item) {\n      return contains$2([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n\n    var universe$1 = DomUniverse();\n    var isBlock = function (element) {\n      return isBlock$1(universe$1, element);\n    };\n    var isList = function (element) {\n      return isList$1(universe$1, element);\n    };\n    var isEmptyTag = function (element) {\n      return isEmptyTag$1(universe$1, element);\n    };\n\n    var merge = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$9(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor$2(el, isList).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (isBlock(rightSibling)) {\n            return true;\n          }\n          if (isEmptyTag(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || isBlock(parent) && !eq$1(cell, parent) ? [] : [SugarElement.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind$2(cells, function (cell) {\n          var children = children$3(cell);\n          return advancedBr(children) ? [] : children.concat(markCell(cell));\n        });\n        return content.length === 0 ? [SugarElement.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append(cells[0], contents);\n    };\n\n    var isEditable = function (elem) {\n      return isEditable$1(elem, true);\n    };\n    var prune = function (table) {\n      var cells = cells$1(table);\n      if (cells.length === 0) {\n        remove$5(table);\n      }\n    };\n    var outcome = function (grid, cursor) {\n      return {\n        grid: grid,\n        cursor: cursor\n      };\n    };\n    var findEditableCursorPosition = function (rows) {\n      return findMap(rows, function (row) {\n        return findMap(row.cells, function (cell) {\n          var elem = cell.element;\n          return someIf(isEditable(elem), elem);\n        });\n      });\n    };\n    var elementFromGrid = function (grid, row, column) {\n      var _a, _b;\n      var rows = extractGridDetails(grid).rows;\n      return Optional.from((_b = (_a = rows[row]) === null || _a === void 0 ? void 0 : _a.cells[column]) === null || _b === void 0 ? void 0 : _b.element).filter(isEditable).orThunk(function () {\n        return findEditableCursorPosition(rows);\n      });\n    };\n    var bundle = function (grid, row, column) {\n      var cursorElement = elementFromGrid(grid, row, column);\n      return outcome(grid, cursorElement);\n    };\n    var uniqueRows = function (details) {\n      var rowCompilation = function (rest, detail) {\n        var rowExists = exists(rest, function (currentDetail) {\n          return currentDetail.row === detail.row;\n        });\n        return rowExists ? rest : rest.concat([detail]);\n      };\n      return foldl(details, rowCompilation, []).sort(function (detailA, detailB) {\n        return detailA.row - detailB.row;\n      });\n    };\n    var opInsertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var targetIndex = details[0].row;\n      var rows = uniqueRows(details);\n      var newGrid = foldr(rows, function (acc, row) {\n        var newG = insertRowAt(acc.grid, targetIndex, row.row + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var target = rows[rows.length - 1];\n      var targetIndex = target.row + target.rowspan;\n      var newGrid = foldr(rows, function (newG, row) {\n        return insertRowAt(newG, targetIndex, row.row, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column);\n    };\n    var opInsertColumnsBefore = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var columns = uniqueColumns(details);\n      var targetIndex = columns[0].column;\n      var newGrid = foldr(columns, function (acc, col) {\n        var newG = insertColumnAt(acc.grid, targetIndex, col.column + acc.delta, comparator, genWrappers.getOrInit);\n        return {\n          grid: newG,\n          delta: acc.delta + 1\n        };\n      }, {\n        grid: grid,\n        delta: 0\n      }).grid;\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opInsertColumnsAfter = function (grid, extractDetail, comparator, genWrappers) {\n      var details = extractDetail.details;\n      var target = details[details.length - 1];\n      var targetIndex = target.column + target.colspan;\n      var columns = uniqueColumns(details);\n      var newGrid = foldr(columns, function (newG, col) {\n        return insertColumnAt(newG, targetIndex, col.column, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row, targetIndex);\n    };\n    var opMakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var columnIndexes = map$1(columns, function (detail) {\n        return detail.column;\n      });\n      var newGrid = replaceColumns(initialGrid, columnIndexes, true, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opMakeCellsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var newGrid = replaceCells(initialGrid, details, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeColumnsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var columnIndexes = map$1(columns, function (detail) {\n        return detail.column;\n      });\n      var newGrid = replaceColumns(initialGrid, columnIndexes, false, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var opUnmakeCellsHeader = function (initialGrid, details, comparator, genWrappers) {\n      var newGrid = replaceCells(initialGrid, details, comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, details[0].row, details[0].column);\n    };\n    var makeRowsSection = function (section, applyScope) {\n      return function (initialGrid, details, comparator, genWrappers, tableSection) {\n        var rows = uniqueRows(details);\n        var rowIndexes = map$1(rows, function (detail) {\n          return detail.row;\n        });\n        var newGrid = replaceRows(initialGrid, rowIndexes, section, applyScope, comparator, genWrappers.replaceOrInit, tableSection);\n        return bundle(newGrid, details[0].row, details[0].column);\n      };\n    };\n    var opMakeRowsHeader = makeRowsSection('thead', true);\n    var opMakeRowsBody = makeRowsSection('tbody', false);\n    var opMakeRowsFooter = makeRowsSection('tfoot', false);\n    var opEraseColumns = function (grid, extractDetail, _comparator, _genWrappers) {\n      var columns = uniqueColumns(extractDetail.details);\n      var newGrid = deleteColumnsAt(grid, map$1(columns, function (column) {\n        return column.column;\n      }));\n      var maxColIndex = newGrid.length > 0 ? newGrid[0].cells.length - 1 : 0;\n      return bundle(newGrid, columns[0].row, Math.min(columns[0].column, maxColIndex));\n    };\n    var opEraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = deleteRowsAt(grid, rows[0].row, rows[rows.length - 1].row);\n      var maxRowIndex = newGrid.length > 0 ? newGrid.length - 1 : 0;\n      return bundle(newGrid, Math.min(details[0].row, maxRowIndex), details[0].column);\n    };\n    var opMergeCells = function (grid, mergable, comparator, genWrappers) {\n      var cells = mergable.cells;\n      merge(cells);\n      var newGrid = merge$2(grid, mergable.bounds, comparator, genWrappers.merge(cells));\n      return outcome(newGrid, Optional.from(cells[0]));\n    };\n    var opUnmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var unmerge$1 = function (b, cell) {\n        return unmerge(b, cell, comparator, genWrappers.unmerge(cell));\n      };\n      var newGrid = foldr(unmergable, unmerge$1, grid);\n      return outcome(newGrid, Optional.from(unmergable[0]));\n    };\n    var opPasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var wh = Warehouse.fromTable(table);\n        return toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard, pasteDetails.generators);\n      var startAddress = address(pasteDetails.row, pasteDetails.column);\n      var mergedGrid = merge$1(startAddress, grid, gridB, pasteDetails.generators, comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Optional.some(pasteDetails.element));\n      }, function (newGrid) {\n        return bundle(newGrid, pasteDetails.row, pasteDetails.column);\n      });\n    };\n    var gridifyRows = function (rows, generators, context) {\n      var pasteDetails = fromPastedRows(rows, context.section);\n      var wh = Warehouse.generate(pasteDetails);\n      return toGrid(wh, generators, true);\n    };\n    var opPasteColsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].column;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n    };\n    var opPasteColsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].column + pasteDetails.cells[pasteDetails.cells.length - 1].colspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertCols(index, grid, gridB, pasteDetails.generators, comparator);\n      return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n    };\n    var opPasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[0].row;\n      var context = rows[index];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n    };\n    var opPasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var rows = extractGridDetails(grid).rows;\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan;\n      var context = rows[pasteDetails.cells[0].row];\n      var gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);\n      var mergedGrid = insertRows(index, grid, gridB, pasteDetails.generators, comparator);\n      return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);\n    };\n    var opGetColumnsType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var selectedColumnCells = flatten$1(map$1(house.all, function (row) {\n          return filter$2(row.cells, function (cell) {\n            return cell.column >= minColRange && cell.column < maxColRange;\n          });\n        }));\n        return findCommonCellType(selectedColumnCells);\n      }).getOr('');\n    };\n    var opGetCellsType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(findCommonCellType).getOr('');\n    };\n    var opGetRowsType = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onCells(house, target);\n      return details.bind(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minRowRange = selectedCells[0].row;\n        var maxRowRange = lastSelectedCell.row + lastSelectedCell.rowspan;\n        var selectedRows = house.all.slice(minRowRange, maxRowRange);\n        return findCommonRowType(selectedRows);\n      }).getOr('');\n    };\n    var resize = function (table, list, details, behaviours) {\n      return adjustWidthTo(table, list, details, behaviours.sizing);\n    };\n    var adjustAndRedistributeWidths = function (table, list, details, behaviours) {\n      return adjustAndRedistributeWidths$1(table, list, details, behaviours.sizing, behaviours.resize);\n    };\n    var firstColumnIsLocked = function (_warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column === 0 && detail.isLocked;\n      });\n    };\n    var lastColumnIsLocked = function (warehouse, details) {\n      return exists(details, function (detail) {\n        return detail.column + detail.colspan >= warehouse.grid.columns && detail.isLocked;\n      });\n    };\n    var getColumnsWidth = function (warehouse, details) {\n      var columns$1 = columns(warehouse);\n      var uniqueCols = uniqueColumns(details);\n      return foldl(uniqueCols, function (acc, detail) {\n        var column = columns$1[detail.column];\n        var colWidth = column.map(getOuter$2).getOr(0);\n        return acc + colWidth;\n      }, 0);\n    };\n    var insertColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onCells(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details);\n        }).map(function (details) {\n          return {\n            details: details,\n            pixelDelta: getColumnsWidth(warehouse, details)\n          };\n        });\n      };\n    };\n    var eraseColumnsExtractor = function (warehouse, target) {\n      return onUnlockedCells(warehouse, target).map(function (details) {\n        return {\n          details: details,\n          pixelDelta: -getColumnsWidth(warehouse, details)\n        };\n      });\n    };\n    var pasteColumnsExtractor = function (before) {\n      return function (warehouse, target) {\n        return onPasteByEditor(warehouse, target).filter(function (details) {\n          var checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;\n          return !checkLocked(warehouse, details.cells);\n        });\n      };\n    };\n    var headerCellGenerator = Generators.transform('th');\n    var bodyCellGenerator = Generators.transform('td');\n    var insertRowsBefore = run(opInsertRowsBefore, onCells, noop, noop, Generators.modification);\n    var insertRowsAfter = run(opInsertRowsAfter, onCells, noop, noop, Generators.modification);\n    var insertColumnsBefore = run(opInsertColumnsBefore, insertColumnsExtractor(true), adjustAndRedistributeWidths, noop, Generators.modification);\n    var insertColumnsAfter = run(opInsertColumnsAfter, insertColumnsExtractor(false), adjustAndRedistributeWidths, noop, Generators.modification);\n    var eraseColumns = run(opEraseColumns, eraseColumnsExtractor, adjustAndRedistributeWidths, prune, Generators.modification);\n    var eraseRows = run(opEraseRows, onCells, noop, prune, Generators.modification);\n    var makeColumnsHeader = run(opMakeColumnsHeader, onUnlockedCells, noop, noop, headerCellGenerator);\n    var unmakeColumnsHeader = run(opUnmakeColumnsHeader, onUnlockedCells, noop, noop, bodyCellGenerator);\n    var makeRowsHeader = run(opMakeRowsHeader, onUnlockedCells, noop, noop, headerCellGenerator);\n    var makeRowsBody = run(opMakeRowsBody, onUnlockedCells, noop, noop, bodyCellGenerator);\n    var makeRowsFooter = run(opMakeRowsFooter, onUnlockedCells, noop, noop, bodyCellGenerator);\n    var makeCellsHeader = run(opMakeCellsHeader, onUnlockedCells, noop, noop, headerCellGenerator);\n    var unmakeCellsHeader = run(opUnmakeCellsHeader, onUnlockedCells, noop, noop, bodyCellGenerator);\n    var mergeCells = run(opMergeCells, onUnlockedMergable, resize, noop, Generators.merging);\n    var unmergeCells = run(opUnmergeCells, onUnlockedUnmergable, resize, noop, Generators.merging);\n    var pasteCells = run(opPasteCells, onPaste, resize, noop, Generators.modification);\n    var pasteColsBefore = run(opPasteColsBefore, pasteColumnsExtractor(true), noop, noop, Generators.modification);\n    var pasteColsAfter = run(opPasteColsAfter, pasteColumnsExtractor(false), noop, noop, Generators.modification);\n    var pasteRowsBefore = run(opPasteRowsBefore, onPasteByEditor, noop, noop, Generators.modification);\n    var pasteRowsAfter = run(opPasteRowsAfter, onPasteByEditor, noop, noop, Generators.modification);\n    var getColumnsType = opGetColumnsType;\n    var getCellsType = opGetCellsType;\n    var getRowsType = opGetRowsType;\n\n    var TableActions = function (editor, cellSelection, lazyWire) {\n      var isTableBody = function (editor) {\n        return name(getBody(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).rows > 1;\n      };\n      var lastColumnGuard = function (table) {\n        return isTableBody(editor) === false || getGridSize(table).columns > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var colMutationOp = isResizeTableColumnResizing(editor) ? noop : halve;\n      var getTableSectionType = function (table) {\n        switch (getTableHeaderType(editor)) {\n        case 'section':\n          return TableSection.section();\n        case 'sectionCells':\n          return TableSection.sectionCells();\n        case 'cells':\n          return TableSection.cells();\n        default:\n          return TableSection.getTableSectionType(table, 'section');\n        }\n      };\n      var setSelectionFromAction = function (table, result) {\n        return result.cursor.fold(function () {\n          var cells = cells$1(table);\n          return head(cells).filter(inBody).map(function (firstCell) {\n            cellSelection.clear(table);\n            var rng = editor.dom.createRng();\n            rng.selectNode(firstCell.dom);\n            editor.selection.setRng(rng);\n            set$2(firstCell, 'data-mce-selected', '1');\n            return rng;\n          });\n        }, function (cell) {\n          var des = freefallRtl(cell);\n          var rng = editor.dom.createRng();\n          rng.setStart(des.element.dom, des.offset);\n          rng.setEnd(des.element.dom, des.offset);\n          editor.selection.setRng(rng);\n          cellSelection.clear(table);\n          return Optional.some(rng);\n        });\n      };\n      var execute = function (operation, guard, mutate, lazyWire, effect) {\n        return function (table, target, noEvents) {\n          if (noEvents === void 0) {\n            noEvents = false;\n          }\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = SugarElement.fromDom(editor.getDoc());\n          var generators = cellOperations(mutate, doc, cloneFormats);\n          var behaviours = {\n            sizing: get$4(editor, table),\n            resize: isResizeTableColumnResizing(editor) ? resizeTable() : preserveTable(),\n            section: getTableSectionType(table)\n          };\n          return guard(table) ? operation(wire, table, target, generators, behaviours).bind(function (result) {\n            each$2(result.newRows, function (row) {\n              fireNewRow(editor, row.dom);\n            });\n            each$2(result.newCells, function (cell) {\n              fireNewCell(editor, cell.dom);\n            });\n            var range = setSelectionFromAction(table, result);\n            if (inBody(table)) {\n              removeDataStyle(table);\n              if (!noEvents) {\n                fireTableModified(editor, table.dom, effect);\n              }\n            }\n            return range.map(function (rng) {\n              return {\n                rng: rng,\n                effect: effect\n              };\n            });\n          }) : Optional.none();\n        };\n      };\n      var deleteRow = execute(eraseRows, lastRowGuard, noop, lazyWire, structureModified);\n      var deleteColumn = execute(eraseColumns, lastColumnGuard, noop, lazyWire, structureModified);\n      var insertRowsBefore$1 = execute(insertRowsBefore, always, noop, lazyWire, structureModified);\n      var insertRowsAfter$1 = execute(insertRowsAfter, always, noop, lazyWire, structureModified);\n      var insertColumnsBefore$1 = execute(insertColumnsBefore, always, colMutationOp, lazyWire, structureModified);\n      var insertColumnsAfter$1 = execute(insertColumnsAfter, always, colMutationOp, lazyWire, structureModified);\n      var mergeCells$1 = execute(mergeCells, always, noop, lazyWire, structureModified);\n      var unmergeCells$1 = execute(unmergeCells, always, noop, lazyWire, structureModified);\n      var pasteColsBefore$1 = execute(pasteColsBefore, always, noop, lazyWire, structureModified);\n      var pasteColsAfter$1 = execute(pasteColsAfter, always, noop, lazyWire, structureModified);\n      var pasteRowsBefore$1 = execute(pasteRowsBefore, always, noop, lazyWire, structureModified);\n      var pasteRowsAfter$1 = execute(pasteRowsAfter, always, noop, lazyWire, structureModified);\n      var pasteCells$1 = execute(pasteCells, always, noop, lazyWire, styleAndStructureModified);\n      var makeCellsHeader$1 = execute(makeCellsHeader, always, noop, lazyWire, structureModified);\n      var unmakeCellsHeader$1 = execute(unmakeCellsHeader, always, noop, lazyWire, structureModified);\n      var makeColumnsHeader$1 = execute(makeColumnsHeader, always, noop, lazyWire, structureModified);\n      var unmakeColumnsHeader$1 = execute(unmakeColumnsHeader, always, noop, lazyWire, structureModified);\n      var makeRowsHeader$1 = execute(makeRowsHeader, always, noop, lazyWire, structureModified);\n      var makeRowsBody$1 = execute(makeRowsBody, always, noop, lazyWire, structureModified);\n      var makeRowsFooter$1 = execute(makeRowsFooter, always, noop, lazyWire, structureModified);\n      var getTableCellType = getCellsType;\n      var getTableColType = getColumnsType;\n      var getTableRowType = getRowsType;\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore$1,\n        insertRowsAfter: insertRowsAfter$1,\n        insertColumnsBefore: insertColumnsBefore$1,\n        insertColumnsAfter: insertColumnsAfter$1,\n        mergeCells: mergeCells$1,\n        unmergeCells: unmergeCells$1,\n        pasteColsBefore: pasteColsBefore$1,\n        pasteColsAfter: pasteColsAfter$1,\n        pasteRowsBefore: pasteRowsBefore$1,\n        pasteRowsAfter: pasteRowsAfter$1,\n        pasteCells: pasteCells$1,\n        makeCellsHeader: makeCellsHeader$1,\n        unmakeCellsHeader: unmakeCellsHeader$1,\n        makeColumnsHeader: makeColumnsHeader$1,\n        unmakeColumnsHeader: unmakeColumnsHeader$1,\n        makeRowsHeader: makeRowsHeader$1,\n        makeRowsBody: makeRowsBody$1,\n        makeRowsFooter: makeRowsFooter$1,\n        getTableRowType: getTableRowType,\n        getTableCellType: getTableCellType,\n        getTableColType: getTableColType\n      };\n    };\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      colGroups: false\n    };\n    var tableHeaderCell = function () {\n      return SugarElement.fromTag('th');\n    };\n    var tableCell = function () {\n      return SugarElement.fromTag('td');\n    };\n    var tableColumn = function () {\n      return SugarElement.fromTag('col');\n    };\n    var createRow = function (columns, rowHeaders, columnHeaders, rowIndex) {\n      var tr = SugarElement.fromTag('tr');\n      for (var j = 0; j < columns; j++) {\n        var td = rowIndex < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n        if (j < columnHeaders) {\n          set$2(td, 'scope', 'row');\n        }\n        if (rowIndex < rowHeaders) {\n          set$2(td, 'scope', 'col');\n        }\n        append$1(td, SugarElement.fromTag('br'));\n        append$1(tr, td);\n      }\n      return tr;\n    };\n    var createGroupRow = function (columns) {\n      var columnGroup = SugarElement.fromTag('colgroup');\n      range$1(columns, function () {\n        return append$1(columnGroup, tableColumn());\n      });\n      return columnGroup;\n    };\n    var createRows = function (rows, columns, rowHeaders, columnHeaders) {\n      return range$1(rows, function (r) {\n        return createRow(columns, rowHeaders, columnHeaders, r);\n      });\n    };\n    var render = function (rows, columns, rowHeaders, columnHeaders, headerType, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = SugarElement.fromTag('table');\n      var rowHeadersGoInThead = headerType !== 'cells';\n      setAll(table, renderOpts.styles);\n      setAll$1(table, renderOpts.attributes);\n      if (renderOpts.colGroups) {\n        append$1(table, createGroupRow(columns));\n      }\n      var actualRowHeaders = Math.min(rows, rowHeaders);\n      if (rowHeadersGoInThead && rowHeaders > 0) {\n        var thead = SugarElement.fromTag('thead');\n        append$1(table, thead);\n        var theadRowHeaders = headerType === 'sectionCells' ? actualRowHeaders : 0;\n        var theadRows = createRows(rowHeaders, columns, theadRowHeaders, columnHeaders);\n        append(thead, theadRows);\n      }\n      var tbody = SugarElement.fromTag('tbody');\n      append$1(table, tbody);\n      var numRows = rowHeadersGoInThead ? rows - actualRowHeaders : rows;\n      var numRowHeaders = rowHeadersGoInThead ? 0 : rowHeaders;\n      var tbodyRows = createRows(numRows, columns, numRowHeaders, columnHeaders);\n      append(tbody, tbodyRows);\n      return table;\n    };\n\n    var get$2 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$1(container, clone);\n      return get$2(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom, true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each$2(descendants(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom);\n        each$2(descendants(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom);\n        });\n      });\n    };\n    var isPercentage = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert = function (editor, columns, rows, colHeaders, rowHeaders) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        colGroups: useColumnGroup(editor)\n      };\n      editor.undoManager.ignore(function () {\n        var table = render(rows, columns, rowHeaders, colHeaders, getTableHeaderType(editor), options);\n        set$2(table, 'data-mce-id', '__mce');\n        var html = getOuter(table);\n        editor.insertContent(html);\n        editor.addVisual();\n      });\n      return descendant(getBody(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          enforcePixels(table);\n        } else if (isResponsiveForced(editor)) {\n          enforceNone(table);\n        } else if (isPercentagesForced(editor) || isPercentage(defaultStyles.width)) {\n          enforcePercentage(table);\n        }\n        removeDataStyle(table);\n        remove$7(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom;\n      }).getOr(null);\n    };\n    var insertTableWithDataValidation = function (editor, rows, columns, options, errorMsg) {\n      if (options === void 0) {\n        options = {};\n      }\n      var checkInput = function (val) {\n        return isNumber(val) && val > 0;\n      };\n      if (checkInput(rows) && checkInput(columns)) {\n        var headerRows = options.headerRows || 0;\n        var headerColumns = options.headerColumns || 0;\n        return insert(editor, columns, rows, headerColumns, headerRows);\n      } else {\n        console.error(errorMsg);\n        return null;\n      }\n    };\n\n    var getClipboardElements = function (getClipboard) {\n      return function () {\n        return getClipboard().fold(function () {\n          return [];\n        }, function (elems) {\n          return map$1(elems, function (e) {\n            return e.dom;\n          });\n        });\n      };\n    };\n    var setClipboardElements = function (setClipboard) {\n      return function (elems) {\n        var elmsOpt = elems.length > 0 ? Optional.some(fromDom(elems)) : Optional.none();\n        setClipboard(elmsOpt);\n      };\n    };\n    var insertTable = function (editor) {\n      return function (columns, rows, options) {\n        if (options === void 0) {\n          options = {};\n        }\n        var table = insertTableWithDataValidation(editor, rows, columns, options, 'Invalid values for insertTable - rows and columns values are required to insert a table.');\n        editor.undoManager.add();\n        return table;\n      };\n    };\n    var getApi = function (editor, clipboard, resizeHandler, selectionTargets) {\n      return {\n        insertTable: insertTable(editor),\n        setClipboardRows: setClipboardElements(clipboard.setRows),\n        getClipboardRows: getClipboardElements(clipboard.getRows),\n        setClipboardCols: setClipboardElements(clipboard.setColumns),\n        getClipboardCols: getClipboardElements(clipboard.getColumns),\n        resizeHandler: resizeHandler,\n        selectionTargets: selectionTargets\n      };\n    };\n\n    var constrainSpan = function (element, property, value) {\n      var currentColspan = getAttrValue(element, property, 1);\n      if (value === 1 || currentColspan <= 1) {\n        remove$7(element, property);\n      } else {\n        set$2(element, property, Math.min(value, currentColspan));\n      }\n    };\n    var generateColGroup = function (house, minColRange, maxColRange) {\n      if (Warehouse.hasColumns(house)) {\n        var colsToCopy = filter$2(Warehouse.justColumns(house), function (col) {\n          return col.column >= minColRange && col.column < maxColRange;\n        });\n        var copiedCols = map$1(colsToCopy, function (c) {\n          var clonedCol = deep(c.element);\n          constrainSpan(clonedCol, 'span', maxColRange - minColRange);\n          return clonedCol;\n        });\n        var fakeColgroup = SugarElement.fromTag('colgroup');\n        append(fakeColgroup, copiedCols);\n        return [fakeColgroup];\n      } else {\n        return [];\n      }\n    };\n    var generateRows = function (house, minColRange, maxColRange) {\n      return map$1(house.all, function (row) {\n        var cellsToCopy = filter$2(row.cells, function (cell) {\n          return cell.column >= minColRange && cell.column < maxColRange;\n        });\n        var copiedCells = map$1(cellsToCopy, function (cell) {\n          var clonedCell = deep(cell.element);\n          constrainSpan(clonedCell, 'colspan', maxColRange - minColRange);\n          return clonedCell;\n        });\n        var fakeTR = SugarElement.fromTag('tr');\n        append(fakeTR, copiedCells);\n        return fakeTR;\n      });\n    };\n    var copyCols = function (table, target) {\n      var house = Warehouse.fromTable(table);\n      var details = onUnlockedCells(house, target);\n      return details.map(function (selectedCells) {\n        var lastSelectedCell = selectedCells[selectedCells.length - 1];\n        var minColRange = selectedCells[0].column;\n        var maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;\n        var fakeColGroups = generateColGroup(house, minColRange, maxColRange);\n        var fakeRows = generateRows(house, minColRange, maxColRange);\n        return __spreadArray(__spreadArray([], fakeColGroups, true), fakeRows, true);\n      });\n    };\n\n    var copyRows = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.bind(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var rows = extractGridDetails(grid).rows;\n        var slicedGrid = rows.slice(selectedCells[0].row, selectedCells[selectedCells.length - 1].row + selectedCells[selectedCells.length - 1].rowspan);\n        var filteredGrid = bind$2(slicedGrid, function (row) {\n          var newCells = filter$2(row.cells, function (cell) {\n            return !cell.isLocked;\n          });\n          return newCells.length > 0 ? [__assign(__assign({}, row), { cells: newCells })] : [];\n        });\n        var slicedDetails = toDetailList(filteredGrid);\n        return someIf(slicedDetails.length > 0, slicedDetails);\n      }).map(function (slicedDetails) {\n        return copy(slicedDetails);\n      });\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      return checkChildren(firstChildStyle, cells);\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$2.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$2.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n\n    var verticalAlignValues = [\n      {\n        text: 'None',\n        value: ''\n      },\n      {\n        text: 'Top',\n        value: 'top'\n      },\n      {\n        text: 'Middle',\n        value: 'middle'\n      },\n      {\n        text: 'Bottom',\n        value: 'bottom'\n      }\n    ];\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var normalizeHex = function (hex) {\n      return removeLeading(hex, '#').toUpperCase();\n    };\n    var fromString$1 = function (hex) {\n      return isHexString(hex) ? Optional.some({ value: normalizeHex(hex) }) : Optional.none();\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n\n    var anyToHex = function (color) {\n      return fromString$1(color).orThunk(function () {\n        return fromString(color).map(fromRgba);\n      }).getOrThunk(function () {\n        var canvas = document.createElement('canvas');\n        canvas.height = 1;\n        canvas.width = 1;\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n        canvasContext.fillStyle = '#FFFFFF';\n        canvasContext.fillStyle = color;\n        canvasContext.fillRect(0, 0, 1, 1);\n        var rgba = canvasContext.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0];\n        var g = rgba[1];\n        var b = rgba[2];\n        var a = rgba[3];\n        return fromRgba(rgbaColour(r, g, b, a));\n      });\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var unbindable = function () {\n      return singleton(function (s) {\n        return s.unbind();\n      });\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var onSetupToggle = function (editor, selections, formatName, formatValue) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var isNone = isEmpty$1(formatValue);\n        var init = function () {\n          var selectedCells = getCellsFromSelection(selections);\n          var checkNode = function (cell) {\n            return editor.formatter.match(formatName, { value: formatValue }, cell.dom, isNone);\n          };\n          if (isNone) {\n            api.setActive(!exists(selectedCells, checkNode));\n            boundCallback.set(editor.formatter.formatChanged(formatName, function (match) {\n              return api.setActive(!match);\n            }, true));\n          } else {\n            api.setActive(forall(selectedCells, checkNode));\n            boundCallback.set(editor.formatter.formatChanged(formatName, api.setActive, false, { value: formatValue }));\n          }\n        };\n        editor.initialized ? init() : editor.on('init', init);\n        return boundCallback.clear;\n      };\n    };\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'menu');\n    };\n    var buildListItems = function (items) {\n      return map$1(items, function (item) {\n        var text = item.text || item.title;\n        if (isListGroup(item)) {\n          return {\n            text: text,\n            items: buildListItems(item.menu)\n          };\n        } else {\n          return {\n            text: text,\n            value: item.value\n          };\n        }\n      });\n    };\n    var buildMenuItems = function (editor, selections, items, format, onAction) {\n      return map$1(items, function (item) {\n        var text = item.text || item.title;\n        if (isListGroup(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: text,\n            getSubmenuItems: function () {\n              return buildMenuItems(editor, selections, item.menu, format, onAction);\n            }\n          };\n        } else {\n          return {\n            text: text,\n            type: 'togglemenuitem',\n            onAction: function () {\n              return onAction(item.value);\n            },\n            onSetup: onSetupToggle(editor, selections, format, item.value)\n          };\n        }\n      });\n    };\n    var applyTableCellStyle = function (editor, style) {\n      return function (value) {\n        var _a;\n        editor.execCommand('mceTableApplyCellStyle', false, (_a = {}, _a[style] = value, _a));\n      };\n    };\n    var filterNoneItem = function (list) {\n      return bind$2(list, function (item) {\n        if (isListGroup(item)) {\n          return [__assign(__assign({}, item), { menu: filterNoneItem(item.menu) })];\n        } else {\n          return isNotEmpty(item.value) ? [item] : [];\n        }\n      });\n    };\n    var generateMenuItemsCallback = function (editor, selections, items, format, onAction) {\n      return function (callback) {\n        return callback(buildMenuItems(editor, selections, items, format, onAction));\n      };\n    };\n    var buildColorMenu = function (editor, colorList, style) {\n      var colorMap = map$1(colorList, function (entry) {\n        return {\n          text: entry.title,\n          value: '#' + anyToHex(entry.value).value,\n          type: 'choiceitem'\n        };\n      });\n      return [{\n          type: 'fancymenuitem',\n          fancytype: 'colorswatch',\n          initData: {\n            colors: colorMap.length > 0 ? colorMap : undefined,\n            allowCustomColors: false\n          },\n          onAction: function (data) {\n            var _a;\n            var value = data.value === 'remove' ? '' : data.value;\n            editor.execCommand('mceTableApplyCellStyle', false, (_a = {}, _a[style] = value, _a));\n          }\n        }];\n    };\n    var changeRowHeader = function (editor) {\n      return function () {\n        var currentType = editor.queryCommandValue('mceTableRowType');\n        var newType = currentType === 'header' ? 'body' : 'header';\n        editor.execCommand('mceTableRowType', false, { type: newType });\n      };\n    };\n    var changeColumnHeader = function (editor) {\n      return function () {\n        var currentType = editor.queryCommandValue('mceTableColType');\n        var newType = currentType === 'th' ? 'td' : 'th';\n        editor.execCommand('mceTableColType', false, { type: newType });\n      };\n    };\n\n    var getClassList$1 = function (editor) {\n      var classes = buildListItems(getCellClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var children = [\n      {\n        name: 'width',\n        type: 'input',\n        label: 'Width'\n      },\n      {\n        name: 'height',\n        type: 'input',\n        label: 'Height'\n      },\n      {\n        name: 'celltype',\n        type: 'listbox',\n        label: 'Cell type',\n        items: [\n          {\n            text: 'Cell',\n            value: 'td'\n          },\n          {\n            text: 'Header cell',\n            value: 'th'\n          }\n        ]\n      },\n      {\n        name: 'scope',\n        type: 'listbox',\n        label: 'Scope',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Row',\n            value: 'row'\n          },\n          {\n            text: 'Column',\n            value: 'col'\n          },\n          {\n            text: 'Row group',\n            value: 'rowgroup'\n          },\n          {\n            text: 'Column group',\n            value: 'colgroup'\n          }\n        ]\n      },\n      {\n        name: 'halign',\n        type: 'listbox',\n        label: 'Horizontal align',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        name: 'valign',\n        type: 'listbox',\n        label: 'Vertical align',\n        items: verticalAlignValues\n      }\n    ];\n    var getItems$2 = function (editor) {\n      return children.concat(getClassList$1(editor).toArray());\n    };\n\n    var getAdvancedTab = function (editor, dialogName) {\n      var emptyBorderStyle = [{\n          text: 'Select...',\n          value: ''\n        }];\n      var advTabItems = [\n        {\n          name: 'borderstyle',\n          type: 'listbox',\n          label: 'Border style',\n          items: emptyBorderStyle.concat(buildListItems(getTableBorderStyles(editor)))\n        },\n        {\n          name: 'bordercolor',\n          type: 'colorinput',\n          label: 'Border color'\n        },\n        {\n          name: 'backgroundcolor',\n          type: 'colorinput',\n          label: 'Background color'\n        }\n      ];\n      var borderWidth = {\n        name: 'borderwidth',\n        type: 'input',\n        label: 'Border width'\n      };\n      var items = dialogName === 'cell' ? [borderWidth].concat(advTabItems) : advTabItems;\n      return {\n        title: 'Advanced',\n        name: 'advanced',\n        items: items\n      };\n    };\n\n    var modifiers = function (testTruthy) {\n      return function (editor, node) {\n        var dom = editor.dom;\n        var setAttrib = function (attr, value) {\n          if (!testTruthy || value) {\n            dom.setAttrib(node, attr, value);\n          }\n        };\n        var setStyle = function (prop, value) {\n          if (!testTruthy || value) {\n            dom.setStyle(node, prop, value);\n          }\n        };\n        var setFormat = function (formatName, value) {\n          if (!testTruthy || value) {\n            if (value === '') {\n              editor.formatter.remove(formatName, { value: null }, node, true);\n            } else {\n              editor.formatter.apply(formatName, { value: value }, node);\n            }\n          }\n        };\n        return {\n          setAttrib: setAttrib,\n          setStyle: setStyle,\n          setFormat: setFormat\n        };\n      };\n    };\n    var DomModifier = {\n      normal: modifiers(false),\n      ifTruthy: modifiers(true)\n    };\n\n    var rgbToHex = function (dom) {\n      return function (value) {\n        return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n      };\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var element = SugarElement.fromDom(elm);\n      return {\n        borderwidth: getRaw$2(element, 'border-width').getOr(''),\n        borderstyle: getRaw$2(element, 'border-style').getOr(''),\n        bordercolor: getRaw$2(element, 'border-color').map(rgbToHex(dom)).getOr(''),\n        backgroundcolor: getRaw$2(element, 'background-color').map(rgbToHex(dom)).getOr('')\n      };\n    };\n    var getSharedValues = function (data) {\n      var baseData = data[0];\n      var comparisonData = data.slice(1);\n      each$2(comparisonData, function (items) {\n        each$2(keys(baseData), function (key) {\n          each$1(items, function (itemValue, itemKey) {\n            var comparisonValue = baseData[key];\n            if (comparisonValue !== '' && key === itemKey) {\n              if (comparisonValue !== itemValue) {\n                baseData[key] = '';\n              }\n            }\n          });\n        });\n      });\n      return baseData;\n    };\n    var getAlignment = function (formats, formatName, editor, elm) {\n      return find$1(formats, function (name) {\n        return !isUndefined(editor.formatter.matchNode(elm, formatName + name));\n      }).getOr('');\n    };\n    var getHAlignment = curry(getAlignment, [\n      'left',\n      'center',\n      'right'\n    ], 'align');\n    var getVAlignment = curry(getAlignment, [\n      'top',\n      'middle',\n      'bottom'\n    ], 'valign');\n    var extractDataFromSettings = function (editor, hasAdvTableTab) {\n      var style = getDefaultStyles(editor);\n      var attrs = getDefaultAttributes(editor);\n      var extractAdvancedStyleData = function (dom) {\n        return {\n          borderstyle: get$c(style, 'border-style').getOr(''),\n          bordercolor: rgbToHex(dom)(get$c(style, 'border-color').getOr('')),\n          backgroundcolor: rgbToHex(dom)(get$c(style, 'background-color').getOr(''))\n        };\n      };\n      var defaultData = {\n        height: '',\n        width: '100%',\n        cellspacing: '',\n        cellpadding: '',\n        caption: false,\n        class: '',\n        align: '',\n        border: ''\n      };\n      var getBorder = function () {\n        var borderWidth = style['border-width'];\n        if (shouldStyleWithCss(editor) && borderWidth) {\n          return { border: borderWidth };\n        }\n        return get$c(attrs, 'border').fold(function () {\n          return {};\n        }, function (border) {\n          return { border: border };\n        });\n      };\n      var advStyle = hasAdvTableTab ? extractAdvancedStyleData(editor.dom) : {};\n      var getCellPaddingCellSpacing = function () {\n        var spacing = get$c(style, 'border-spacing').or(get$c(attrs, 'cellspacing')).fold(function () {\n          return {};\n        }, function (cellspacing) {\n          return { cellspacing: cellspacing };\n        });\n        var padding = get$c(style, 'border-padding').or(get$c(attrs, 'cellpadding')).fold(function () {\n          return {};\n        }, function (cellpadding) {\n          return { cellpadding: cellpadding };\n        });\n        return __assign(__assign({}, spacing), padding);\n      };\n      var data = __assign(__assign(__assign(__assign(__assign(__assign({}, defaultData), style), attrs), advStyle), getBorder()), getCellPaddingCellSpacing());\n      return data;\n    };\n    var getRowType = function (elm) {\n      return table(SugarElement.fromDom(elm)).map(function (table) {\n        var target = { selection: fromDom(elm.cells) };\n        return getRowsType(table, target);\n      }).getOr('');\n    };\n    var extractDataFromTableElement = function (editor, elm, hasAdvTableTab) {\n      var getBorder = function (dom, elm) {\n        var optBorderWidth = getRaw$2(SugarElement.fromDom(elm), 'border-width');\n        if (shouldStyleWithCss(editor) && optBorderWidth.isSome()) {\n          return optBorderWidth.getOr('');\n        }\n        return dom.getAttrib(elm, 'border') || getTDTHOverallStyle(editor.dom, elm, 'border-width') || getTDTHOverallStyle(editor.dom, elm, 'border');\n      };\n      var dom = editor.dom;\n      var cellspacing = shouldStyleWithCss(editor) ? dom.getStyle(elm, 'border-spacing') || dom.getAttrib(elm, 'cellspacing') : dom.getAttrib(elm, 'cellspacing') || dom.getStyle(elm, 'border-spacing');\n      var cellpadding = shouldStyleWithCss(editor) ? getTDTHOverallStyle(dom, elm, 'padding') || dom.getAttrib(elm, 'cellpadding') : dom.getAttrib(elm, 'cellpadding') || getTDTHOverallStyle(dom, elm, 'padding');\n      return __assign({\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        cellspacing: cellspacing,\n        cellpadding: cellpadding,\n        border: getBorder(dom, elm),\n        caption: !!dom.select('caption', elm)[0],\n        class: dom.getAttrib(elm, 'class', ''),\n        align: getHAlignment(editor, elm)\n      }, hasAdvTableTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromRowElement = function (editor, elm, hasAdvancedRowTab) {\n      var dom = editor.dom;\n      return __assign({\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        class: dom.getAttrib(elm, 'class', ''),\n        type: getRowType(elm),\n        align: getHAlignment(editor, elm)\n      }, hasAdvancedRowTab ? extractAdvancedStyles(dom, elm) : {});\n    };\n    var extractDataFromCellElement = function (editor, cell, hasAdvancedCellTab, column) {\n      var dom = editor.dom;\n      var colElm = column.getOr(cell);\n      var getStyle = function (element, style) {\n        return dom.getStyle(element, style) || dom.getAttrib(element, style);\n      };\n      return __assign({\n        width: getStyle(colElm, 'width'),\n        height: getStyle(cell, 'height'),\n        scope: dom.getAttrib(cell, 'scope'),\n        celltype: getNodeName(cell),\n        class: dom.getAttrib(cell, 'class', ''),\n        halign: getHAlignment(editor, cell),\n        valign: getVAlignment(editor, cell)\n      }, hasAdvancedCellTab ? extractAdvancedStyles(dom, cell) : {});\n    };\n\n    var getSelectedCells = function (table, cells) {\n      var warehouse = Warehouse.fromTable(table);\n      var allCells = Warehouse.justCells(warehouse);\n      var filtered = filter$2(allCells, function (cellA) {\n        return exists(cells, function (cellB) {\n          return eq$1(cellA.element, cellB);\n        });\n      });\n      return map$1(filtered, function (cell) {\n        return {\n          element: cell.element.dom,\n          column: Warehouse.getColumnAt(warehouse, cell.column).map(function (col) {\n            return col.element.dom;\n          })\n        };\n      });\n    };\n    var updateSimpleProps$1 = function (modifier, colModifier, data) {\n      modifier.setAttrib('scope', data.scope);\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n      colModifier.setStyle('width', addPxSuffix(data.width));\n    };\n    var updateAdvancedProps$1 = function (modifier, data) {\n      modifier.setFormat('tablecellbackgroundcolor', data.backgroundcolor);\n      modifier.setFormat('tablecellbordercolor', data.bordercolor);\n      modifier.setFormat('tablecellborderstyle', data.borderstyle);\n      modifier.setFormat('tablecellborderwidth', addPxSuffix(data.borderwidth));\n    };\n    var applyStyleData$1 = function (editor, cells, data) {\n      var isSingleCell = cells.length === 1;\n      each$2(cells, function (item) {\n        var cellElm = item.element;\n        var modifier = isSingleCell ? DomModifier.normal(editor, cellElm) : DomModifier.ifTruthy(editor, cellElm);\n        var colModifier = item.column.map(function (col) {\n          return isSingleCell ? DomModifier.normal(editor, col) : DomModifier.ifTruthy(editor, col);\n        }).getOr(modifier);\n        updateSimpleProps$1(modifier, colModifier, data);\n        if (hasAdvancedCellTab(editor)) {\n          updateAdvancedProps$1(modifier, data);\n        }\n        if (isSingleCell) {\n          unApplyAlign(editor, cellElm);\n          unApplyVAlign(editor, cellElm);\n        }\n        if (data.halign) {\n          applyAlign(editor, cellElm, data.halign);\n        }\n        if (data.valign) {\n          applyVAlign(editor, cellElm, data.valign);\n        }\n      });\n    };\n    var applyStructureData$1 = function (editor, data) {\n      editor.execCommand('mceTableCellType', false, {\n        type: data.celltype,\n        no_events: true\n      });\n    };\n    var applyCellData = function (editor, cells, oldData, data) {\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0 && cells.length >= 1) {\n        table(cells[0]).each(function (table) {\n          var selectedCells = getSelectedCells(table, cells);\n          var styleModified = size(filter$1(modifiedData, function (_value, key) {\n            return key !== 'scope' && key !== 'celltype';\n          })) > 0;\n          var structureModified = has$1(modifiedData, 'celltype');\n          if (styleModified || has$1(modifiedData, 'scope')) {\n            applyStyleData$1(editor, selectedCells, data);\n          }\n          if (structureModified) {\n            applyStructureData$1(editor, data);\n          }\n          fireTableModified(editor, table.dom, {\n            structure: structureModified,\n            style: styleModified\n          });\n        });\n      }\n    };\n    var onSubmitCellForm = function (editor, cells, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyCellData(editor, cells, oldData, data);\n        editor.focus();\n      });\n    };\n    var getData = function (editor, cells) {\n      var cellsData = table(cells[0]).map(function (table) {\n        return map$1(getSelectedCells(table, cells), function (item) {\n          return extractDataFromCellElement(editor, item.element, hasAdvancedCellTab(editor), item.column);\n        });\n      });\n      return getSharedValues(cellsData.getOrDie());\n    };\n    var open$2 = function (editor, selections) {\n      var cells = getCellsFromSelection(selections);\n      if (cells.length === 0) {\n        return;\n      }\n      var data = getData(editor, cells);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems$2(editor)\n          },\n          getAdvancedTab(editor, 'cell')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems$2(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Cell Properties',\n        size: 'normal',\n        body: hasAdvancedCellTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitCellForm, editor, cells, data)\n      });\n    };\n\n    var getClassList = function (editor) {\n      var classes = buildListItems(getRowClassList(editor));\n      if (classes.length > 0) {\n        return Optional.some({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          items: classes\n        });\n      }\n      return Optional.none();\n    };\n    var formChildren = [\n      {\n        type: 'listbox',\n        name: 'type',\n        label: 'Row type',\n        items: [\n          {\n            text: 'Header',\n            value: 'header'\n          },\n          {\n            text: 'Body',\n            value: 'body'\n          },\n          {\n            text: 'Footer',\n            value: 'footer'\n          }\n        ]\n      },\n      {\n        type: 'listbox',\n        name: 'align',\n        label: 'Alignment',\n        items: [\n          {\n            text: 'None',\n            value: ''\n          },\n          {\n            text: 'Left',\n            value: 'left'\n          },\n          {\n            text: 'Center',\n            value: 'center'\n          },\n          {\n            text: 'Right',\n            value: 'right'\n          }\n        ]\n      },\n      {\n        label: 'Height',\n        name: 'height',\n        type: 'input'\n      }\n    ];\n    var getItems$1 = function (editor) {\n      return formChildren.concat(getClassList(editor).toArray());\n    };\n\n    var updateSimpleProps = function (modifier, data) {\n      modifier.setAttrib('class', data.class);\n      modifier.setStyle('height', addPxSuffix(data.height));\n    };\n    var updateAdvancedProps = function (modifier, data) {\n      modifier.setStyle('background-color', data.backgroundcolor);\n      modifier.setStyle('border-color', data.bordercolor);\n      modifier.setStyle('border-style', data.borderstyle);\n    };\n    var applyStyleData = function (editor, rows, data, oldData) {\n      var isSingleRow = rows.length === 1;\n      each$2(rows, function (rowElm) {\n        var modifier = isSingleRow ? DomModifier.normal(editor, rowElm) : DomModifier.ifTruthy(editor, rowElm);\n        updateSimpleProps(modifier, data);\n        if (hasAdvancedRowTab(editor)) {\n          updateAdvancedProps(modifier, data);\n        }\n        if (data.align !== oldData.align) {\n          unApplyAlign(editor, rowElm);\n          applyAlign(editor, rowElm, data.align);\n        }\n      });\n    };\n    var applyStructureData = function (editor, data) {\n      editor.execCommand('mceTableRowType', false, {\n        type: data.type,\n        no_events: true\n      });\n    };\n    var applyRowData = function (editor, rows, oldData, data) {\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      if (size(modifiedData) > 0) {\n        var typeModified_1 = has$1(modifiedData, 'type');\n        var styleModified_1 = typeModified_1 ? size(modifiedData) > 1 : true;\n        if (styleModified_1) {\n          applyStyleData(editor, rows, data, oldData);\n        }\n        if (typeModified_1) {\n          applyStructureData(editor, data);\n        }\n        table(SugarElement.fromDom(rows[0])).each(function (table) {\n          return fireTableModified(editor, table.dom, {\n            structure: typeModified_1,\n            style: styleModified_1\n          });\n        });\n      }\n    };\n    var onSubmitRowForm = function (editor, rows, oldData, api) {\n      var data = api.getData();\n      api.close();\n      editor.undoManager.transact(function () {\n        applyRowData(editor, rows, oldData, data);\n        editor.focus();\n      });\n    };\n    var open$1 = function (editor) {\n      var rows = getRowsFromSelection(getSelectionStart(editor), ephemera.selected);\n      if (rows.length === 0) {\n        return;\n      }\n      var rowsData = map$1(rows, function (rowElm) {\n        return extractDataFromRowElement(editor, rowElm.dom, hasAdvancedRowTab(editor));\n      });\n      var data = getSharedValues(rowsData);\n      var dialogTabPanel = {\n        type: 'tabpanel',\n        tabs: [\n          {\n            title: 'General',\n            name: 'general',\n            items: getItems$1(editor)\n          },\n          getAdvancedTab(editor, 'row')\n        ]\n      };\n      var dialogPanel = {\n        type: 'panel',\n        items: [{\n            type: 'grid',\n            columns: 2,\n            items: getItems$1(editor)\n          }]\n      };\n      editor.windowManager.open({\n        title: 'Row Properties',\n        size: 'normal',\n        body: hasAdvancedRowTab(editor) ? dialogTabPanel : dialogPanel,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data,\n        onSubmit: curry(onSubmitRowForm, editor, map$1(rows, function (r) {\n          return r.dom;\n        }), data)\n      });\n    };\n\n    var getItems = function (editor, classes, insertNewTable) {\n      var rowColCountItems = !insertNewTable ? [] : [\n        {\n          type: 'input',\n          name: 'cols',\n          label: 'Cols',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'rows',\n          label: 'Rows',\n          inputMode: 'numeric'\n        }\n      ];\n      var alwaysItems = [\n        {\n          type: 'input',\n          name: 'width',\n          label: 'Width'\n        },\n        {\n          type: 'input',\n          name: 'height',\n          label: 'Height'\n        }\n      ];\n      var appearanceItems = hasAppearanceOptions(editor) ? [\n        {\n          type: 'input',\n          name: 'cellspacing',\n          label: 'Cell spacing',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'cellpadding',\n          label: 'Cell padding',\n          inputMode: 'numeric'\n        },\n        {\n          type: 'input',\n          name: 'border',\n          label: 'Border width'\n        },\n        {\n          type: 'label',\n          label: 'Caption',\n          items: [{\n              type: 'checkbox',\n              name: 'caption',\n              label: 'Show caption'\n            }]\n        }\n      ] : [];\n      var alignmentItem = [{\n          type: 'listbox',\n          name: 'align',\n          label: 'Alignment',\n          items: [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'Left',\n              value: 'left'\n            },\n            {\n              text: 'Center',\n              value: 'center'\n            },\n            {\n              text: 'Right',\n              value: 'right'\n            }\n          ]\n        }];\n      var classListItem = classes.length > 0 ? [{\n          type: 'listbox',\n          name: 'class',\n          label: 'Class',\n          items: classes\n        }] : [];\n      return rowColCountItems.concat(alwaysItems).concat(appearanceItems).concat(alignmentItem).concat(classListItem);\n    };\n\n    var styleTDTH = function (dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        if (isString(name)) {\n          dom.setStyle(elm, name, value);\n        } else {\n          dom.setStyle(elm, name);\n        }\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addPxSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addPxSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addPxSuffix(data.border);\n        styles['border-spacing'] = addPxSuffix(data.cellspacing);\n      } else {\n        attrs.border = data.border;\n        attrs.cellpadding = data.cellpadding;\n        attrs.cellspacing = data.cellspacing;\n      }\n      if (shouldStyleWithCss(editor) && tableElm.children) {\n        for (var i = 0; i < tableElm.children.length; i++) {\n          styleTDTH(dom, tableElm.children[i], {\n            'border-width': addPxSuffix(data.border),\n            'padding': addPxSuffix(data.cellpadding)\n          });\n          if (hasAdvancedTableTab(editor)) {\n            styleTDTH(dom, tableElm.children[i], { 'border-color': data.bordercolor });\n          }\n        }\n      }\n      if (hasAdvancedTableTab(editor)) {\n        styles['background-color'] = data.backgroundcolor;\n        styles['border-color'] = data.bordercolor;\n        styles['border-style'] = data.borderstyle;\n      }\n      attrs.style = dom.serializeStyle(__assign(__assign({}, getDefaultStyles(editor)), styles));\n      dom.setAttribs(tableElm, __assign(__assign({}, getDefaultAttributes(editor)), attrs));\n    };\n    var onSubmitTableForm = function (editor, tableElm, oldData, api) {\n      var dom = editor.dom;\n      var data = api.getData();\n      var modifiedData = filter$1(data, function (value, key) {\n        return oldData[key] !== value;\n      });\n      api.close();\n      if (data.class === '') {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          var cols = parseInt(data.cols, 10) || 1;\n          var rows = parseInt(data.rows, 10) || 1;\n          tableElm = insert(editor, cols, rows, 0, 0);\n        }\n        if (size(modifiedData) > 0) {\n          applyDataToElement(editor, tableElm, data);\n          var captionElm = dom.select('caption', tableElm)[0];\n          if (captionElm && !data.caption || !captionElm && data.caption) {\n            editor.execCommand('mceTableToggleCaption');\n          }\n          if (data.align === '') {\n            unApplyAlign(editor, tableElm);\n          } else {\n            applyAlign(editor, tableElm, data.align);\n          }\n        }\n        editor.focus();\n        editor.addVisual();\n        if (size(modifiedData) > 0) {\n          var captionModified = has$1(modifiedData, 'caption');\n          var styleModified = captionModified ? size(modifiedData) > 1 : true;\n          fireTableModified(editor, tableElm, {\n            structure: captionModified,\n            style: styleModified\n          });\n        }\n      });\n    };\n    var open = function (editor, insertNewTable) {\n      var dom = editor.dom;\n      var tableElm;\n      var data = extractDataFromSettings(editor, hasAdvancedTableTab(editor));\n      if (insertNewTable === false) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table', editor.getBody());\n        if (tableElm) {\n          data = extractDataFromTableElement(editor, tableElm, hasAdvancedTableTab(editor));\n        } else {\n          if (hasAdvancedTableTab(editor)) {\n            data.borderstyle = '';\n            data.bordercolor = '';\n            data.backgroundcolor = '';\n          }\n        }\n      } else {\n        data.cols = '1';\n        data.rows = '1';\n        if (hasAdvancedTableTab(editor)) {\n          data.borderstyle = '';\n          data.bordercolor = '';\n          data.backgroundcolor = '';\n        }\n      }\n      var classes = buildListItems(getTableClassList(editor));\n      if (classes.length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n      }\n      var generalPanel = {\n        type: 'grid',\n        columns: 2,\n        items: getItems(editor, classes, insertNewTable)\n      };\n      var nonAdvancedForm = function () {\n        return {\n          type: 'panel',\n          items: [generalPanel]\n        };\n      };\n      var advancedForm = function () {\n        return {\n          type: 'tabpanel',\n          tabs: [\n            {\n              title: 'General',\n              name: 'general',\n              items: [generalPanel]\n            },\n            getAdvancedTab(editor, 'table')\n          ]\n        };\n      };\n      var dialogBody = hasAdvancedTableTab(editor) ? advancedForm() : nonAdvancedForm();\n      editor.windowManager.open({\n        title: 'Table Properties',\n        size: 'normal',\n        body: dialogBody,\n        onSubmit: curry(onSubmitTableForm, editor, tableElm, data),\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: data\n      });\n    };\n\n    var getSelectionStartCellOrCaption = function (editor) {\n      return getSelectionCellOrCaption(getSelectionStart(editor), getIsRoot(editor));\n    };\n    var getSelectionStartCell = function (editor) {\n      return getSelectionCell(getSelectionStart(editor), getIsRoot(editor));\n    };\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboard) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        return getSelectionStartCellOrCaption(editor).each(function (cellOrCaption) {\n          table(cellOrCaption, isRoot).filter(not(isRoot)).each(function (table) {\n            var cursor = SugarElement.fromText('');\n            after$5(table, cursor);\n            remove$5(table);\n            if (editor.dom.isEmpty(editor.getBody())) {\n              editor.setContent('');\n              editor.selection.setCursorLocation();\n            } else {\n              var rng = editor.dom.createRng();\n              rng.setStart(cursor.dom, 0);\n              rng.setEnd(cursor.dom, 0);\n              editor.selection.setRng(rng);\n              editor.nodeChanged();\n            }\n          });\n        });\n      };\n      var setSizingMode = function (sizing) {\n        return getSelectionStartCellOrCaption(editor).each(function (cellOrCaption) {\n          var isForcedSizing = isResponsiveForced(editor) || isPixelsForced(editor) || isPercentagesForced(editor);\n          if (!isForcedSizing) {\n            table(cellOrCaption, isRoot).each(function (table) {\n              if (sizing === 'relative' && !isPercentSizing(table)) {\n                enforcePercentage(table);\n              } else if (sizing === 'fixed' && !isPixelSizing(table)) {\n                enforcePixels(table);\n              } else if (sizing === 'responsive' && !isNoneSizing(table)) {\n                enforceNone(table);\n              }\n              removeDataStyle(table);\n              fireTableModified(editor, table.dom, structureModified);\n            });\n          }\n        });\n      };\n      var getTableFromCell = function (cell) {\n        return table(cell, isRoot);\n      };\n      var performActionOnSelection = function (action) {\n        return getSelectionStartCell(editor).bind(function (cell) {\n          return getTableFromCell(cell).map(function (table) {\n            return action(table, cell);\n          });\n        });\n      };\n      var toggleTableClass = function (_ui, clazz) {\n        performActionOnSelection(function (table) {\n          editor.formatter.toggle('tableclass', { value: clazz }, table.dom);\n          fireTableModified(editor, table.dom, styleModified);\n        });\n      };\n      var toggleTableCellClass = function (_ui, clazz) {\n        performActionOnSelection(function (table) {\n          var selectedCells = getCellsFromSelection(selections);\n          var allHaveClass = forall(selectedCells, function (cell) {\n            return editor.formatter.match('tablecellclass', { value: clazz }, cell.dom);\n          });\n          var formatterAction = allHaveClass ? editor.formatter.remove : editor.formatter.apply;\n          each$2(selectedCells, function (cell) {\n            return formatterAction('tablecellclass', { value: clazz }, cell.dom);\n          });\n          fireTableModified(editor, table.dom, styleModified);\n        });\n      };\n      var toggleCaption = function () {\n        getSelectionStartCellOrCaption(editor).each(function (cellOrCaption) {\n          table(cellOrCaption, isRoot).each(function (table) {\n            child$1(table, 'caption').fold(function () {\n              var caption = SugarElement.fromTag('caption');\n              append$1(caption, SugarElement.fromText('Caption'));\n              appendAt(table, caption, 0);\n              editor.selection.setCursorLocation(caption.dom, 0);\n            }, function (caption) {\n              if (isTag('caption')(cellOrCaption)) {\n                one('td', table).each(function (td) {\n                  return editor.selection.setCursorLocation(td.dom, 0);\n                });\n              }\n              remove$5(caption);\n            });\n            fireTableModified(editor, table.dom, structureModified);\n          });\n        });\n      };\n      var postExecute = function (_data) {\n        editor.focus();\n      };\n      var actOnSelection = function (execute, noEvents) {\n        if (noEvents === void 0) {\n          noEvents = false;\n        }\n        return performActionOnSelection(function (table, startCell) {\n          var targets = forMenu(selections, table, startCell);\n          execute(table, targets, noEvents).each(postExecute);\n        });\n      };\n      var copyRowSelection = function () {\n        return performActionOnSelection(function (table, startCell) {\n          var targets = forMenu(selections, table, startCell);\n          var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), Optional.none());\n          return copyRows(table, targets, generators);\n        });\n      };\n      var copyColSelection = function () {\n        return performActionOnSelection(function (table, startCell) {\n          var targets = forMenu(selections, table, startCell);\n          return copyCols(table, targets);\n        });\n      };\n      var pasteOnSelection = function (execute, getRows) {\n        return getRows().each(function (rows) {\n          var clonedRows = map$1(rows, function (row) {\n            return deep(row);\n          });\n          performActionOnSelection(function (table, startCell) {\n            var generators = paste$1(SugarElement.fromDom(editor.getDoc()));\n            var targets = pasteRows(selections, startCell, clonedRows, generators);\n            execute(table, targets).each(postExecute);\n          });\n        });\n      };\n      var actOnType = function (getAction) {\n        return function (_ui, args) {\n          return get$c(args, 'type').each(function (type) {\n            actOnSelection(getAction(type), args.no_events);\n          });\n        };\n      };\n      each$1({\n        mceTableSplitCells: function () {\n          return actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          return actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          return actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          return actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          return actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          return actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          return actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          return actOnSelection(actions.deleteRow);\n        },\n        mceTableCutCol: function () {\n          return copyColSelection().each(function (selection) {\n            clipboard.setColumns(selection);\n            actOnSelection(actions.deleteColumn);\n          });\n        },\n        mceTableCutRow: function () {\n          return copyRowSelection().each(function (selection) {\n            clipboard.setRows(selection);\n            actOnSelection(actions.deleteRow);\n          });\n        },\n        mceTableCopyCol: function () {\n          return copyColSelection().each(function (selection) {\n            return clipboard.setColumns(selection);\n          });\n        },\n        mceTableCopyRow: function () {\n          return copyRowSelection().each(function (selection) {\n            return clipboard.setRows(selection);\n          });\n        },\n        mceTablePasteColBefore: function () {\n          return pasteOnSelection(actions.pasteColsBefore, clipboard.getColumns);\n        },\n        mceTablePasteColAfter: function () {\n          return pasteOnSelection(actions.pasteColsAfter, clipboard.getColumns);\n        },\n        mceTablePasteRowBefore: function () {\n          return pasteOnSelection(actions.pasteRowsBefore, clipboard.getRows);\n        },\n        mceTablePasteRowAfter: function () {\n          return pasteOnSelection(actions.pasteRowsAfter, clipboard.getRows);\n        },\n        mceTableDelete: eraseTable,\n        mceTableCellToggleClass: toggleTableCellClass,\n        mceTableToggleClass: toggleTableClass,\n        mceTableToggleCaption: toggleCaption,\n        mceTableSizingMode: function (_ui, sizing) {\n          return setSizingMode(sizing);\n        },\n        mceTableCellType: actOnType(function (type) {\n          return type === 'th' ? actions.makeCellsHeader : actions.unmakeCellsHeader;\n        }),\n        mceTableColType: actOnType(function (type) {\n          return type === 'th' ? actions.makeColumnsHeader : actions.unmakeColumnsHeader;\n        }),\n        mceTableRowType: actOnType(function (type) {\n          switch (type) {\n          case 'header':\n            return actions.makeRowsHeader;\n          case 'footer':\n            return actions.makeRowsFooter;\n          default:\n            return actions.makeRowsBody;\n          }\n        })\n      }, function (func, name) {\n        return editor.addCommand(name, func);\n      });\n      each$1({\n        mceTableProps: curry(open, editor, false),\n        mceTableRowProps: curry(open$1, editor),\n        mceTableCellProps: curry(open$2, editor, selections)\n      }, function (func, name) {\n        return editor.addCommand(name, function () {\n          return func();\n        });\n      });\n      editor.addCommand('mceInsertTable', function (_ui, args) {\n        if (isObject(args) && keys(args).length > 0) {\n          insertTableWithDataValidation(editor, args.rows, args.columns, args.options, 'Invalid values for mceInsertTable - rows and columns values are required to insert a table.');\n        } else {\n          open(editor, true);\n        }\n      });\n      editor.addCommand('mceTableApplyCellStyle', function (_ui, args) {\n        var getFormatName = function (style) {\n          return 'tablecell' + style.toLowerCase().replace('-', '');\n        };\n        if (!isObject(args)) {\n          return;\n        }\n        var cells = getCellsFromSelection(selections);\n        if (cells.length === 0) {\n          return;\n        }\n        var validArgs = filter$1(args, function (value, style) {\n          return editor.formatter.has(getFormatName(style)) && isString(value);\n        });\n        if (isEmpty(validArgs)) {\n          return;\n        }\n        each$1(validArgs, function (value, style) {\n          each$2(cells, function (cell) {\n            DomModifier.normal(editor, cell.dom).setFormat(getFormatName(style), value);\n          });\n        });\n        getTableFromCell(cells[0]).each(function (table) {\n          return fireTableModified(editor, table.dom, styleModified);\n        });\n      });\n    };\n\n    var registerQueryCommands = function (editor, actions, selections) {\n      var isRoot = getIsRoot(editor);\n      var lookupOnSelection = function (action) {\n        return getSelectionCell(getSelectionStart(editor)).bind(function (cell) {\n          return table(cell, isRoot).map(function (table) {\n            var targets = forMenu(selections, table, cell);\n            return action(table, targets);\n          });\n        }).getOr('');\n      };\n      each$1({\n        mceTableRowType: function () {\n          return lookupOnSelection(actions.getTableRowType);\n        },\n        mceTableCellType: function () {\n          return lookupOnSelection(actions.getTableCellType);\n        },\n        mceTableColType: function () {\n          return lookupOnSelection(actions.getTableColType);\n        }\n      }, function (func, name) {\n        return editor.addQueryValueHandler(name, func);\n      });\n    };\n\n    var Clipboard = function () {\n      var rows = value();\n      var cols = value();\n      return {\n        getRows: rows.get,\n        setRows: function (r) {\n          r.fold(rows.clear, rows.set);\n          cols.clear();\n        },\n        clearRows: rows.clear,\n        getColumns: cols.get,\n        setColumns: function (c) {\n          c.fold(cols.clear, cols.set);\n          rows.clear();\n        },\n        clearColumns: cols.clear\n      };\n    };\n\n    var genericBase = {\n      remove_similar: true,\n      inherit: false\n    };\n    var cellBase = __assign({ selector: 'td,th' }, genericBase);\n    var cellFormats = {\n      tablecellbackgroundcolor: __assign({ styles: { backgroundColor: '%value' } }, cellBase),\n      tablecellverticalalign: __assign({ styles: { 'vertical-align': '%value' } }, cellBase),\n      tablecellbordercolor: __assign({ styles: { borderColor: '%value' } }, cellBase),\n      tablecellclass: __assign({ classes: ['%value'] }, cellBase),\n      tableclass: __assign({\n        selector: 'table',\n        classes: ['%value']\n      }, genericBase),\n      tablecellborderstyle: __assign({ styles: { borderStyle: '%value' } }, cellBase),\n      tablecellborderwidth: __assign({ styles: { borderWidth: '%value' } }, cellBase)\n    };\n    var registerFormats = function (editor) {\n      editor.formatter.register(cellFormats);\n    };\n\n    var adt$5 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$5.none(current);\n    };\n    var CellLocation = __assign(__assign({}, adt$5), { none: none });\n\n    var walk = function (all, current, index, direction, isEligible) {\n      if (isEligible === void 0) {\n        isEligible = always;\n      }\n      var forwards = direction === 1;\n      if (!forwards && index <= 0) {\n        return CellLocation.first(all[0]);\n      } else if (forwards && index >= all.length - 1) {\n        return CellLocation.last(all[all.length - 1]);\n      } else {\n        var newIndex = index + direction;\n        var elem = all[newIndex];\n        return isEligible(elem) ? CellLocation.middle(current, elem) : walk(all, current, newIndex, direction, isEligible);\n      }\n    };\n    var detect$1 = function (current, isRoot) {\n      return table(current, isRoot).bind(function (table) {\n        var all = cells$1(table);\n        var index = findIndex(all, function (x) {\n          return eq$1(current, x);\n        });\n        return index.map(function (index) {\n          return {\n            index: index,\n            all: all\n          };\n        });\n      });\n    };\n    var next = function (current, isEligible, isRoot) {\n      var detection = detect$1(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return walk(info.all, current, info.index, 1, isEligible);\n      });\n    };\n    var prev = function (current, isEligible, isRoot) {\n      var detection = detect$1(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return walk(info.all, current, info.index, -1, isEligible);\n      });\n    };\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$4 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart$1 = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$4.before;\n    var on = adt$4.on;\n    var after$3 = adt$4.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$3,\n      cata: cata$1,\n      getStart: getStart$1\n    };\n\n    var adt$3 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$3.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$3.domRange;\n    var relative = adt$3.relative;\n    var exact = adt$3.exact;\n    var getWin = function (selection) {\n      var start = getStart(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var selectNode = function (win, element) {\n      var rng = win.document.createRange();\n      rng.selectNode(element.dom);\n      return rng;\n    };\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      return rng.selectNodeContents(element.dom);\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect$1 = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$2 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$2.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$2.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$2.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    adt$2.ltr;\n    adt$2.rtl;\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom.createRange();\n        r.setStart(textnode.dom, o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$9(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Optional.some(rect) : Optional.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      var nodes = children$3(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom);\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Optional.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate$1(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom.createRange();\n      r.selectNode(target.dom);\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom.createRange();\n      cursorRange.selectNode(node.dom);\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Optional.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children$3(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretPositionFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Optional.none();\n        }\n        var r = doc.dom.createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Optional.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretRangeFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom.createRange();\n      r.selectNode(node.dom);\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return SugarElement.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children$3(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = function () {\n      if (document.caretPositionFromPoint) {\n        return caretPositionFromPoint;\n      } else if (document.caretRangeFromPoint) {\n        return caretRangeFromPoint;\n      } else {\n        return searchFromPoint;\n      }\n    }();\n    var fromPoint = function (win, x, y) {\n      var doc = SugarElement.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains$2([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return SimSelection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return SimSelection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = SugarElement.fromDom(rng.startContainer);\n          var finish = SugarElement.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var doSetNativeRange = function (win, rng) {\n      getNativeSelection(win).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom, soffset);\n      selection.extend(finish.dom, foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          getNativeSelection(win).each(function (selection) {\n            if (selection.setBaseAndExtent) {\n              selection.setBaseAndExtent(start.dom, soffset, finish.dom, foffset);\n            } else if (selection.extend) {\n              try {\n                setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n              } catch (e) {\n                doSetRange(win, finish, foffset, start, soffset);\n              }\n            } else {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          });\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = SimSelection.getWin(selection).dom;\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$2(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var setToElement = function (win, element, selectNodeContents$1) {\n      if (selectNodeContents$1 === void 0) {\n        selectNodeContents$1 = true;\n      }\n      var rngGetter = selectNodeContents$1 ? selectNodeContents : selectNode;\n      var rng = rngGetter(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$1 = function (win) {\n      return getExact(win).map(function (range) {\n        return SimSelection.exact(range.start, range.soffset, range.finish, range.foffset);\n      });\n    };\n    var getFirstRect = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect$1(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint(win, x, y);\n    };\n    var clear = function (win) {\n      getNativeSelection(win).each(function (selection) {\n        return selection.removeAllRanges();\n      });\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell) {\n      return go$1(editor, isRoot, next(cell, isEditable$1));\n    };\n    var backward = function (editor, isRoot, cell) {\n      return go$1(editor, isRoot, prev(cell, isEditable$1));\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = SimSelection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var go$1 = function (editor, isRoot, cell) {\n      return cell.fold(Optional.none, Optional.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        editor.execCommand('mceTableInsertRowAfter');\n        return forward(editor, isRoot, current);\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, cellSelection) {\n      if (event.keyCode === global$1.TAB) {\n        var body_1 = getBody(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq$1(element, body_1) || contains$2(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        var container = SugarElement.fromDom(event.shiftKey ? rng.startContainer : rng.endContainer);\n        cell(container, isRoot_1).each(function (cell) {\n          event.preventDefault();\n          table(cell, isRoot_1).each(cellSelection.clear);\n          editor.selection.collapse(event.shiftKey);\n          var navigation = event.shiftKey ? backward : forward;\n          var rng = navigation(editor, isRoot_1, cell);\n          rng.each(function (range) {\n            editor.selection.setRng(range);\n          });\n        });\n      }\n    };\n\n    var create$1 = function (selection, kill) {\n      return {\n        selection: selection,\n        kill: kill\n      };\n    };\n    var Response = { create: create$1 };\n\n    var create = function (start, soffset, finish, foffset) {\n      return {\n        start: Situ.on(start, soffset),\n        finish: Situ.on(finish, foffset)\n      };\n    };\n    var Situs = { create: create };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq$1(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var detect = function (container, isRoot, start, finish, selectRange) {\n      if (!eq$1(start, finish)) {\n        return identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          if (boxes.length > 1) {\n            selectRange(container, boxes, cellSel.start, cellSel.finish);\n            return Optional.some(Response.create(Optional.some(makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Optional.none();\n          }\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clearBeforeUpdate(container);\n        annotations.selectRange(container, newSels.boxes, newSels.start, newSels.finish);\n        return newSels.boxes;\n      };\n      return shiftSelection(selected, rows, columns, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(updateSelection);\n    };\n\n    var traverse = function (item, mode) {\n      return {\n        item: item,\n        mode: mode\n      };\n    };\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Optional.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Optional.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Optional.some(sidestep)\n      }\n    ];\n    var go = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find$1(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left$1 = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[children.length - 1]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right$1 = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Optional.some(children[0]) : Optional.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left$1,\n      right: right$1\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item)) {\n          return Optional.none();\n        } else {\n          return predicate(n.item) ? Optional.some(n.item) : hone(universe, n.item, predicate, n.mode, direction, isRoot);\n        }\n      });\n    };\n    var left = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$1 = function (universe, item, isRoot) {\n      return seekLeft$1(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$1 = function (universe, item, isRoot) {\n      return seekRight$1(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft$1 = left;\n    var seekRight$1 = right;\n\n    var universe = DomUniverse();\n    var before = function (element, isRoot) {\n      return before$1(universe, element, isRoot);\n    };\n    var after = function (element, isRoot) {\n      return after$1(universe, element, isRoot);\n    };\n    var seekLeft = function (element, predicate, isRoot) {\n      return seekLeft$1(universe, element, predicate, isRoot);\n    };\n    var seekRight = function (element, predicate, isRoot) {\n      return seekRight$1(universe, element, predicate, isRoot);\n    };\n\n    var ancestor = function (scope, predicate, isRoot) {\n      return ancestor$2(scope, predicate, isRoot).isSome();\n    };\n\n    var adt$1 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq$1(afterCell, beforeCell)) {\n            return sharedOne(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$1.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq$1(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$1.none('in same cell');\n          }\n        });\n      }).getOr(adt$1.none('default'));\n    };\n    var cata = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign(__assign({}, adt$1), {\n      verify: verify,\n      cata: cata\n    });\n\n    var inParent = function (parent, children, element, index) {\n      return {\n        parent: parent,\n        children: children,\n        element: element,\n        index: index\n      };\n    };\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children = children$3(parent);\n        return indexOf(children, element).map(function (index) {\n          return inParent(parent, children, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq$1, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$9(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Optional.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child$3(element, offset).filter(isBr).orThunk(function () {\n        return child$3(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent, info.index);\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: tgt,\n          finish: tgt\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (_message) {\n        return Optional.none();\n      }, function () {\n        return Optional.none();\n      }, function (cell) {\n        return Optional.some(point(cell, 0));\n      }, function (cell) {\n        return Optional.some(point(cell, getEnd(cell)));\n      });\n    };\n\n    var moveDown = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top + amount,\n        right: caret.right,\n        bottom: caret.bottom + amount\n      };\n    };\n    var moveUp = function (caret, amount) {\n      return {\n        left: caret.left,\n        top: caret.top - amount,\n        right: caret.right,\n        bottom: caret.bottom - amount\n      };\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return {\n        left: caret.left + xDelta,\n        top: caret.top + yDelta,\n        right: caret.right + xDelta,\n        bottom: caret.bottom + yDelta\n      };\n    };\n    var getTop = function (caret) {\n      return caret.top;\n    };\n    var getBottom = function (caret) {\n      return caret.bottom;\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Optional.none();\n    };\n    var toCaret = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      };\n    };\n    var getElemBox = function (bridge, element) {\n      return Optional.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left < box.left || Math.abs(box.right - caret.left) < 1 || caret.left > box.right;\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest$2(element, isBlock).fold(never, function (cell) {\n        return getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom - original.bottom) < 1) {\n        return adt.retry(lowerCaret);\n      } else if (guessBox.top > caret.bottom) {\n        return adt.retry(lowerCaret);\n      } else if (guessBox.top === caret.bottom) {\n        return adt.retry(moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt.retry(translate(lowerCaret, JUMP_SIZE, 0)) : adt.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top - original.top) < 1) {\n        return adt.retry(higherCaret);\n      } else if (guessBox.bottom < caret.top) {\n        return adt.retry(higherCaret);\n      } else if (guessBox.bottom === caret.top) {\n        return adt.retry(moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt.retry(translate(higherCaret, JUMP_SIZE, 0)) : adt.none();\n      }\n    };\n    var upMovement = {\n      point: getTop,\n      adjuster: adjustUp,\n      move: moveUp,\n      gather: before\n    };\n    var downMovement = {\n      point: getBottom,\n      adjuster: adjustDown,\n      move: moveDown,\n      gather: after\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Optional.some(caret);\n      }\n      if (isAtTable(bridge, caret.left, movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left, movement.point(caret)).bind(function (guess) {\n        return guess.start.fold(Optional.none, function (element) {\n          return getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Optional.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Optional.some(caret);\n          });\n        }, Optional.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.bottom + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left, caret.top - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Optional.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Optional.some(-movement.point(adjusted));\n      } else {\n        return Optional.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return tryBr(isRoot, sel.finish, sel.foffset, direction).fold(function () {\n          return Optional.some(point(sel.finish, sel.foffset));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish, sel.foffset, range.finish, range.foffset, direction.failure, isRoot);\n          return process(analysis);\n        });\n      });\n    };\n    var scan = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Optional.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish, range.foffset, direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Optional.none();\n        }, function () {\n          return Optional.some(situs);\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, moveUp, direction);\n          } else {\n            return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq$1(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, moveDown, direction);\n          } else {\n            return scan(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      var browser = detect$3().browser;\n      if (browser.isChrome() || browser.isSafari() || browser.isFirefox() || browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Optional.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan(bridge, isRoot, spot.element, spot.offset, direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n\n    var inSameTable = function (elem, table) {\n      return ancestor(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq$1(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Optional.none();\n          }\n          return handle(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish, 'td,th', isRoot).map(function (finish) {\n              return {\n                start: start,\n                finish: finish,\n                range: range\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detect$3().browser.isIE()) {\n        return Optional.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range;\n            return Response.create(Optional.some(makeSitus(range.start, range.soffset, range.finish, range.foffset)), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants(table, 'tr');\n          if (eq$1(startRow, rows[0])) {\n            return seekLeft(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Optional.some(makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants(table, 'tr');\n          if (eq$1(startRow, rows[rows.length - 1])) {\n            return seekRight(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Optional.some(makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return detect(container, isRoot, info.start, info.finish, selectRange);\n      });\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    var MouseSelection = function (bridge, container, isRoot, annotations) {\n      var cursor = value();\n      var clearstate = cursor.clear;\n      var applySelection = function (event) {\n        cursor.on(function (start) {\n          annotations.clearBeforeUpdate(container);\n          findCell(event.target, isRoot).each(function (finish) {\n            identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes.getOr([]);\n              if (boxes.length === 1) {\n                var singleCell = boxes[0];\n                var isNonEditableCell = getRaw(singleCell) === 'false';\n                var isCellClosestContentEditable = is(closest(event.target), singleCell, eq$1);\n                if (isNonEditableCell && isCellClosestContentEditable) {\n                  annotations.selectRange(container, boxes, singleCell, singleCell);\n                  bridge.selectContents(singleCell);\n                }\n              } else if (boxes.length > 1) {\n                annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mousedown = function (event) {\n        annotations.clear(container);\n        findCell(event.target, isRoot).each(cursor.set);\n      };\n      var mouseover = function (event) {\n        applySelection(event);\n      };\n      var mouseup = function (event) {\n        applySelection(event);\n        clearstate();\n      };\n      return {\n        clearstate: clearstate,\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    };\n\n    var down = {\n      traverse: nextSibling,\n      gather: after,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var ltr = {\n      isBackward: isKey(37),\n      isForward: isKey(39)\n    };\n    var rtl = {\n      isBackward: isKey(39),\n      isForward: isKey(37)\n    };\n\n    var get = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollBy(x, y);\n      }\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return SugarElement.fromPoint(SugarElement.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom.getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = SimSelection.exact(start, soffset, finish, foffset);\n        return getFirstRect(win, sel);\n      };\n      var getSelection = function () {\n        return get$1(win).map(function (exactAdt) {\n          return convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = SimSelection.relative(situs.start, situs.finish);\n        return convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start, exact.soffset, exact.finish, exact.foffset);\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var collapseSelection = function (toStart) {\n        if (toStart === void 0) {\n          toStart = false;\n        }\n        get$1(win).each(function (sel) {\n          return sel.fold(function (rng) {\n            return rng.collapse(toStart);\n          }, function (startSitu, finishSitu) {\n            var situ = toStart ? startSitu : finishSitu;\n            setRelative(win, situ, situ);\n          }, function (start, soffset, finish, foffset) {\n            var node = toStart ? start : finish;\n            var offset = toStart ? soffset : foffset;\n            setExact(win, node, offset, node, offset);\n          });\n        });\n      };\n      var selectNode = function (element) {\n        setToElement(win, element, false);\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start, sel.soffset, sel.finish, sel.foffset);\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get(SugarElement.fromDom(win.document));\n        return pos.top;\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, SugarElement.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        collapseSelection: collapseSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectNode: selectNode,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = function (rows, cols) {\n      return {\n        rows: rows,\n        cols: cols\n      };\n    };\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        clearstate: handlers.clearstate,\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Optional.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw;\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = retrieve$1(container, annotations.selectedSelector).fold(function () {\n          if (isNavigation(keycode) && !shiftKey) {\n            annotations.clearBeforeUpdate(container);\n          }\n          if (isDown(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, down, finish, start, annotations.selectRange);\n          } else if (isUp(keycode) && shiftKey) {\n            return curry(select, bridge, container, isRoot, up, finish, start, annotations.selectRange);\n          } else if (isDown(keycode)) {\n            return curry(navigate, bridge, isRoot, down, finish, start, lastDownCheck);\n          } else if (isUp(keycode)) {\n            return curry(navigate, bridge, isRoot, up, finish, start, firstUpCheck);\n          } else {\n            return Optional.none;\n          }\n        }, function (selected) {\n          var update$1 = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return update(delta.rows, delta.cols, container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return getEdges(container, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(function (edges) {\n                  var relative = isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first, 0), relative(edges.table));\n                  annotations.clear(container);\n                  return Response.create(Optional.none(), true);\n                });\n              }, function (_) {\n                return Optional.some(Response.create(Optional.none(), true));\n              });\n            };\n          };\n          if (isDown(keycode) && shiftKey) {\n            return update$1([rc(+1, 0)]);\n          } else if (isUp(keycode) && shiftKey) {\n            return update$1([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update$1([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (isNavigation(keycode) && !shiftKey) {\n            return clearToNavigate;\n          } else {\n            return Optional.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return retrieve$1(container, annotations.selectedSelector).fold(function () {\n          var realEvent = event.raw;\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (!shiftKey) {\n            return Optional.none();\n          }\n          if (isNavigation(keycode)) {\n            return sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Optional.none();\n          }\n        }, Optional.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var external = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      return function (start, finish) {\n        annotations.clearBeforeUpdate(container);\n        identify(start, finish, isRoot).each(function (cellSel) {\n          var boxes = cellSel.boxes.getOr([]);\n          annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);\n          bridge.selectContents(finish);\n          bridge.collapseSelection();\n        });\n      };\n    };\n\n    var remove = function (element, classes) {\n      each$2(classes, function (x) {\n        remove$2(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected);\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected,\n        ephemera.lastSelected,\n        ephemera.firstSelected\n      ]);\n      var clear = function (container) {\n        var sels = descendants(container, ephemera.selectedSelector);\n        each$2(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each$2(cells, addSelectionClass);\n        add(start, ephemera.firstSelected);\n        add(finish, ephemera.lastSelected);\n      };\n      return {\n        clearBeforeUpdate: clear,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera, onSelection, onClear) {\n      var removeSelectionAttributes = function (element) {\n        remove$7(element, ephemera.selected);\n        remove$7(element, ephemera.firstSelected);\n        remove$7(element, ephemera.lastSelected);\n      };\n      var addSelectionAttribute = function (element) {\n        set$2(element, ephemera.selected, '1');\n      };\n      var clear = function (container) {\n        clearBeforeUpdate(container);\n        onClear();\n      };\n      var clearBeforeUpdate = function (container) {\n        var sels = descendants(container, ephemera.selectedSelector + ',' + ephemera.firstSelectedSelector + ',' + ephemera.lastSelectedSelector);\n        each$2(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each$2(cells, addSelectionAttribute);\n        set$2(start, ephemera.firstSelected, '1');\n        set$2(finish, ephemera.lastSelected, '1');\n        onSelection(cells, start, finish);\n      };\n      return {\n        clearBeforeUpdate: clearBeforeUpdate,\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var getUpOrLeftCells = function (grid, selectedCells) {\n      var upGrid = grid.slice(0, selectedCells[selectedCells.length - 1].row + 1);\n      var upDetails = toDetailList(upGrid);\n      return bind$2(upDetails, function (detail) {\n        var slicedCells = detail.cells.slice(0, selectedCells[selectedCells.length - 1].column + 1);\n        return map$1(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getDownOrRightCells = function (grid, selectedCells) {\n      var downGrid = grid.slice(selectedCells[0].row + selectedCells[0].rowspan - 1, grid.length);\n      var downDetails = toDetailList(downGrid);\n      return bind$2(downDetails, function (detail) {\n        var slicedCells = detail.cells.slice(selectedCells[0].column + selectedCells[0].colspan - 1, detail.cells.length);\n        return map$1(slicedCells, function (cell) {\n          return cell.element;\n        });\n      });\n    };\n    var getOtherCells = function (table, target, generators) {\n      var warehouse = Warehouse.fromTable(table);\n      var details = onCells(warehouse, target);\n      return details.map(function (selectedCells) {\n        var grid = toGrid(warehouse, generators, false);\n        var upOrLeftCells = getUpOrLeftCells(grid, selectedCells);\n        var downOrRightCells = getDownOrRightCells(grid, selectedCells);\n        return {\n          upOrLeftCells: upOrLeftCells,\n          downOrRightCells: downOrRightCells\n        };\n      });\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var hasInternalTarget = function (e) {\n      return has(SugarElement.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection (editor, lazyResize, selectionTargets) {\n      var onSelection = function (cells, start, finish) {\n        selectionTargets.targets().each(function (targets) {\n          var tableOpt = table(start);\n          tableOpt.each(function (table) {\n            var cloneFormats = getCloneElements(editor);\n            var generators = cellOperations(noop, SugarElement.fromDom(editor.getDoc()), cloneFormats);\n            var otherCells = getOtherCells(table, targets, generators);\n            fireTableSelectionChange(editor, cells, start, finish, otherCells);\n          });\n        });\n      };\n      var onClear = function () {\n        return fireTableSelectionClear(editor);\n      };\n      var annotations = SelectionAnnotation.byAttr(ephemera, onSelection, onClear);\n      editor.on('init', function (_e) {\n        var win = editor.getWin();\n        var body = getBody(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = SugarElement.fromDom(sel.getStart());\n          var end = SugarElement.fromDom(sel.getEnd());\n          var shared = sharedOne(table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            return annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = mouse(win, body, isRoot, annotations);\n        var keyHandlers = keyboard(win, body, isRoot, annotations);\n        var external$1 = external(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw.shiftKey === true;\n        };\n        editor.on('TableSelectorChange', function (e) {\n          return external$1(e.start, e.finish);\n        });\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill) {\n            event.kill();\n          }\n          response.selection.each(function (ns) {\n            var relative = SimSelection.relative(ns.start, ns.finish);\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = fromRawEvent(event);\n          if (wrappedEvent.raw.shiftKey && isNavigation(wrappedEvent.raw.which)) {\n            var rng = editor.selection.getRng();\n            var start = SugarElement.fromDom(rng.startContainer);\n            var end = SugarElement.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = fromRawEvent(event);\n          lazyResize().each(function (resize) {\n            return resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var start = SugarElement.fromDom(rng.startContainer);\n          var end = SugarElement.fromDom(rng.endContainer);\n          var direction = onDirection(ltr, rtl)(SugarElement.fromDom(editor.selection.getStart()));\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            return resize.showBars();\n          });\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          if (global.browser.isEdge() && raw.buttons === 0) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var dragStart = function (_e) {\n          mouseHandlers.clearstate();\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(fromRawEvent(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(fromRawEvent(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(fromRawEvent(e));\n          }\n        };\n        var getDoubleTap = function () {\n          var lastTarget = Cell(SugarElement.fromDom(body));\n          var lastTimeStamp = Cell(0);\n          var touchEnd = function (t) {\n            var target = SugarElement.fromDom(t.target);\n            if (name(target) === 'td' || name(target) === 'th') {\n              var lT = lastTarget.get();\n              var lTS = lastTimeStamp.get();\n              if (eq$1(lT, target) && t.timeStamp - lTS < 300) {\n                t.preventDefault();\n                external$1(target, target);\n              }\n            }\n            lastTarget.set(target);\n            lastTimeStamp.set(t.timeStamp);\n          };\n          return { touchEnd: touchEnd };\n        };\n        var doubleTap = getDoubleTap();\n        editor.on('dragstart', dragStart);\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('touchend', doubleTap.touchEnd);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('NodeChange', syncSelection);\n      });\n      return { clear: annotations.clear };\n    }\n\n    var child = function (scope, selector) {\n      return child$1(scope, selector).isSome();\n    };\n\n    var getSelectionTargets = function (editor, selections) {\n      var targets = Cell(Optional.none());\n      var changeHandlers = Cell([]);\n      var selectionDetails = Optional.none();\n      var isCaption = isTag('caption');\n      var isDisabledForSelection = function (key) {\n        return selectionDetails.forall(function (details) {\n          return !details[key];\n        });\n      };\n      var getStart = function () {\n        return getSelectionCellOrCaption(getSelectionStart(editor), getIsRoot(editor));\n      };\n      var getEnd = function () {\n        return getSelectionCellOrCaption(getSelectionEnd(editor), getIsRoot(editor));\n      };\n      var findTargets = function () {\n        return getStart().bind(function (startCellOrCaption) {\n          return flatten(lift2(table(startCellOrCaption), getEnd().bind(table), function (startTable, endTable) {\n            if (eq$1(startTable, endTable)) {\n              if (isCaption(startCellOrCaption)) {\n                return Optional.some(noMenu(startCellOrCaption));\n              } else {\n                return Optional.some(forMenu(selections, startTable, startCellOrCaption));\n              }\n            }\n            return Optional.none();\n          }));\n        });\n      };\n      var getExtractedDetails = function (targets) {\n        var tableOpt = table(targets.element);\n        return tableOpt.map(function (table) {\n          var warehouse = Warehouse.fromTable(table);\n          var selectedCells = onCells(warehouse, targets).getOr([]);\n          var locked = foldl(selectedCells, function (acc, cell) {\n            if (cell.isLocked) {\n              acc.onAny = true;\n              if (cell.column === 0) {\n                acc.onFirst = true;\n              } else if (cell.column + cell.colspan >= warehouse.grid.columns) {\n                acc.onLast = true;\n              }\n            }\n            return acc;\n          }, {\n            onAny: false,\n            onFirst: false,\n            onLast: false\n          });\n          return {\n            mergeable: onUnlockedMergable(warehouse, targets).isSome(),\n            unmergeable: onUnlockedUnmergable(warehouse, targets).isSome(),\n            locked: locked\n          };\n        });\n      };\n      var resetTargets = function () {\n        targets.set(cached(findTargets)());\n        selectionDetails = targets.get().bind(getExtractedDetails);\n        each$2(changeHandlers.get(), function (handler) {\n          return handler();\n        });\n      };\n      var setupHandler = function (handler) {\n        handler();\n        changeHandlers.set(changeHandlers.get().concat([handler]));\n        return function () {\n          changeHandlers.set(filter$2(changeHandlers.get(), function (h) {\n            return h !== handler;\n          }));\n        };\n      };\n      var onSetup = function (api, isDisabled) {\n        return setupHandler(function () {\n          return targets.get().fold(function () {\n            api.setDisabled(true);\n          }, function (targets) {\n            api.setDisabled(isDisabled(targets));\n          });\n        });\n      };\n      var onSetupWithToggle = function (api, isDisabled, isActive) {\n        return setupHandler(function () {\n          return targets.get().fold(function () {\n            api.setDisabled(true);\n            api.setActive(false);\n          }, function (targets) {\n            api.setDisabled(isDisabled(targets));\n            api.setActive(isActive(targets));\n          });\n        });\n      };\n      var isDisabledFromLocked = function (lockedDisable) {\n        return selectionDetails.exists(function (details) {\n          return details.locked[lockedDisable];\n        });\n      };\n      var onSetupTable = function (api) {\n        return onSetup(api, function (_) {\n          return false;\n        });\n      };\n      var onSetupCellOrRow = function (api) {\n        return onSetup(api, function (targets) {\n          return isCaption(targets.element);\n        });\n      };\n      var onSetupColumn = function (lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupPasteable = function (getClipboardData) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone();\n          });\n        };\n      };\n      var onSetupPasteableColumn = function (getClipboardData, lockedDisable) {\n        return function (api) {\n          return onSetup(api, function (targets) {\n            return isCaption(targets.element) || getClipboardData().isNone() || isDisabledFromLocked(lockedDisable);\n          });\n        };\n      };\n      var onSetupMergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('mergeable');\n        });\n      };\n      var onSetupUnmergeable = function (api) {\n        return onSetup(api, function (_targets) {\n          return isDisabledForSelection('unmergeable');\n        });\n      };\n      var onSetupTableWithCaption = function (api) {\n        return onSetupWithToggle(api, never, function (targets) {\n          var tableOpt = table(targets.element, getIsRoot(editor));\n          return tableOpt.exists(function (table) {\n            return child(table, 'caption');\n          });\n        });\n      };\n      var onSetupTableHeaders = function (command, headerType) {\n        return function (api) {\n          return onSetupWithToggle(api, function (targets) {\n            return isCaption(targets.element);\n          }, function () {\n            return editor.queryCommandValue(command) === headerType;\n          });\n        };\n      };\n      var onSetupTableRowHeaders = onSetupTableHeaders('mceTableRowType', 'header');\n      var onSetupTableColumnHeaders = onSetupTableHeaders('mceTableColType', 'th');\n      editor.on('NodeChange ExecCommand TableSelectorChange', resetTargets);\n      return {\n        onSetupTable: onSetupTable,\n        onSetupCellOrRow: onSetupCellOrRow,\n        onSetupColumn: onSetupColumn,\n        onSetupPasteable: onSetupPasteable,\n        onSetupPasteableColumn: onSetupPasteableColumn,\n        onSetupMergeable: onSetupMergeable,\n        onSetupUnmergeable: onSetupUnmergeable,\n        resetTargets: resetTargets,\n        onSetupTableWithCaption: onSetupTableWithCaption,\n        onSetupTableRowHeaders: onSetupTableRowHeaders,\n        onSetupTableColumnHeaders: onSetupTableColumnHeaders,\n        targets: targets.get\n      };\n    };\n\n    var addButtons = function (editor, selections, selectionTargets, clipboard) {\n      editor.ui.registry.addMenuButton('table', {\n        tooltip: 'Table',\n        icon: 'table',\n        fetch: function (callback) {\n          return callback('inserttable | cell row column | advtablesort | tableprops deletetable');\n        }\n      });\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      editor.ui.registry.addButton('tableprops', {\n        tooltip: 'Table properties',\n        onAction: cmd('mceTableProps'),\n        icon: 'table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tabledelete', {\n        tooltip: 'Delete table',\n        onAction: cmd('mceTableDelete'),\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable\n      });\n      editor.ui.registry.addButton('tablecellprops', {\n        tooltip: 'Cell properties',\n        onAction: cmd('mceTableCellProps'),\n        icon: 'table-cell-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablemergecells', {\n        tooltip: 'Merge cells',\n        onAction: cmd('mceTableMergeCells'),\n        icon: 'table-merge-cells',\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addButton('tablesplitcells', {\n        tooltip: 'Split cell',\n        onAction: cmd('mceTableSplitCells'),\n        icon: 'table-split-cells',\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      editor.ui.registry.addButton('tableinsertrowbefore', {\n        tooltip: 'Insert row before',\n        onAction: cmd('mceTableInsertRowBefore'),\n        icon: 'table-insert-row-above',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertrowafter', {\n        tooltip: 'Insert row after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        icon: 'table-insert-row-after',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tabledeleterow', {\n        tooltip: 'Delete row',\n        onAction: cmd('mceTableDeleteRow'),\n        icon: 'table-delete-row',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablerowprops', {\n        tooltip: 'Row properties',\n        onAction: cmd('mceTableRowProps'),\n        icon: 'table-row-properties',\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tableinsertcolbefore', {\n        tooltip: 'Insert column before',\n        onAction: cmd('mceTableInsertColBefore'),\n        icon: 'table-insert-column-before',\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addButton('tableinsertcolafter', {\n        tooltip: 'Insert column after',\n        onAction: cmd('mceTableInsertColAfter'),\n        icon: 'table-insert-column-after',\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addButton('tabledeletecol', {\n        tooltip: 'Delete column',\n        onAction: cmd('mceTableDeleteCol'),\n        icon: 'table-delete-column',\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecutrow', {\n        tooltip: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablecopyrow', {\n        tooltip: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addButton('tablepasterowbefore', {\n        tooltip: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablepasterowafter', {\n        tooltip: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addButton('tablecutcol', {\n        tooltip: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablecopycol', {\n        tooltip: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addButton('tablepastecolbefore', {\n        tooltip: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addButton('tablepastecolafter', {\n        tooltip: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      editor.ui.registry.addButton('tableinsertdialog', {\n        tooltip: 'Insert table',\n        onAction: cmd('mceInsertTable'),\n        icon: 'table'\n      });\n      var tableClassList = filterNoneItem(getTableClassList(editor));\n      if (tableClassList.length !== 0) {\n        editor.ui.registry.addMenuButton('tableclass', {\n          icon: 'table-classes',\n          tooltip: 'Table styles',\n          fetch: generateMenuItemsCallback(editor, selections, tableClassList, 'tableclass', function (value) {\n            return editor.execCommand('mceTableToggleClass', false, value);\n          }),\n          onSetup: selectionTargets.onSetupTable\n        });\n      }\n      var tableCellClassList = filterNoneItem(getCellClassList(editor));\n      if (tableCellClassList.length !== 0) {\n        editor.ui.registry.addMenuButton('tablecellclass', {\n          icon: 'table-cell-classes',\n          tooltip: 'Cell styles',\n          fetch: generateMenuItemsCallback(editor, selections, tableCellClassList, 'tablecellclass', function (value) {\n            return editor.execCommand('mceTableCellToggleClass', false, value);\n          }),\n          onSetup: selectionTargets.onSetupCellOrRow\n        });\n      }\n      editor.ui.registry.addMenuButton('tablecellvalign', {\n        icon: 'vertical-align',\n        tooltip: 'Vertical align',\n        fetch: generateMenuItemsCallback(editor, selections, verticalAlignValues, 'tablecellverticalalign', applyTableCellStyle(editor, 'vertical-align')),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuButton('tablecellborderwidth', {\n        icon: 'border-width',\n        tooltip: 'Border width',\n        fetch: generateMenuItemsCallback(editor, selections, getTableBorderWidths(editor), 'tablecellborderwidth', applyTableCellStyle(editor, 'border-width')),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuButton('tablecellborderstyle', {\n        icon: 'border-style',\n        tooltip: 'Border style',\n        fetch: generateMenuItemsCallback(editor, selections, getTableBorderStyles(editor), 'tablecellborderstyle', applyTableCellStyle(editor, 'border-style')),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addToggleButton('tablecaption', {\n        tooltip: 'Table caption',\n        onAction: cmd('mceTableToggleCaption'),\n        icon: 'table-caption',\n        onSetup: selectionTargets.onSetupTableWithCaption\n      });\n      editor.ui.registry.addMenuButton('tablecellbackgroundcolor', {\n        icon: 'cell-background-color',\n        tooltip: 'Background color',\n        fetch: function (callback) {\n          return callback(buildColorMenu(editor, getTableBackgroundColorMap(editor), 'background-color'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuButton('tablecellbordercolor', {\n        icon: 'cell-border-color',\n        tooltip: 'Border color',\n        fetch: function (callback) {\n          return callback(buildColorMenu(editor, getTableBorderColorMap(editor), 'border-color'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addToggleButton('tablerowheader', {\n        tooltip: 'Row header',\n        icon: 'table-top-header',\n        onAction: changeRowHeader(editor),\n        onSetup: selectionTargets.onSetupTableRowHeaders\n      });\n      editor.ui.registry.addToggleButton('tablecolheader', {\n        tooltip: 'Column header',\n        icon: 'table-left-header',\n        onAction: changeColumnHeader(editor),\n        onSetup: selectionTargets.onSetupTableColumnHeaders\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        return editor.dom.is(table, 'table') && editor.getBody().contains(table);\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.ui.registry.addContextToolbar('table', {\n          predicate: isTable,\n          items: toolbar,\n          scope: 'node',\n          position: 'node'\n        });\n      }\n    };\n\n    var addMenuItems = function (editor, selections, selectionTargets, clipboard) {\n      var cmd = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      var insertTableAction = function (data) {\n        editor.execCommand('mceInsertTable', false, {\n          rows: data.numRows,\n          columns: data.numColumns\n        });\n      };\n      var tableProperties = {\n        text: 'Table properties',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        icon: 'table-delete-table',\n        onSetup: selectionTargets.onSetupTable,\n        onAction: cmd('mceTableDelete')\n      };\n      editor.ui.registry.addMenuItem('tableinsertrowbefore', {\n        text: 'Insert row before',\n        icon: 'table-insert-row-above',\n        onAction: cmd('mceTableInsertRowBefore'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tableinsertrowafter', {\n        text: 'Insert row after',\n        icon: 'table-insert-row-after',\n        onAction: cmd('mceTableInsertRowAfter'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tabledeleterow', {\n        text: 'Delete row',\n        icon: 'table-delete-row',\n        onAction: cmd('mceTableDeleteRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablerowprops', {\n        text: 'Row properties',\n        icon: 'table-row-properties',\n        onAction: cmd('mceTableRowProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecutrow', {\n        text: 'Cut row',\n        icon: 'cut-row',\n        onAction: cmd('mceTableCutRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablecopyrow', {\n        text: 'Copy row',\n        icon: 'duplicate-row',\n        onAction: cmd('mceTableCopyRow'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablepasterowbefore', {\n        text: 'Paste row before',\n        icon: 'paste-row-before',\n        onAction: cmd('mceTablePasteRowBefore'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      editor.ui.registry.addMenuItem('tablepasterowafter', {\n        text: 'Paste row after',\n        icon: 'paste-row-after',\n        onAction: cmd('mceTablePasteRowAfter'),\n        onSetup: selectionTargets.onSetupPasteable(clipboard.getRows)\n      });\n      var row = {\n        type: 'nestedmenuitem',\n        text: 'Row',\n        getSubmenuItems: constant('tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter')\n      };\n      editor.ui.registry.addMenuItem('tableinsertcolumnbefore', {\n        text: 'Insert column before',\n        icon: 'table-insert-column-before',\n        onAction: cmd('mceTableInsertColBefore'),\n        onSetup: selectionTargets.onSetupColumn('onFirst')\n      });\n      editor.ui.registry.addMenuItem('tableinsertcolumnafter', {\n        text: 'Insert column after',\n        icon: 'table-insert-column-after',\n        onAction: cmd('mceTableInsertColAfter'),\n        onSetup: selectionTargets.onSetupColumn('onLast')\n      });\n      editor.ui.registry.addMenuItem('tabledeletecolumn', {\n        text: 'Delete column',\n        icon: 'table-delete-column',\n        onAction: cmd('mceTableDeleteCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecutcolumn', {\n        text: 'Cut column',\n        icon: 'cut-column',\n        onAction: cmd('mceTableCutCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablecopycolumn', {\n        text: 'Copy column',\n        icon: 'duplicate-column',\n        onAction: cmd('mceTableCopyCol'),\n        onSetup: selectionTargets.onSetupColumn('onAny')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnbefore', {\n        text: 'Paste column before',\n        icon: 'paste-column-before',\n        onAction: cmd('mceTablePasteColBefore'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onFirst')\n      });\n      editor.ui.registry.addMenuItem('tablepastecolumnafter', {\n        text: 'Paste column after',\n        icon: 'paste-column-after',\n        onAction: cmd('mceTablePasteColAfter'),\n        onSetup: selectionTargets.onSetupPasteableColumn(clipboard.getColumns, 'onLast')\n      });\n      var column = {\n        type: 'nestedmenuitem',\n        text: 'Column',\n        getSubmenuItems: constant('tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter')\n      };\n      editor.ui.registry.addMenuItem('tablecellprops', {\n        text: 'Cell properties',\n        icon: 'table-cell-properties',\n        onAction: cmd('mceTableCellProps'),\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addMenuItem('tablemergecells', {\n        text: 'Merge cells',\n        icon: 'table-merge-cells',\n        onAction: cmd('mceTableMergeCells'),\n        onSetup: selectionTargets.onSetupMergeable\n      });\n      editor.ui.registry.addMenuItem('tablesplitcells', {\n        text: 'Split cell',\n        icon: 'table-split-cells',\n        onAction: cmd('mceTableSplitCells'),\n        onSetup: selectionTargets.onSetupUnmergeable\n      });\n      var cell = {\n        type: 'nestedmenuitem',\n        text: 'Cell',\n        getSubmenuItems: constant('tablecellprops tablemergecells tablesplitcells')\n      };\n      if (hasTableGrid(editor) === false) {\n        editor.ui.registry.addMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          onAction: cmd('mceInsertTable')\n        });\n      } else {\n        editor.ui.registry.addNestedMenuItem('inserttable', {\n          text: 'Table',\n          icon: 'table',\n          getSubmenuItems: function () {\n            return [{\n                type: 'fancymenuitem',\n                fancytype: 'inserttable',\n                onAction: insertTableAction\n              }];\n          }\n        });\n      }\n      editor.ui.registry.addMenuItem('inserttabledialog', {\n        text: 'Insert table',\n        icon: 'table',\n        onAction: cmd('mceInsertTable')\n      });\n      editor.ui.registry.addMenuItem('tableprops', tableProperties);\n      editor.ui.registry.addMenuItem('deletetable', deleteTable);\n      editor.ui.registry.addNestedMenuItem('row', row);\n      editor.ui.registry.addNestedMenuItem('column', column);\n      editor.ui.registry.addNestedMenuItem('cell', cell);\n      editor.ui.registry.addContextMenu('table', {\n        update: function () {\n          selectionTargets.resetTargets();\n          return selectionTargets.targets().fold(constant(''), function (targets) {\n            if (name(targets.element) === 'caption') {\n              return 'tableprops deletetable';\n            } else {\n              return 'cell row column | advtablesort | tableprops deletetable';\n            }\n          });\n        }\n      });\n      var tableClassList = filterNoneItem(getTableClassList(editor));\n      if (tableClassList.length !== 0) {\n        editor.ui.registry.addNestedMenuItem('tableclass', {\n          icon: 'table-classes',\n          text: 'Table styles',\n          getSubmenuItems: function () {\n            return buildMenuItems(editor, selections, tableClassList, 'tableclass', function (value) {\n              return editor.execCommand('mceTableToggleClass', false, value);\n            });\n          },\n          onSetup: selectionTargets.onSetupTable\n        });\n      }\n      var tableCellClassList = filterNoneItem(getCellClassList(editor));\n      if (tableCellClassList.length !== 0) {\n        editor.ui.registry.addNestedMenuItem('tablecellclass', {\n          icon: 'table-cell-classes',\n          text: 'Cell styles',\n          getSubmenuItems: function () {\n            return buildMenuItems(editor, selections, tableCellClassList, 'tablecellclass', function (value) {\n              return editor.execCommand('mceTableCellToggleClass', false, value);\n            });\n          },\n          onSetup: selectionTargets.onSetupCellOrRow\n        });\n      }\n      editor.ui.registry.addNestedMenuItem('tablecellvalign', {\n        icon: 'vertical-align',\n        text: 'Vertical align',\n        getSubmenuItems: function () {\n          return buildMenuItems(editor, selections, verticalAlignValues, 'tablecellverticalalign', applyTableCellStyle(editor, 'vertical-align'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addNestedMenuItem('tablecellborderwidth', {\n        icon: 'border-width',\n        text: 'Border width',\n        getSubmenuItems: function () {\n          return buildMenuItems(editor, selections, getTableBorderWidths(editor), 'tablecellborderwidth', applyTableCellStyle(editor, 'border-width'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addNestedMenuItem('tablecellborderstyle', {\n        icon: 'border-style',\n        text: 'Border style',\n        getSubmenuItems: function () {\n          return buildMenuItems(editor, selections, getTableBorderStyles(editor), 'tablecellborderstyle', applyTableCellStyle(editor, 'border-style'));\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addToggleMenuItem('tablecaption', {\n        icon: 'table-caption',\n        text: 'Table caption',\n        onAction: cmd('mceTableToggleCaption'),\n        onSetup: selectionTargets.onSetupTableWithCaption\n      });\n      editor.ui.registry.addNestedMenuItem('tablecellbackgroundcolor', {\n        icon: 'cell-background-color',\n        text: 'Background color',\n        getSubmenuItems: function () {\n          return buildColorMenu(editor, getTableBackgroundColorMap(editor), 'background-color');\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addNestedMenuItem('tablecellbordercolor', {\n        icon: 'cell-border-color',\n        text: 'Border color',\n        getSubmenuItems: function () {\n          return buildColorMenu(editor, getTableBorderColorMap(editor), 'border-color');\n        },\n        onSetup: selectionTargets.onSetupCellOrRow\n      });\n      editor.ui.registry.addToggleMenuItem('tablerowheader', {\n        text: 'Row header',\n        icon: 'table-top-header',\n        onAction: changeRowHeader(editor),\n        onSetup: selectionTargets.onSetupTableRowHeaders\n      });\n      editor.ui.registry.addToggleMenuItem('tablecolheader', {\n        text: 'Column header',\n        icon: 'table-left-header',\n        onAction: changeColumnHeader(editor),\n        onSetup: selectionTargets.onSetupTableColumnHeaders\n      });\n    };\n\n    var Plugin = function (editor) {\n      var selections = Selections(function () {\n        return getBody(editor);\n      }, function () {\n        return getSelectionCell(getSelectionStart(editor), getIsRoot(editor));\n      }, ephemera.selectedSelector);\n      var selectionTargets = getSelectionTargets(editor, selections);\n      var resizeHandler = getResizeHandler(editor);\n      var cellSelection = CellSelection(editor, resizeHandler.lazyResize, selectionTargets);\n      var actions = TableActions(editor, cellSelection, resizeHandler.lazyWire);\n      var clipboard = Clipboard();\n      registerCommands(editor, actions, cellSelection, selections, clipboard);\n      registerQueryCommands(editor, actions, selections);\n      registerEvents(editor, selections, actions);\n      addMenuItems(editor, selections, selectionTargets, clipboard);\n      addButtons(editor, selections, selectionTargets, clipboard);\n      addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(ephemera.firstSelected);\n        editor.serializer.addTempAttr(ephemera.lastSelected);\n        registerFormats(editor);\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          handle$1(e, editor, cellSelection);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n      });\n      return getApi(editor, clipboard, resizeHandler, selectionTargets);\n    };\n    function Plugin$1 () {\n      global$3.add('table', Plugin);\n    }\n\n    Plugin$1();\n\n}());\n"],"names":["isType$1","type","value","t","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","eq$2","a","isString","isObject","isArray","isNull","isBoolean","isUndefined","undefined","isNonNullable","isNullable","isFunction","isNumber","noop","constant","identity","tripleEquals","b","curry","fn","initialArgs","_i","arguments","length","restArgs","all","concat","apply","call","id","not","f","never","always","none$2","NONE","fold","n","_s","isSome","isNone","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","me","s","Optional","none","from","nativeSlice","slice","nativeIndexOf","indexOf","nativePush","push","contains$2","xs","ts","pred","i","len","range$1","num","r","map$1","each$2","partition","pass","fail","filter$2","foldr","acc","eachr","foldl","find$1","until","findUntil","findIndex","flatten$1","bind$2","mapToObject","pure","get$d","head","last$2","findMap","arr","__assign","Object","assign","p","hasOwnProperty","this","__spreadArray","to","pack","ar","l","cached","called","args","unknown$2","nu$2","major","minor","Version","nu","detect","versionRegexes","agent","cleanedAgent","toLowerCase","regexes","test","firstMatch","group","Number","replace","find","unknown","detect$5","candidates","userAgent","candidate","search","checkRange","str","substr","start","contains$1","startsWith","prefix","endsWith","suffix","trim","blank","isNotEmpty","normalVersionRegex","checkContains","target","uastring","browsers","brand","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$1","info","current","version","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","ie","windows","android","linux","solaris","freebsd","chromeos","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","ios","osx","PlatformDetection","userAgentDataOpt","mediaMatch","browser","userAgentData","brands","uaBrand","lcBrand","_a","parseInt","detectBrowser$1","detectBrowser","os","detectOs","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","window","matchMedia","matches","platform","navigator","detect$3","fromDom$1","node","dom","SugarElement","fromHtml","html","scope","div","document","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromTag","tag","fromText","text","createTextNode","fromDom","fromPoint","docElm","y","elementFromPoint","is$2","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","one","base","querySelector","eq$1","e1","e2","ieContains","match","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","contains","d1","d2","regularContains","is$1","keys","each$1","obj","props","k","tupleMap","v","tuple","filter$1","onTrue","onFalse","internalFilter","objAcc","mapToArray","values","size","get$c","key","has$1","hasNonNullableKey","validSectionList","detail","rowspan","colspan","rowdetail","cells","section","elementnew","isNew","isLocked","rowcells","Function","nodeName","type$1","isType","isComment","isElement","isText","isDocument","isDocumentFragment","isTag","e","owner","ownerDocument","documentOrOwner","dos","parent","parentNode","parents","isRoot","stop","ret","rawParent","prevSibling","previousSibling","nextSibling","children$3","child$3","index","cs","supported","Element","attachShadow","getRootNode","isSupported$1","getShadowRoot","host","getShadowHost","isOpenShadowHost","shadowRoot","inBody","fbc","fab","doc","body","getBody$1","descendants$1","predicate","result","ancestors$3","ancestors$4","children$1","children$2","descendants","querySelectorAll","all$1","ClosestOrAncestor","is","ancestor","ancestor$2","el","ancestor$1","child$1","child$2","descendant","closest$1","rawSet","setAttribute","set$2","setAll$1","attrs","get$b","getAttribute","getOpt","remove$7","removeAttribute","clone$2","attributes","attr","lhs","rhs","comparator","left","cat","lift2","oa","ob","someIf","isSupported","style","getPropertyValue","internalSet","property","setProperty","set$1","setAll","css","get$a","getComputedStyle","getUnsafeProperty","getRaw$2","raw","remove$6","removeProperty","internalRemove","getAttrValue","cell","fallback","getSpan","hasColspan","cellOrCol","hasRowspan","getCssValue","minWidth","minHeight","firstLayer","filterFirstLayer","tags","join","elm","lookup","cells$1","columns$1","columnGroups","columnGroup","table","rows$1","fromRowsOrColGroups","elems","getSection","row","column","getParentSection","parentName","isValidSection","fromTable$1","rows","addCells","gridRow","existingCells","before","after","newCells","setCells","addCell","mutateCell","getCell","getCellElement","cellLength","extractGridDetails","grid","cols","clone$1","cloneRow","cloneCell","LOCKED_COL_ATTR","getLockedColumnsFromTable","lockedColStr","lockedCols","getLockedColumnsFromGrid","locked","idx","lockedArr","_val","copy","sort","sort$1","filterItems","warehouse","generate$1","list","access","lockedColumns","rowData","maxRows","maxColumns","rowCount","colgroupRows","currentRow","rowCell","extended","occupiedColumnPosition","occupiedRowPosition","columnPosition","newpos","Math","max","_b","columns","columnsGroup","columnIndex","colIndex","columnext","generateColumns","colgroup$1","colgroup","colgroups","grid$1","Warehouse","fromTable","generate","getAt","findItem","item","filtered","justCells","w","justColumns","hasColumns","getColumnAt","inSelection","bounds","leftEdge","rightEdge","topEdge","bottomEdge","finishCol","startCol","finishRow","startRow","isWithin","getAnyBox","startCell","finishCell","startCoords","finishCoords","sc","fc","detailA","detailB","min","getBox$1","isRect","detailIsWithin","j","isRectangular","intercepts$1","finish","inside","parentCell","innerCell","c1","c2","moveBy","deltaRow","deltaColumn","d","moveBy$1","getWarehouse","intercepts","first","last","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","before$4","marker","insertBefore","after$5","append$1","prepend","firstChild$1","firstChild","appendChild","wrap","wrapper","after$4","elements","append","empty","textContent","rogue","remove$5","removeChild","unwrap","children","api$2","getOption","nodeValue","get","set","NodeValue","get$9","TagBoundaries","DomUniverse","up","closest","down","styles","getRaw","remove","copyTo","source","destination","as","insert","afterAll","appendAll","create","clone","cloneNode","comparePosition","other","isSpecial","getLanguage","getText","setText","isBoundary","isEmptyTag","isNonEditable","eq","decimalDigits","exponentPart","opt","unsignedDecimalLiteral","unsafeOne","universe","look","tail","commonElement","end","sharedOne$1","ancestors$1","ps1","ps2","prune","path","ind","pruned1","pruned2","shared","firstpath","secondpath","universe$3","sharedOne","_universe","lookupTable","container","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","ancestors","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve$1","sels","getEdges","firstSelectedSelector","lastSelectedSelector","shiftSelection","box","getLast","identified","expandTo","retrieve","retrieveBox","edges","sectionSelector","firstAncestor","lastAncestor","fA","lA","getBox","Adt","cases","constructors","adt","acase","count","keys$1","argLength","branches","branchKeys","reqKey","foldArgs","log","label","params","multiple","single","cata$2","subject","onNone","onMultiple","onSingle","none$1","global$3","tinymce","util","Tools","resolve","original","isDeep","shallow","deep","shallowAs","Dimension","getOffset","parseFloat","aggregate","properties","val","isNaN","h","getOuter","cumulativeInclusions","needManualCalc","toNumber","px","toFloat","getProp","getBoxSizing","calcContentBoxSize","upper","lower","getCalculatedWidth","boxSizing","width","getBoundingClientRect","offsetWidth","api$1","get$8","getOuter$2","getInner","getRuntime$1","isValidCell","rowsArr","col","decide","getBlock","isValid","getFallback","inBlock","c","deduce","rest","reverse","aa","delta","next","extras","abs","onDirection","isLtr","isRtl","getDirection","api","height","offsetHeight","get$7","getOuter$1","getRuntime","getCalculatedHeight","top","translate","SugarPosition","firstDefinedOrZero","absolute","win","defaultView","documentElement","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","boxPosition","rowInfo","colInfo","rtlEdge","ltrEdge","getLeftEdge","getRightEdge","getTop$1","getTopEdge","getBottomEdge","findPositions","getInnerEdge","getOuterEdge","array","lines","cellOption","lastLine","positions","optElements","ltr$1","rtl$1","step","detect$2","amount","units","unsupportedLength","fixed","relative","pattern","input","dot","RegExp","parse","accepted","exec","unitRaw","unit","check","isUnit","rPercentageBasedSizeRegex","rPixelBasedSizeRegex","isCol$2","getPercentSize","outerGetter","innerGetter","relativeParent","parentElement","setPixelWidth","setPercentageWidth","setHeight","normalizePixelSize","getter","setter","number","newSize","total","floor","convert","getTotalHeight","getHeightValue","getRaw$1","prop","getRawWidth$1","getPercentageWidth","getPixelWidth$1","getHeight","get$6","setGenericWidth","getPercentTableWidth","percentageBasedSizeRegex","isCol$1","getRawW","getRawH","getDimension","cellOpt","backups","getWidthFrom","getWidth","columnCells","justCols","pos","colFilter","supportsColWidths","isValidColumn","getDeduced","deduced","getPixelWidths","tableSize","minCellWidth","getHeightFrom","direction","widthLookup","noneSize","zero","pixelWidth","getWidths","getCellDelta","singleColumnWidth","setElementWidth","adjustTableWidth","isRelative","percentageSize","getFloatWidth","cellWidth","getPercentageWidths","_delta","currentWidth","pixelSize","newWidth","TableSize","chooseSize","makeCell","seenSelected","rowIndex","td","extract$1","selectedSelector","isSelected","replica","replicaHouse","replicaStats","house","totalColumns","minRow","minCol","maxRow","maxCol","allCells","selectedCells","endRow","endCol","statsStruct","findSelectedStats","unselectedCells","stats","totalRows","fillInGaps","widthDelta","colWidths","allColsWidth","selectedColsWidth","getTableWidthDelta","emptyRows","clean","getEnd","elementsWithCursorPosition","isCursorPosition","descend","child_1","res","last$1","descendantRtl","child","transferableAttributes","createCell","createCol","createColgroup","createRow$1","replace$1","cloneChildren","copy$1","pasteReplace","cellOperations","mutate","formatsToClone","cloneCss","prev","sourceDom","targetDom","cssText","formats","lastNode","oldCell","newCell","firstText","formatSelector","clonedFormat","cloneFormats","validAttributes","attributeName","attribute","cloneAppropriateAttributes","colGap","gap","paste$1","nodes","getBody","editor","getPixelWidth","getPixelHeight","addPxSuffix","removeDataStyle","removeStyleAttribute","getSelectionStart","selection","getStart","selections","unmergable","hasSpan","span","mergable","ephemera","strSelected","strFirstSelected","strLastSelected","selected","firstSelected","lastSelected","forMenu","getSelectionFromSelector","initCell","cellName","getSelectionCellOrCaption","getSelectionCell","getCellsFromSelection","registerEvents","actions","on","preventDefault","extractSelected","content","format","innerText","getTextContent","serializer","serialize","serializeElements","paste","isTable","getDoc","generators","targets","clipboard","pasteCells","focus","adt$7","only","middle","right","ColumnContext","determine","resize","context","neighbours","calcLeftEdgeDeltas","calcMiddleDeltas","calcRightEdgeDeltas","measures","recalculateHeightForCells","heights","recalculate","widths","groups","recalculateWidthForColumns","recalculateWidthForCells","recalculateAndApply","newSizes","adjustWidth","resizing","isLastColumn","clampedStep","clampTableDelta","deltas","newWidths","dx","resizeTable","adjustHeight","getPixelHeights","newHeights","dy","newCellSizes","newRowSizes","matchRowHeight","surround","sizes","startIndex","endIndex","results","clampDeltaHelper","minCellSize","diff","clampNegativeDelta","clampDelta","calcRelativeDeltas","ratio","newThis","clampedDelta","calcFixedDeltas","resizer","_prev","calcRedestributedWidths","totalWidth","pixelDelta","ratio_1","preserveTable","maxDelta","_index","_minCellSize","_totalWidth","_pixelDelta","_isRelative","ResizeWire","isResizable","view","origin","editable","adt$6","invalid","pixels","percent","validateFor","rawAmount","substring","Size","redistributeValues","newWidthType","newTotalWidth","scale","pc","redistributeToPx","_pc","redistributeToPercent","redistribute$1","newType","floats","redistributeEmpty","normalize","sum","add$3","scan","remainder","floored","roundDown","output","round","validate","getUnit","redistribute","optWidth","optHeight","widthUnit","oldWidths","getRawWidths","nuWidths","redistributeToColumns","redistributeToW","newHeight","hUnit","totalHeight","oldHeights","getRawHeights","redistributeToH","isPercentSizing","isPixelSizing","isNoneSizing","getGridSize","Event","fields","handlers","handler","unbind","trigger","event","create$4","typeDefs","registry","baseWith","handleUnsupported","required","sorted","validateStrArr","req","reqMessage","invalidKeys","incorrect","invalidTypeMessage","handleExact","unsupported","unsuppMessage","exactly","DragMode","DragSink","DragApi","InDrag","previous","events","move","onEvent","mode","extract","data","offset","old","compare","update","reset","Movement","noDragState","inDragState","dragState","off","isOn","setup","mutation","settings","rate","timer","cancel","active","movement","drop","sink","throttledDrop","clearTimeout","throttle","setTimeout","runIfActive","forceDrop","delayDrop","go","destroy","fromRawEvent$1","rawEvent","fa","fb","composed","composedPath","getOriginalEventTarget","stopPropagation","prevent","kill","mkEvent","clientX","clientY","binder","useCapture","wrapped","handle$2","addEventListener","removeEventListener","bind$1","fromRawEvent","read","split","supports","classList","add$1","clazz","add$2","add","has","namespace","dashNamespace","styles$1","resolve$1","MouseDrag","dragApi","blocker","options","layerClass","position","Blocker","mdown","mup","mmove","mout","isEditable$1","assumeEditable","isContentEditable","contentEditable","BarMutation","drag","delegate","Mutation","xDelta","yDelta","resizeBar","resizeRowBar","resizeColBar","wire","drawBar","cpOption","cp","bar","refreshCol","colPositions","tableHeight","colBar","refreshRow","rowPositions","tableWidth","rowBar","refreshGrid","warhouse","resizableRowBars","resizableRows","resizableRowPositions","_pos","barIndex","resizableColBars","resizableCols","colElmOpt","resizableColumns","resizableColPositions","refresh","bars","hide","show","resizeBarDragging","BarManager","transform$1","hoverTable","getResizer","_dataRow","_dataCol","currentCol","getDelta","dir","startAdjust","mousedown","isColBar","mouseover","tbl","hideBars","showBars","TableResize","lazySizing","hdirection","vdirection","manager","beforeResize","afterResize","startDrag","_event","fireNewRow","fire","fireNewCell","fireTableModified","styleModified","structure","structureModified","styleAndStructureModified","defaultStyles","defaultCellBorderWidths","title","defaultCellBorderStyles","defaultAttributes","border","defaultColumnResizingBehaviour","getTableSizingMode","getParam","getTableResponseWidth","getTableBorderWidths","getTableBorderStyles","getDefaultAttributes","getDefaultStyles","isPixelsForced","parentBlock","getParent","isBlock","contentWidth","isResponsiveForced","_value","determineDefaultStyles","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","shouldStyleWithCss","getCellClassList","getTableClassList","isPercentagesForced","useColumnGroup","getTableHeaderType","defaultValue","getColumnResizingBehaviour","givenMode","isPreserveTableColumnResizing","isResizeTableColumnResizing","getCloneElements","cloneElements","getTableBackgroundColorMap","getTableBorderColorMap","get$4","cleanupLegacyAttributes","enforcePercentage","enforcePixels","getPixelTableWidth","enforceNone","rowElements","createContainer","padding","margin","barResizerPrefix","getResizeHandler","startW","startRawW","selectionRng","lazyResize","lazyResizingBehaviour","afterCornerResize","isRightEdgeResize","getNumColumns","isPercentage$1","percentW","isPixel","computedWidth","syncPixels","rawWire","inline","get$3","objectResizing","hasObjectResizing","hasTableResizeBars","sz","getRng","rawTable","fireObjectResizeStart","rng","setRng","fireObjectResized","undoManager","targetElm","select","addClass","getStyle","getAttrib","getRawWidth","origin_1","isReadOnly","lazyWire","remove$1","point","scan$1","toEnd","freefallRtl$2","freefallRtl$1","universe$2","halve","main","getGenericWidth","isHeaderCell","isHeaderCells","getRowHeaderType","isHeaderRow","getRowType$1","findCommonCellType","subType","headerCells","transformCell","substitution","transformRow","fixedCell","mutate$1","sectionCells","TableSection","rowType","findTableRowHeaderType","setIfNot","ignore","insert$1","render$1","newRows","syncRows","gridSection","tr","syncColGroup","colGroup","renderSection","sectionName","newSection","generateSection","sectionElems","renderOrRemoveSection","removeSection","headSection","bodySection","footSection","columnGroupsSection","findDiff","comp","subgrid","getRow","isColRow","getColumn","toDetails","seen","details","updateSeen","rowdetailnew","toGrid","colgroupCols","rowCells","rowDetail","toDetailList","findInWarehouse","extractCells","cell$1","lc","run","operation","adjustment","postAction","genWrappers","behaviours","tableSection","model","fromWarehouse","cursor","out","newElements","tableSizing","sizing","onPasteByEditor","onCells","onUnlockedCells","allUnlocked","isUnlockedTableCell","onUnlockedMergable","_warehouse","onMergable","mergeable","onUnlockedUnmergable","onUnmergable","unmerge","currentCell","isToReplace","splitRows","uniqueCells","replacement","_loop_1","sub","value$1","o","isValue","isError","_opt","_f","_","onValue","mapError","toOptional","message","onError","Result","fromOption","err","measureWidth","gridA","gridB","rowDelta","colDelta","measureHeight","generateElements","generator","rowFill","exampleRow","colFill","newChildren","tailor","fillCols","fillRows","gridWidth","isLastColLocked","modifiedCols","newLockedColumns","isSpanning","matching","getLockedColumnsWithinBounds","startAddress","colNum","merge$1","validStartAddress","currentStartAddress","gridColLength","adjustedRowAddress","possibleColAddresses","validColAddress","getValidStartAddress","gridBRows","lockedColumnsWithinBounds","rowRemainder","colRemainder","colRequired","rowRequired","measure","fittedGrid","newLockedColumnsWithinBounds","lockedColumnObj","skippedCol","gridBColIndex","newCellElm","mergeTables","insertCols","prevCell","splitCols","fittedNewGrid","secondDelta","fittedOldGrid","insertRows","oldCols","oldRows","newLocked","secondDiff","fittedGridB","newChild","lockedColFill","insertRowAt","example","newRow","ex","insertColumnAt","withinSpan","getElementFor","isDuplicatedCell","notInStartRow","notInStartColumn","determineScope","applyScope","newScope","isInHeader","getScope","substitute","replaceIn","replacer","genScope","shouldReplace","mapCells","isTarget","newCell_1","getColumnCells","replaceColumns","indexes","rowHeaders","shouldReplaceCell","targetColumn","_colIndex","columnReplacePredicate","scopeGenerator","columnScopeGenerator","replaceRows","targetRow","getRowCells","columnHeaders","_cell","newGrid","_rowIndex","rowReplacerPredicate","rowScopeGenerator","replaceCells","targetCells","uniqueColumns","currentDetail","isCol","isColgroup","isRow$1","elementToData","getScopeAttribute","Generators","toData","nuCell","recent","getOrInit","makeNew","replaceOrInit","merge","stringAttributes","baseScope_1","scopes_1","getScopeProperty","blockList","universe$1","tagName","isBlock$1","isList","isList$1","isEmptyTag$1","isBr","markCell","rightSiblingIsBlock","rightSibling","isListItem","contents","advancedBr","isEditable","outcome","elementFromGrid","findEditableCursorPosition","bundle","cursorElement","uniqueRows","makeRowsSection","initialGrid","rowIndexes","opMakeRowsHeader","opMakeRowsBody","opMakeRowsFooter","gridifyRows","pasteDetails","fromPastedRows","wh","_table","_info","adjustWidthTo","adjustAndRedistributeWidths","resizeBehaviour","tablePixelWidth","adjustAndRedistributeWidths$1","firstColumnIsLocked","lastColumnIsLocked","getColumnsWidth","uniqueCols","insertColumnsExtractor","pasteColumnsExtractor","headerCellGenerator","bodyCellGenerator","insertRowsBefore","targetIndex","insertRowsAfter","newG","insertColumnsBefore","extractDetail","insertColumnsAfter","eraseColumns","_comparator","_genWrappers","deleteColumnsAt","maxColIndex","eraseRows","deleteRowsAt","maxRowIndex","makeColumnsHeader","columnIndexes","unmakeColumnsHeader","makeRowsHeader","makeRowsBody","makeRowsFooter","makeCellsHeader","unmakeCellsHeader","mergeCells","merge$2","unmergeCells","gridify","address","pasteColsBefore","mergedGrid","pasteColsAfter","pasteRowsBefore","pasteRowsAfter","getColumnsType","lastSelectedCell","minColRange","maxColRange","selectedColumnCells","getCellsType","getRowsType","minRowRange","maxRowRange","rowTypes","hasHeader","hasFooter","hasBody","findCommonRowType","TableActions","cellSelection","isTableBody","colMutationOp","getTableSectionType","setSelectionFromAction","firstCell","clear","createRng","selectNode","des","setStart","setEnd","execute","guard","effect","noEvents","range","deleteRow","deleteColumn","getTableRowType","getTableCellType","getTableColType","DefaultRenderOptions","colGroups","createGroupRow","createRows","createRow","placeCaretInCell","collapse","colHeaders","headerType","renderOpts","rowHeadersGoInThead","actualRowHeaders","thead","theadRows","tbody","tbodyRows","render","get$2","insertContent","addVisual","isPercentage","fireEvents","tableElm","selectFirstCellInTable","insertTableWithDataValidation","errorMsg","checkInput","headerRows","headerColumns","getClipboardElements","getClipboard","setClipboardElements","setClipboard","elmsOpt","insertTable","constrainSpan","currentColspan","copyCols","fakeColGroups","colsToCopy","copiedCols","clonedCol","fakeColgroup","generateColGroup","fakeRows","cellsToCopy","copiedCells","clonedCell","fakeTR","generateRows","copyRows","slicedGrid","filteredGrid","slicedDetails","global$2","getTDTHOverallStyle","firstChildStyle","elms","currentStyle","checkChildren","applyAlign","formatter","unApplyAlign","verticalAlignValues","shorthandRegex","longformRegex","normalizeHex","hex","numChars","removeFromStart","toUpperCase","fromString$1","isHexString","toHex","component","fromRgba","rgbaColour","hexColour","red","green","blue","rgbRegex","rgbaRegex","alpha","fromStringValues","g","anyToHex","color","rgbaString","rgbMatch","rgbaMatch","fromString","canvas","canvasContext","getContext","clearRect","fillStyle","fillRect","rgba","getImageData","Cell","initial","singleton","doRevoke","revoke","isSet","onSetupToggle","formatName","formatValue","boundCallback","init","checkNode","setActive","formatChanged","initialized","isListGroup","buildListItems","items","menu","buildMenuItems","onAction","getSubmenuItems","onSetup","applyTableCellStyle","execCommand","filterNoneItem","generateMenuItemsCallback","callback","buildColorMenu","colorList","colorMap","entry","fancytype","initData","colors","allowCustomColors","changeRowHeader","queryCommandValue","changeColumnHeader","getItems$2","classes","getClassList$1","getAdvancedTab","dialogName","advTabItems","modifiers","testTruthy","setAttrib","setStyle","setFormat","DomModifier","normal","ifTruthy","rgbToHex","extractAdvancedStyles","borderwidth","borderstyle","bordercolor","backgroundcolor","getSharedValues","baseData","comparisonData","itemValue","itemKey","comparisonValue","getAlignment","matchNode","getHAlignment","getVAlignment","getRowType","getSelectedCells","cellA","cellB","applyStyleData$1","isSingleCell","cellElm","modifier","colModifier","class","updateSimpleProps$1","updateAdvancedProps$1","unApplyVAlign","halign","valign","applyVAlign","onSubmitCellForm","oldData","getData","close","transact","modifiedData","celltype","no_events","applyStructureData$1","applyCellData","cellsData","colElm","extractDataFromCellElement","open$2","dialogTabPanel","tabs","dialogPanel","windowManager","open","buttons","primary","initialData","onSubmit","formChildren","getItems$1","getRowClassList","getClassList","applyStyleData","isSingleRow","rowElm","updateSimpleProps","updateAdvancedProps","align","onSubmitRowForm","typeModified_1","styleModified_1","applyStructureData","applyRowData","open$1","rowsOpt","rowsData","extractDataFromRowElement","getItems","insertNewTable","rowColCountItems","inputMode","appearanceItems","hasAppearanceOptions","classListItem","styleTDTH","onSubmitTableForm","removePxSuffix","cellspacing","cellpadding","serializeStyle","setAttribs","applyDataToElement","captionElm","caption","captionModified","hasAdvTableTab","spacing","borderWidth","advStyle","extractDataFromSettings","optBorderWidth","getBorder","extractDataFromTableElement","generalPanel","dialogBody","getSelectionStartCellOrCaption","registerCommands","getTableFromCell","performActionOnSelection","action","getSelectionStartCell","postExecute","_data","actOnSelection","copyRowSelection","copyColSelection","pasteOnSelection","getRows","clonedRows","pasteRows","actOnType","getAction","_ui","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutCol","setColumns","mceTableCutRow","setRows","mceTableCopyCol","mceTableCopyRow","mceTablePasteColBefore","getColumns","mceTablePasteColAfter","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","cellOrCaption","isEmpty","setContent","setCursorLocation","nodeChanged","mceTableCellToggleClass","allHaveClass","formatterAction","mceTableToggleClass","toggle","mceTableToggleCaption","appendAt","mceTableSizingMode","setSizingMode","mceTableCellType","mceTableColType","mceTableRowType","func","addCommand","mceTableProps","mceTableRowProps","mceTableCellProps","getFormatName","validArgs","genericBase","remove_similar","inherit","cellBase","cellFormats","tablecellbackgroundcolor","backgroundColor","tablecellverticalalign","tablecellbordercolor","borderColor","tablecellclass","tableclass","tablecellborderstyle","borderStyle","tablecellborderwidth","adt$5","CellLocation","walk","isEligible","forwards","newIndex","detect$1","SimRange","soffset","foffset","adt$4","Situ","cata","onBefore","onOn","onAfter","situ","adt$3","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startContainer","startSitu","_finishSitu","_soffset","_finish","_foffset","createRange","selectNodeContents","selectNodeContentsUsing","relativeToNative","finishSitu","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setFinish","exactToNative","toRect","rect","bottom","adt$2","ltr","rtl","fromRange","startOffset","endContainer","endOffset","diagnose","ranges","getRanges","collapsed","rev","doDiagnose","asLtrRange","inRect","locateOffset","textnode","rangeForOffset","rectForOffset","maxX","curDeltaX","searchForPoint","locateNode","rects","getClientRects","locate$1","searchInChildren","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","caretPositionFromPoint","offsetNode","caretRangeFromPoint","searchTextNodes","boundedX","boundedY","locate","searchFromPoint","availableSearch","beforeSpecial","name$1","preprocessRelative","preprocessExact","after$2","makeRange","same","getNativeSelection","getSelection","doSetNativeRange","removeAllRanges","addRange","doSetRange","setRangeFromRelative","setBaseAndExtent","extend","setLegacyRtlRange","setExact","setRelative","toNative","getDomRange","preprocess","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","anchor","focus_1","anchorOffset","focusOffset","setToElement","selectNodeContents$1","get$1","sel","getExact","getFirstRect","getFirstRect$1","getAtPoint","global$1","forward","go$1","backward","getCellFirstCursorPosition","rootElements","Response","Situs","convertToRange","makeSitus","selectRange","cellSel","traverse","backtrack","_direction","transition","sidestep","advance","sibling","successors","rules","succ","rule","Walkers","hone","isLeaf","seekLeft$1","seekRight$1","before$1","after$1","adt$1","success","failedUp","failedDown","isRow","BeforeAfter","verify","bridge","beforeOffset","afterOffset","failure","afterCell","beforeCell","beforeBounds","getRect","afterBounds","isOverlapping","_sharedRow","onSuccess","onFailedUp","onFailedDown","gatherer","cand","gather","handleParent","findBr","br","adjacent","inParent","indexInParent","tryBr","handleBr","tgt","moveDown","caret","moveUp","toCaret","getElemBox","getBoxAt","getRangedRect","getPartialBox","getEntireBox","retry","inOutsideBlock","isOutside","downMovement","adjuster","guessBox","lowerCaret","adjustTil","numRetries","isAtTable","adjustForTable","situsFromPoint","guess","newCaret","moved","adjusted","getInnerHeight","checkScroll","scrollBy","Retries","tryUp","higherCaret","tryDown","ieTryUp","ieTryDown","getJumpSize","findSpot","brNeighbour","fromSitus","analysis","_message","process","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","inSameTable","simulate","spot","handle","navigate","precheck","firstUpCheck","seekLeft","lastOffset","lastDownCheck","seekRight","findCell","isKey","keycode","isUp","isDown","isNavigation","isBackward","isForward","WindowBridge","exactAdt","clearSelection","collapseSelection","toStart","setSelection","setRelativeSelection","selectContents","innerHeight","getScrollY","_DOC","by","rc","mouse","annotations","clearstate","applySelection","clearBeforeUpdate","singleCell","isNonEditableCell","isCellClosestContentEditable","mouseup","MouseSelection","keyboard","clearToNavigate","keydown","realEvent","which","shiftKey","update$1","attempts","navigation","newSels","keyup","sync","SelectionAnnotation","onSelection","onClear","removeSelectionAttributes","addSelectionAttribute","getOtherCells","upOrLeftCells","upGrid","upDetails","slicedCells","getUpOrLeftCells","downOrRightCells","downGrid","downDetails","getDownOrRightCells","global","hasInternalTarget","CellSelection","selectionTargets","otherCells","fireTableSelectionChange","fireTableSelectionClear","_e","mouseHandlers","keyHandlers","external$1","external","lastTarget","lastTimeStamp","handleResponse","response","hasShiftKey","ns","isLeftMouse","button","doubleTap","touchEnd","lT","lTS","timeStamp","wrappedEvent","getSelectionTargets","changeHandlers","selectionDetails","isCaption","isDisabledForSelection","getSelectionEnd","findTargets","startCellOrCaption","oot","endTable","noMenu","getExtractedDetails","onAny","onFirst","onLast","unmergeable","resetTargets","setupHandler","isDisabled","setDisabled","onSetupWithToggle","isActive","isDisabledFromLocked","lockedDisable","onSetupTableHeaders","command","onSetupTableRowHeaders","onSetupTableColumnHeaders","onSetupTable","onSetupCellOrRow","onSetupColumn","onSetupPasteable","getClipboardData","onSetupPasteableColumn","onSetupMergeable","_targets","onSetupUnmergeable","onSetupTableWithCaption","Plugin","lazyRoot","Selections","resizeHandler","clearRows","clearColumns","Clipboard","lookupOnSelection","addQueryValueHandler","registerQueryCommands","cmd","insertTableAction","numRows","numColumns","tableProperties","deleteTable","icon","ui","addMenuItem","hasTableGrid","addNestedMenuItem","addContextMenu","tableClassList","tableCellClassList","addToggleMenuItem","addMenuItems","addMenuButton","tooltip","fetch","addButton","addToggleButton","addButtons","toolbar","getToolbar","addContextToolbar","addToolbars","addTempAttr","register","registerFormats","hasTabNavigation","keyCode","TAB","body_1","isRoot_1","handle$1","setClipboardRows","getClipboardRows","setClipboardCols","getClipboardCols","getApi"],"sourceRoot":""}