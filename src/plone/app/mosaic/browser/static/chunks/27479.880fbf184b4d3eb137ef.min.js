"use strict";(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[27479],{27479:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var a=n(10878),s=n.n(a);n(79875);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t}var t,n,a;return t=e,(n=[{key:"updatezebra",value:function(e){e.find("tr:visible:odd").removeClass("odd even").addClass("odd"),e.find("tr:visible:even").removeClass("odd even").addClass("even")}},{key:"initStatusMessageArea",value:function(){if(!document.getElementById("portalMessagesWrapper")){var e=document.createElement("div");e.id="portalMessagesWrapper",document.getElementById("content").insertAdjacentElement("afterbegin",e)}}},{key:"addStatusMessage",value:function(e,t){void 0===t&&(t="info");var n=document.createElement("dl"),a=document.createElement("dt"),s=document.createElement("dd");n.classList.add("alert","alert-"+t),a.innerText=t,s.innerText=e,n.appendChild(a),n.appendChild(s);var r=document.getElementById("portalMessagesWrapper");r&&(r.innerHTML="",r.appendChild(n))}},{key:"init",value:function(){var e=this;e.initStatusMessageArea(),s()(".btn-rule-action").unbind("click").bind("click",(function(t){t.preventDefault();var n=s()(this),a=this,r=n.parents("tr").first(),i=r.parent(),l=n.data("value"),d=n.data("url");s().ajax({type:"POST",url:d,data:{"rule-id":l,_authenticator:s()('input[name="_authenticator"]').val()},beforeSend:function(){s()("#spinner").show()},error:function(){e.addStatusMessage(s()("#trns_form_error").html(),"warn")},success:function(){var t;t=r.find(".rule-title")[0].innerText,n.hasClass("btn-rule-enable")&&(r.removeClass("state-disabled").addClass("state-enabled"),a.parentNode.querySelector(".btn-rule-enable").classList.add("d-none"),a.parentNode.querySelector(".btn-rule-disable").classList.remove("d-none"),e.addStatusMessage(s()("#trns_form_success_enabled").html()+": "+t,"info")),n.hasClass("btn-rule-disable")&&(r.removeClass("state-enabled").addClass("state-disabled"),a.parentNode.querySelector(".btn-rule-disable").classList.add("d-none"),a.parentNode.querySelector(".btn-rule-enable").classList.remove("d-none"),e.addStatusMessage(s()("#trns_form_success_disabled").html()+": "+t,"info")),n.hasClass("btn-rule-delete")&&(r.remove(),e.updatezebra(i),e.addStatusMessage(s()("#trns_form_success_deleted").html()+": "+t,"info"))},complete:function(){s()("#spinner").hide()}})})),s()(".filter-option input").unbind("change").bind("change",(function(){var t=s()("#rules_table_form table"),n=s()(".state-filters input:checked"),a=s()(".type-filters input:checked");t.find("tr").show(),n.length>0&&s()(".state-filters input:not(:checked)").each((function(){t.find("."+this.id).hide()})),a.length>0&&s()(".type-filters input:not(:checked)").each((function(){t.find("."+this.id).hide()})),e.updatezebra(t)})),s()("#rules_disable_globally").change((function(){var t=s()("#fieldset-global form"),n="";s()("#rules_disable_globally")[0].checked&&(n="True"),s().ajax({type:"POST",url:t.attr("action"),data:{"global_disable:boolean":n,_authenticator:s()('input[name="_authenticator"]').val()},beforeSend:function(){s()("#spinner").show()},error:function(){e.addStatusMessage(s()("#trns_form_error").html(),"warn")},success:function(){e.addStatusMessage(s()("#trns_form_success").html(),"info")},complete:function(){s()("#spinner").hide()}})}))}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}]);