(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[66884,7652],{66884:function(t,n,e){e(7652)},7652:function(){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),e=new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i"),i=function(t){return/^[(\[{ \u00a0]$/.test(t)},o=function(t){return 3===t.nodeType},r=function(t){return 1===t.nodeType},f=function(t,n){if(n<0&&(n=0),o(t)){var e=t.data.length;n>e&&(n=e)}return n},a=function(t,n,e){!r(n)||n.hasChildNodes()?t.setStart(n,f(n,e)):t.setStartBefore(n)},u=function(t,n,e){!r(n)||n.hasChildNodes()?t.setEnd(n,f(n,e)):t.setEndAfter(n)},s=function(t,n){var r,f,s,c,l,d,g,h=function(t){return t.getParam("autolink_pattern",e)}(t),C=function(t){return t.getParam("default_link_target",!1)}(t);if(null===t.dom.getParent(t.selection.getNode(),"a[href]")){var m=t.selection.getRng().cloneRange();if(m.startOffset<5){if(!(l=m.endContainer.previousSibling)){if(!m.endContainer.firstChild||!m.endContainer.firstChild.nextSibling)return;l=m.endContainer.firstChild.nextSibling}if(d=l.length,a(m,l,d),u(m,l,d),m.endOffset<5)return;r=m.endOffset,f=l}else{if(f=m.endContainer,!o(f)&&f.firstChild){for(;!o(f)&&f.firstChild;)f=f.firstChild;o(f)&&(a(m,f,0),u(m,f,f.nodeValue.length))}r=1===m.endOffset?2:m.endOffset-1-n}var k,w=r;do{a(m,f,r>=2?r-2:0),u(m,f,r>=1?r-1:0),r-=1,g=m.toString()}while(!i(g)&&r-2>=0);i(m.toString())?(a(m,f,r),u(m,f,w),r+=1):0===m.startOffset?(a(m,f,0),u(m,f,w)):(a(m,f,r),u(m,f,w)),c=m.toString(),k=c.charAt(c.length-1),/[?!,.;:]/.test(k)&&u(m,f,w-1);var y=(c=m.toString().trim()).match(h),p=function(t){return t.getParam("link_default_protocol","http","string")}(t);if(y){var v=y[0];(function(t,n,e){return""===n||t.length>=n.length&&t.substr(e,e+n.length)===n})(v,"www.",0)?v=p+"://"+v:function(t,n){return-1!==t.indexOf(n)}(v,"@")&&!function(t){return/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(t)}(v)&&(v="mailto:"+v),s=t.selection.getBookmark(),t.selection.setRng(m),t.execCommand("createlink",!1,v),!1!==C&&t.dom.setAttrib(t.selection.getNode(),"target",C),t.selection.moveToBookmark(s),t.nodeChanged()}}},c=function(t){var e;t.on("keydown",(function(n){if(13===n.keyCode)return function(t){return s(t,-1)}(t)})),n.browser.isIE()?t.on("focus",(function(){if(!e){e=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(t){}}})):(t.on("keypress",(function(n){if(41===n.keyCode||93===n.keyCode||125===n.keyCode)return function(t){return s(t,-1)}(t)})),t.on("keyup",(function(n){if(32===n.keyCode)return function(t){return s(t,0)}(t)})))};t.add("autolink",(function(t){c(t)}))}()}}]);
//# sourceMappingURL=66884.9b71cda9a1e797e829f9.min.js.map