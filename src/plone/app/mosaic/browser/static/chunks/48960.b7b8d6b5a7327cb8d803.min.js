(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[48960],{48960:function(){!function(){"use strict";function e(e){return/^[(\[{ \u00a0]$/.test(e)}function t(e){return 3===e.nodeType}function n(e){return 1===e.nodeType}function i(e,n){var i;return n<0&&(n=0),!t(e)||(i=e.data.length)<n&&(n=i),n}function o(e,t,o){!n(t)||t.hasChildNodes()?e.setStart(t,i(t,o)):e.setStartBefore(t)}function r(e,t,o){!n(t)||t.hasChildNodes()?e.setEnd(t,i(t,o)):e.setEndAfter(t)}function a(n,i){var a,s,f,d,u,c=n.getParam("autolink_pattern",l),g=n.getParam("default_link_target",!1);if(null===n.dom.getParent(n.selection.getNode(),"a[href]")){var h=n.selection.getRng().cloneRange();if(h.startOffset<5){if(!(d=h.endContainer.previousSibling)){if(!h.endContainer.firstChild||!h.endContainer.firstChild.nextSibling)return;d=h.endContainer.firstChild.nextSibling}if(o(h,d,u=d.length),r(h,d,u),h.endOffset<5)return;a=h.endOffset,s=d}else{if(!t(s=h.endContainer)&&s.firstChild){for(;!t(s)&&s.firstChild;)s=s.firstChild;t(s)&&(o(h,s,0),r(h,s,s.nodeValue.length))}a=1===h.endOffset?2:h.endOffset-1-i}for(var C=a;o(h,s,2<=a?a-2:0),r(h,s,1<=a?a-1:0),--a,!e(h.toString())&&0<=a-2;);e(h.toString())?(o(h,s,a),r(h,s,C),a+=1):(0===h.startOffset?o(h,s,0):o(h,s,a),r(h,s,C)),m=h.toString(),/[?!,.;:]/.test(m.charAt(m.length-1))&&r(h,s,C-1);var m,k,w,y,p=(m=h.toString().trim()).match(c),v=n.getParam("link_default_protocol","http","string");p&&((w=k=p[0]).length>=(y="www.").length&&w.substr(0,4)===y?k=v+"://"+k:-1===k.indexOf("@")||/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(k)||(k="mailto:"+k),f=n.selection.getBookmark(),n.selection.setRng(h),n.execCommand("createlink",!1,k),!1!==g&&n.dom.setAttrib(n.selection.getNode(),"target",g),n.selection.moveToBookmark(f),n.nodeChanged())}}var s=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.Env"),l=new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i");s.add("autolink",(function(e){var t,n;(t=e).on("keydown",(function(e){if(13===e.keyCode)return a(t,-1)})),f.browser.isIE()?t.on("focus",(function(){if(!n){n=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}})):(t.on("keypress",(function(e){if(41===e.keyCode||93===e.keyCode||125===e.keyCode)return a(t,-1)})),t.on("keyup",(function(e){if(32===e.keyCode)return a(t,0)})))}))}()}}]);
//# sourceMappingURL=48960.b7b8d6b5a7327cb8d803.min.js.map