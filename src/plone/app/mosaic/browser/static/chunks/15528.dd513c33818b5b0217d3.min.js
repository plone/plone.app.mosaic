"use strict";(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[15528],{15528:function(e,a,i){i.r(a),i.d(a,{default:function(){return d}});var s=i(25022),t=i.n(s),o=i(23505),l=i(44563),n=i(20910),c=i(56917);const r=o.A.getLogger("pat-mosaic/layout");class d{constructor(e){this.mosaic=e}layout={widthClasses:["col","col-1","col-2","col-3","col-4","col-5","col-6","col-7","col-8","col-9","col-10","col-11","col-12"],resizeClasses:["mosaic-resize-1","mosaic-resize-2","mosaic-resize-3","mosaic-resize-4","mosaic-resize-5","mosaic-resize-6","mosaic-resize-7","mosaic-resize-8","mosaic-resize-9","mosaic-resize-10","mosaic-resize-11","mosaic-resize-12","mosaic-resize-2.4","mosaic-resize-4.8","mosaic-resize-7.2","mosaic-resize-9.6"],resizeHandleClasses:["mosaic-resize-handle-1","mosaic-resize-handle-2","mosaic-resize-handle-3","mosaic-resize-handle-4","mosaic-resize-handle-5","mosaic-resize-handle-6","mosaic-resize-handle-7","mosaic-resize-handle-8","mosaic-resize-handle-9","mosaic-resize-handle-10","mosaic-resize-handle-11","mosaic-resize-handle-12"]};getWidthClass(e){for(const a of this.layout.widthClasses)if(e.classList.contains(a))return a;return this.layout.widthClasses[0]}getResizeHandleClassId(e){let a=0;return this.layout.resizeHandleClasses.forEach(((i,s)=>{e.classList.contains(i)&&(a=s)})),a}async addAppTileHTML(e,a,i){let s=this.mosaic.getDomTreeFromHtml(a);this.mosaic.addHeadTags(i,s),await this.addTile(e,s.find(".temp_body_tag").html(),i)}async addTile(e,a,i){var s=this;s.mosaic.panels.addClass("mosaic-panel-dragging mosaic-panel-dragging-new");const o=document.createElement("div");o.classList.add("mosaic-grid-row"),o.innerHTML=`<div class="mosaic-grid-cell col"><div class="movable removable mosaic-tile mosaic-${e}-tile mosaic-helper-tile mosaic-helper-tile-new mosaic-original-tile"><div class="mosaic-tile-content" data-tileUrl="${i&&i.replace(/&/gim,"&amp;")}">`+a+"</div></div></div>",s.mosaic.panels[0].append(o);var l=s.mosaic.panels.find(".mosaic-helper-tile-new"),c=0;s.mosaic.panels.each((function(){t()(this).width()>c&&(c=t()(this).width())})),l.width()<c/4?l.width(c/4):l.width(l.width());var r=new n.A(s.mosaic,l);await r.initialize(),r.cacheHtml(),await r.scanRegistry()}async copyTile(e){const a=e[0]["mosaic-tile"],i=a.getType();e.removeClass("mosaic-original-tile");const s=e.closest(".mosaic-grid-row"),o=c.A.generate_uid();let l=t()(`<div class="mosaic-grid-cell col"><div class="movable removable copyable mosaic-tile mosaic-${i}-tile mosaic-helper-tile mosaic-helper-tile-new mosaic-original-tile"><div class="mosaic-tile-content" data-tileUrl="./@@${i}/${o}">`+a.getHtmlContent()+"</div></div></div>");s.append(l);var r=new n.A(this.mosaic,l.find(".mosaic-tile"));if(await r.initialize(),await r.save(),"app"==r.getConfig().tile_type){const e=await a.serialize();await r.deserialize(e)}return r.cacheHtml(),await r.scanRegistry(),r.$el}getDefaultValue(e){var a,i;if("IDublinCore-title"===e.name?(a='<h1 class="documentFirstHeading">',i="</h1>"):"IDublinCore-description"===e.name?(a='<p class="documentDescription">',i="</p>"):(a="<div>",i="</div>"),"field"!=e.tile_type)return e.default_value;switch(e.widget){case"z3c.form.browser.text.TextWidget":case"z3c.form.browser.text.TextFieldWidget":return`${a}${t()("#"+e.id,this.mosaic.document).find("input").attr("value")}${i}`;case"z3c.form.browser.textarea.TextAreaWidget":case"z3c.form.browser.textarea.TextAreaFieldWidget":case"z3c.form.browser.textlines.TextLinesWidget":case"z3c.form.browser.textlines.TextLinesFieldWidget":return`${a}${t()("#"+e.id,this.mosaic.document).find("textarea").val().replace("\\n","<br/>")}${i}`;case"plone.app.z3cform.widget.RichTextFieldWidget":case"plone.app.z3cform.widgets.richtext.RichTextFieldWidget":case"plone.app.z3cform.wysiwyg.widget.WysiwygWidget":case"plone.app.z3cform.wysiwyg.widget.WysiwygFieldWidget":case"plone.app.widgets.dx.RichTextWidget":return t()("#"+e.id).find("textarea").val();default:return`<div class="text-bg-secondary">Placeholder for field:<br/><b>${e.label}</b></div>`}}getPageContent(e){var a,i=function(a){var s="";return!1===t()(a).hasClass("mosaic-empty-row")&&t()(a).find(".mosaic-tile").length>=0&&(o=t()(a).attr("class"),s+='      <div class="'+o+'">\n',t()(a).children(".mosaic-grid-cell").each((function(){s+='        <div class="'+t()(this).attr("class")+'">\n',t()(this).children().each((function(){t()(this).hasClass("mosaic-tile")?s+=t()(this).data("mosaic-tile").getHtmlBody(e):t()(this).hasClass("mosaic-innergrid-row")&&(s+=i(this))})),s+="        </div>\n"})),s+="      </div>\n"),s},s="",o="";return s+="  <body>\n",t()("[data-panel]",this.mosaic.document).each((function(){s+='    <div data-panel="'+t()(this).data("panel")+'"',s+='         data-max-columns="'+t()(this).data("max-columns")+'">\n',t()(this).children().each((function(){t()(this).hasClass("mosaic-grid-row")&&(s+=i(this))})),s+="    </div>\n"})),s+="  </body>\n",a='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" data-layout="'+this.mosaic.options.layout+'">\n',a+=s,a+="</html>\n"}saveLayoutToForm(){var e=t()("#form-widgets-ILayoutAware-customContentLayout, [name='form.widgets.ILayoutAware.customContentLayout']");this.mosaic.hasContentLayout?e.val(""):e.val(this.getPageContent())}init_events(){var e=this;const a=this.mosaic.document,i=a.querySelectorAll(".mosaic-panel");if(0==i.length)return void console.log("No mosaic panel found!");i.length>1&&console.log("More than one mosaic panels found -> initializing events only for first panel!");const s=i[0];l.A.add_event_listener(a,"keydown","pat-layout--keydown",(function(e){if(9===e.keyCode){a.querySelectorAll(".mosaic-selected-tile").forEach((e=>{t()(e).data("mosaic-tile").blur()}));var i=document.activeElement.closest(".mosaic-tile");i&&t()(i).data("mosaic-tile").focus()}if(18===e.keyCode){const e=s.querySelector(".mosaic-original-tile");e?.classList.contains("copyable")&&s.classList.contains("mosaic-panel-dragging")&&!s.classList.contains("mosaic-panel-dragging-new")?s.classList.add("mosaic-panel-dragging-copy"):s.classList.contains("mosaic-advanced")?s.classList.remove("mosaic-advanced"):(s.classList.add("mosaic-advanced"),s["mosaic-advanced-enabled"]=(new Date).getTime())}if(17===e.keyCode&&s.classList.add("inner-subcolumn"),27===e.keyCode){var o=s.querySelectorAll(".mosaic-original-tile");o.length>0?o.forEach((e=>{if(e.classList.add("mosaic-drag-cancel"),e.classList.contains("mosaic-helper-tile-new")){const i=t()(e).parent().parent();t()(e).remove(),i.mosaicCleanupRow(),s.classList.remove("mosaic-panel-dragging","mosaic-panel-dragging-new"),t()(".mosaic-selected-divider",a).removeClass("mosaic-selected-divider")}})):t()(".mosaic-selected-tile",a).each((function(){t()(this).trigger("blur")})),t()(".mosaic-resize-handle-helper",a).each((function(){t()(this).parents("[data-panel]").removeClass("mosaic-panel-resizing"),t()(this).parent().removeClass("mosaic-row-resizing"),t()(this).parent().children(".mosaic-resize-placeholder").remove(),t()(this).remove()}))}})),l.A.add_event_listener(a,"keyup","pat-layout--keyup",(function(e){18===e.keyCode&&(s.classList.contains("mosaic-panel-dragging-copy")?s.classList.remove("mosaic-panel-dragging-copy"):(new Date).getTime()-parseInt(s["mosaic-advanced-enabled"])>400&&s.classList.remove("mosaic-advanced"));17===e.keyCode&&s.classList.remove("inner-subcolumn")}));l.A.add_event_listener(e.mosaic.document,"mousedown","pat-layout--mousedown-document",(function(a){let i;a.target?i=a.target:a.srcElement&&(i=a.srcElement);var s=t()(".mosaic-helper-tile-new",e.mosaic.document);s.length>0?s.each((function(){t()(this).mosaicHandleDragEnd()})):t()(i).parents(".mce-content-body, .tox, .modal-wrapper").length>0||0===t()(i).parents(".mosaic-tile").length&&(e.mosaic.document.querySelectorAll(".mosaic-selected-tile:not(.mosaic-tile-loading)").forEach((e=>{t()(e).data("mosaic-tile").blur()})),0===t()(i).parents(".mosaic-toolbar").length&&e.mosaic.toolbar.SelectedTileChange())}));const o=function(a){var i=t()(".mosaic-helper-tile-new",e.mosaic.document);if(i.length){const e=i.parent().offset();i.css("top",a.pageY+3-e.top),i.css("left",a.pageX+3-e.left)}var s=t()(".mosaic-resize-handle-helper",e.mosaic.document);if(s.length){var o,l=s.parent(),n=s.data("resize_handle_index"),c=parseFloat(a.pageX-l.offset().left-parseInt(getComputedStyle(l[0]).paddingLeft)-4),d=Math.round(c/s.data("row_width")*100),m=8,g=8;h().forEach((function(e){(o=Math.abs(e-d))<g&&(m=e,g=o)}));var u=function(e){var a=h();let i=12;return a.forEach(((a,s)=>{a==e&&(i=s+1)})),i}(m),v=s[0].column_sizes,f=v.reduce(((e,a)=>e+a),0),w=v.slice(0,n).reduce(((e,a)=>e+a),0),C=v.slice(n+1,-1).reduce(((e,a)=>e+a),0);if(n==v.length-1)var z=12-w-C;else z=f-w-C-1;var y=u-w;y=y>z?z:y<1?1:y;let i=[];v.forEach(((e,a)=>{if(a===n)i.push(y);else if(a===v.length-1){var s=i.reduce(((e,a)=>e+a)),t=f-s;i.push(t<1?1:t)}else i.push(e)})),r.debug("------------------resize-handle(move)--------------------"),r.debug(`mouse_x: ${c}`),r.debug(`mouse_percentage: ${d}`),r.debug(`resize_handle_index: ${n}`),r.debug(`column_sizes: ${v}`),r.debug(`column_sizes_sum: ${f}`),r.debug(`cur_snap_offset: ${o}`),r.debug(`snap: ${m}`),r.debug(`snap_size: ${u}`),r.debug(`col_size_before: ${w}`),r.debug(`col_size_after: ${C}`),r.debug(`col_size_max: ${z}`),r.debug(`new_column_size: ${y}`),r.debug(`new_column_sizes: ${i}`);var _=0,b=e.layout.resizeClasses.join(" "),x=e.layout.widthClasses.join(" ");l.children(".mosaic-resize-placeholder").each((function(e){var a=v[e],i=p(a);t()(this).removeClass(`${x} ${b}`).addClass(`${i} mosaic-resize-${_}`).find(".info").html(a),_+=a,e===n&&s.removeClass(b).addClass(`mosaic-resize-${_}`)})),s[0].column_sizes=i}};l.A.add_event_listener(e.mosaic.document,"mousemove","pat-layout--mousemove",o),l.A.add_event_listener(e.mosaic.document,"dragover","pat-layout--dragover",o);l.A.add_event_listener(e.mosaic.document,"mouseup","pat-layout--mouseup",(function(){t()(".mosaic-resize-handle-helper",e.mosaic.document).each((function(){var a=t()(this).data("resize_handle_index");t()(this).parent().parent().mosaicCleanupRow();var i=t()(this).parents("[data-panel]"),s=t()(this)[0].column_sizes,o=e.layout.widthClasses.join(" ");t()(this).parent().children(".mosaic-grid-cell").each((function(i){t()(this).removeClass(o).addClass(p(s[i])),t()(this).hasClass("col")||i!==a||t()(this).children(".mosaic-tile").first().children(".mosaic-tile-side-tools").each((function(){var a=t()(this);a.children(".mosaic-tile-label.reset").remove(),a.append(t()(e.mosaic.document.createElement("div")).addClass("mosaic-tile-label reset").append(m(a,s[i])))}))})),i.removeClass("mosaic-panel-resizing"),t()(this).parent().removeClass("mosaic-row-resizing"),t()(this).parent().children(".mosaic-resize-placeholder").remove(),t()(this).parent().mosaicSetResizeHandles();var l=i.find(".mosaic-selected-tile");l.length>0&&l.data("mosaic-tile").select(),t()(this).remove()}))}));const n=function(a){if(!1!==t()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging")&&(t()(".mosaic-selected-divider",e.mosaic.document).removeClass("mosaic-selected-divider"),!(!t()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging-copy")&&t()(this).hasClass("mosaic-original-tile")||t()(this).hasClass("mosaic-tile-align-left")||t()(this).hasClass("mosaic-tile-align-right")))){var i=t()(this).mosaicGetDirection(a),s=t()(this).children(".mosaic-divider-"+i);if("left"===i||"right"===i){var o=s.parent().parent().parent();if(o.children(".mosaic-grid-cell").filter(((e,a)=>0===t()(a).find(".mosaic-original-tile").length)).length>=t()(".mosaic-panel").data("max-columns"))return;o.children(".mosaic-grid-cell").length>1?(s.height(o.height()+5),s.css("top",o.offset().top-s.parent().offset().top-5)):(s.height(s.parent().height()+5),s.css("top",-5))}s.addClass("mosaic-selected-divider")}};e.mosaic.document.querySelectorAll(".mosaic-tile").forEach((a=>{l.A.add_event_listener(a,"mousemove","pat-layout--mousemove-tile",n),l.A.add_event_listener(a,"dragover","pat-layout--dragover-tile",n),l.A.add_event_listener(a,"click","pat-layout--select-tile",(()=>{t()(".mosaic-helper-tile-new",e.mosaic.document).length>0||a["mosaic-tile"].select()}))}));const c=function(e){var a=t()(e.target);if(a.parents("[data-panel]").hasClass("mosaic-advanced")&&a.hasClass("mosaic-grid-row")){if(t()(a).find(".mosaic-set-custom-css").length>0)return;var i=[];t().each(a.attr("class").split(" "),(function(){void 0!==this&&"mosaic-grid-row"!==this&&"mosaic-innergrid-row"!==this&&i.push(this)}));var s=t()("<input type='text' id='custom-css-input-box'></input>").val(i.join(" ")),o=t()("<div></div>").addClass("mosaic-set-custom-css").append(t()("<label>Custom CSS for this row:</label>")).append(s);a.append(o)}};e.mosaic.document.querySelectorAll(".mosaic-grid-row").forEach((e=>{l.A.add_event_listener(e,"dblclick","pat-layout--dblclick-gridrow",c)})),l.A.add_event_listener(e.mosaic.document,"click","pat-layout--click",(function(e){"custom-css-input-box"!==t()(e.target).attr("id")&&t().each(t()("div.mosaic-set-custom-css"),(function(){var e=t()(this).parent(),a="mosaic-grid-row";e.hasClass("mosaic-innergrid-row")&&(a="mosaic-grid-row mosaic-innergrid-row"),a+=" "+t()(this).find("input#custom-css-input-box").val(),e.attr("class",a),t()(this).remove()}))}))}initialize_panels(){var e=this;e.initJQueryHelpers(),e.init_events();for(var a=e.mosaic.panels.length,i=0;i<a;i++){var s=t()(e.mosaic.panels[i]);if(s.find(".mosaic-tile").each((async function(){var a=new n.A(e.mosaic,this);await a.initialize(),t()(this).mosaicAddDrag()})),s.mosaicAddEmptyRows(),s.children(".mosaic-grid-row").mosaicSetResizeHandles(),i===a-1){var o=0,l=0;e.mosaic.panels.each((function(e){t()(this).width()>o&&(o=t()(this).width(),l=e)}));var c=e.mosaic.panels.eq(l).find(".mosaic-tile:first");c.length>0&&c.data("mosaic-tile").select()}s.find(".mosaic-innergrid-row").each((function(){t()(this).mosaicAddMouseMoveInnergridRow(),t()(this).mosaicSetResizeHandles();var a=t()(this);["top","bottom"].forEach((function(i){a.append(t()(e.mosaic.document.createElement("div")).addClass("mosaic-divider mosaic-divider-"+i))}))}))}}initJQueryHelpers(){var e=this,a=e.mosaic.document;t().fn.mosaicAddMouseMoveEmptyRow=function(){return this.each((function(){t()(this).on("mousemove",(function(){t()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging")&&(t()(".mosaic-selected-divider",a).removeClass("mosaic-selected-divider"),t()(this).children("div").addClass("mosaic-selected-divider"))}))}))},t().fn.mosaicAddMouseMoveInnergridRow=function(){return this.each((function(){t()(this).on("mousemove",(function(e){if(t()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging")){t()(".mosaic-selected-divider",a).removeClass("mosaic-selected-divider");var i=t()(this).mosaicGetDirection(e);t()(this).children(".mosaic-divider-"+i).addClass("mosaic-selected-divider")}}))}))},t().fn.mosaicAddEmptyRows=function(){const e=()=>t()(a.createElement("div")).addClass("mosaic-grid-row mosaic-empty-row").append(t()(a.createElement("div")).addClass("mosaic-grid-cell col").append(t()(a.createElement("div")))).mosaicAddMouseMoveEmptyRow();return this.each((()=>{t()(this).prepend(e()),t()(this).find(".mosaic-grid-row:not(.mosaic-innergrid-row):not(.mosaic-empty-row").after(e())}))},t().fn.mosaicAddDrag=function(){return this.each((function(){let i=0,s=null;const o=e=>{var i=t()(".mosaic-helper-tile",a),s=i.parents("[data-panel]").offset();s&&(i.css("top",e.pageY+3-s.top),i.css("left",e.pageX+3-s.left))},n=()=>{if(clearTimeout(s),l.A.remove_event_listener(a,"pat-layout--dragmove"),l.A.remove_event_listener(a,"pat-layout--dragstop"),(new Date).getTime()-i<300)return;const e=t()(".mosaic-helper-tile",a);e.mosaicHandleDragEnd(),e.remove()},c=this.querySelector(".mosaic-drag-handle");l.A.add_event_listener(c,"mousedown","pat-layout--startdrag",(c=>{l.A.add_event_listener(a,"mouseup","pat-layout--dragstop",n),i=(new Date).getTime(),s=setTimeout((()=>{(i=>{e.mosaic.panels.addClass("mosaic-panel-dragging"),t()(".mosaic-selected-tile",a).removeClass("mosaic-selected-tile").children(".mosaic-tile-content").trigger("blur");var s=t()(i.target).parents(".mosaic-tile");s.addClass("mosaic-original-tile");var n=s.clone(!0);n.removeClass("mosaic-original-tile").css({width:s.width(),"max-height":"33%",position:"absolute",opacity:.5}).addClass("mosaic-helper-tile"),s.parents("[data-panel]").append(n),l.A.add_event_listener(a,"mousemove","pat-layout--dragmove",o)})(c)}),300)}))}))},t().fn.mosaicHandleDragEnd=async function(){var i=t()(this).parents("[data-panel]");let s=i.hasClass("mosaic-panel-dragging-copy");i.removeClass("mosaic-panel-dragging mosaic-panel-dragging-copy mosaic-panel-dragging-new");var o=t()(".mosaic-selected-divider",a),l=o.parent(),n="";for(const e of["top","bottom","left","right"])o.hasClass("mosaic-divider-"+e)&&(n=e);o.removeClass("mosaic-selected-divider");var c=t()(".mosaic-helper-tile-new",a).length>0,r=t()(".mosaic-original-tile",a),d=r.closest(".mosaic-grid-row");let m=s?await e.copyTile(r):r;(0===o.length||l.hasClass("mosaic-helper-tile"))&&m.addClass("mosaic-drag-cancel");const h=e=>{e.removeClass("mosaic-drag-cancel"),e.removeClass("mosaic-original-tile mosaic-helper-tile mosaic-helper-tile-new mosaic-tile-align-right mosaic-tile-align-left"),e.css({width:"",left:"",top:""})};if(m.hasClass("mosaic-drag-cancel")||!1===l.hasClass("mosaic-tile")&&!1===l.hasClass("mosaic-innergrid-row")&&!1===l.hasClass("mosaic-empty-row")||l.parent().parent().children(".mosaic-grid-cell").length>=i.data("max-columns")&&("left"===n||"right"===n))h(m);else if(l.hasClass("mosaic-empty-row"))l.removeClass("mosaic-empty-row").attr("class",d.attr("class")).off("mousemove"),l.children(".mosaic-grid-cell").children("div").remove(),h(m),l.children(".mosaic-grid-cell").append(m);else{if(h(m),i.hasClass("inner-subcolumn")){m=t()(a.createElement("div")).addClass("mosaic-grid-row mosaic-innergrid-row").append(t()(a.createElement("div")).addClass("mosaic-grid-cell col").append(t()(a.createElement("div")).append(t()(a.createElement("div")).addClass("mosaic-innergrid-outer-border"))).append(m)).mosaicAddMouseMoveInnergridRow();for(const e of["top","bottom"])m.append(t()(a.createElement("div")).addClass("mosaic-divider mosaic-divider-"+e))}if("top"===n)l.before(m);else if("bottom"===n)l.after(m);else if("left"===n||"right"===n){var p=l.parent(),g=p.parent();if(1===g.children(".mosaic-grid-cell").length.length){var u=l.prevAll();u.length>0&&(g.before(t()(a.createElement("div")).addClass("mosaic-grid-row").append(t()(a.createElement("div")).addClass("mosaic-grid-cell col").append(t()(u.get().reverse()).clone(!0).mosaicAddDrag()))),u.remove());var v=l.nextAll();v.length>0&&(g.after(t()(a.createElement("div")).addClass("mosaic-grid-row").append(t()(a.createElement("div")).addClass("mosaic-grid-cell col").append(v.clone(!0).mosaicAddDrag()))),v.remove()),p.removeClass(e.layout.widthClasses.join(" ")).addClass("col"),"left"===n?l.parent().before(t()(a.createElement("div")).addClass("mosaic-grid-cell col").append(m)):l.parent().after(t()(a.createElement("div")).addClass("mosaic-grid-cell col").append(m)),g.mosaicSetResizeHandles()}else"left"===n?p.before(t()(a.createElement("div")).addClass("mosaic-grid-cell").append(m)):p.after(t()(a.createElement("div")).addClass("mosaic-grid-cell").append(m)),g.mosaicSetColumnSizes(),g.mosaicSetResizeHandles()}}e.mosaic.panels.find(".mosaic-grid-row:not(:has(.mosaic-tile))").remove(),e.mosaic.panels.find(".mosaic-empty-row").remove(),d.mosaicCleanupRow(),e.mosaic.panels.mosaicAddEmptyRows(),e.init_events(),(c||s)&&m.length>0&&(m.mosaicAddDrag(),await m.data("mosaic-tile").initializeContent(c,s),m.data("mosaic-tile").select())},t().fn.mosaicSetColumnSizes=function(){return this.each((function(){var a=[],i=t()(this).children(".mosaic-grid-cell"),s=i.length,o=e.layout.widthClasses.join(" ");i.each((function(e){t()(this).removeClass(o);for(var i=Math.floor(12/s),l=12-i*(s-1),n=0;n<s;n++)n===s-1&&(i=l),e===n&&(a.push(i),t()(this).addClass("col"))})),t()(this).data("column_sizes",a)}))},t().fn.mosaicSetResizeHandles=function(){return this.each((function(){t()(this).children(".mosaic-resize-handle").remove();var i=t()(this).children(".mosaic-grid-cell"),s=i.length;if(s<=12){var o=[],l=0,n=0,c=0;for(let a=0;a<s;a++)c=g(e.getWidthClass(i[a])),o.push(c),n+=c,0===c&&(l+=1);var d=0;l&&(d=(12-n)/l);var m=0;c=0;for(let e=0;e<s;e++)m+=c=o[e]?o[e]:d,t()(this).append(t()(a.createElement("div")).addClass(`mosaic-resize-handle mosaic-resize-handle-${e+1} mosaic-resize-${5===s?m.toFixed(1).replace(".0",""):m}`).data("resize_handle_index",e)),t()(i[e]).data("col_size",c)}t()(this).children(".mosaic-resize-handle").off("mousedown").on("mousedown",(function(){if(!(t()(".mosaic-helper-tile-new").length>0)){var i=t()(this).parent(),s=i.children(".mosaic-grid-cell");if(!(s.length>12)){var o=0,l=[];s.each((function(){var e=t()(this).data("col_size");l.push(e);var s=t()(a.createElement("div")).addClass(`mosaic-resize-placeholder col-${e} mosaic-resize-${o}`).append(t()(a.createElement("div")).addClass("mosaic-resize-placeholder-inner-border").append(t()(a.createElement("div")).addClass("info").html(e)));i.append(s),o+=e}));var n=e.getResizeHandleClassId(this),c=l.reduce(((e,a,i)=>i<=n?e+a:e),0),d=t()("<div />").addClass("mosaic-resize-handle mosaic-resize-handle-helper").addClass(`mosaic-resize-${c}`).data("row_width",i.width()).data("resize_handle_index",n);return d[0].column_sizes=l,i.append(d),t()(this).parents("[data-panel]").addClass("mosaic-panel-resizing"),i.addClass("mosaic-row-resizing"),t()(".mosaic-selected-tile",a).children(".mosaic-tile-content").trigger("blur"),r.debug("------------------resize-handle(click)--------------------"),r.debug(`resize_handle_index: ${n}`),r.debug(`resize_handle_index_size: ${c}`),r.debug(`row_width: ${i.width()}`),r.debug(`column_sizes: ${l}`),!1}}}))}))},t().fn.mosaicCleanupRow=function(){return this.each((function(){var e=t()(this);if(e.children(".mosaic-grid-cell").each((function(){0===t()(this).children().length&&(t()(this).remove(),e.mosaicSetColumnSizes())})),0===e.find(".mosaic-tile").length){var a=e;if(e.nextAll(".mosaic-grid-row").length>0)e=e.next(".mosaic-grid-row");else{if(!(e.prevAll(".mosaic-grid-row").length>0))return void e.remove();e=e.prev(".mosaic-grid-row")}a.remove()}e.mosaicSetResizeHandles()}))},t().fn.mosaicGetDirection=function(e){var a=parseFloat(t()(this).width()),i=parseFloat(t()(this).height()),s=parseFloat(e.pageX-t()(this).offset().left-a/2),o=parseFloat(e.pageY-t()(this).offset().top-i/2),l=a/2,n=i/2;return s<0?o<0?s/o<-1*l/(-1*n)?"top":"left":s/o<-1*l/n?"left":"bottom":o<0?s/o<1*l/(-1*n)?"right":"top":s/o<l/n?"bottom":"right"}}}var m=function(e,a){var i=document.createElement("a"),s=void 0===a?"":" ("+a+")";return i.href="javascript:",i.textContent="Reset"+s,t()(i).on("click",{el:e},(function(e){e.preventDefault(),e.data.el.parent().parent().removeClass("col-1 col-2 col-3 col-4 col-5 col-6 col-7 col-8 col-9 col-10 col-11 col-12").addClass("col"),e.data.el.parent().parent().parent().mosaicSetResizeHandles(),t()(e.target).parent().remove()})),i};function h(){for(var e=[],a=100/12,i=0;i<99;)e.push(Math.round(i+=a));return e}function p(e){return e?"col-"+e:"col"}function g(e,a){return a=a||"col-",parseInt(e.replace(a,""))||0}}}]);
//# sourceMappingURL=15528.dd513c33818b5b0217d3.min.js.map