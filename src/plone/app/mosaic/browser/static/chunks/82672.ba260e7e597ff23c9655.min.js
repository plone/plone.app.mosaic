(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[82672],{82672:function(){!function(){"use strict";function e(e){return e.getParam("save_enablewhendirty",!0)}function n(e,n){e.notificationManager.open({text:n,type:"error"})}function t(n){return function(t){function o(){t.setDisabled(e(n)&&!n.isDirty())}return o(),n.on("NodeChange dirty",o),function(){return n.off("NodeChange dirty",o)}}}var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=tinymce.util.Tools.resolve("tinymce.util.Tools");o.add("save",(function(o){var c;(c=o).ui.registry.addButton("save",{icon:"save",tooltip:"Save",disabled:!0,onAction:function(){return c.execCommand("mceSave")},onSetup:t(c)}),c.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",disabled:!0,onAction:function(){return c.execCommand("mceCancel")},onSetup:t(c)}),c.addShortcut("Meta+S","","mceSave"),function(t){t.addCommand("mceSave",(function(){!function(t){var o=a.DOM.getParent(t.id,"form");if(!e(t)||t.isDirty()){if(t.save(),t.getParam("save_onsavecallback"))return t.execCallback("save_onsavecallback",t),t.nodeChanged();o?(t.setDirty(!1),o.onsubmit&&!o.onsubmit()||("function"==typeof o.submit?o.submit():n(t,"Error: Form submit field collision.")),t.nodeChanged()):n(t,"Error: No form element found.")}}(t)})),t.addCommand("mceCancel",(function(){var e=t,n=i.trim(e.startContent);e.getParam("save_oncancelcallback")?e.execCallback("save_oncancelcallback",e):e.resetContent(n)}))}(o)}))}()}}]);
//# sourceMappingURL=82672.ba260e7e597ff23c9655.min.js.map