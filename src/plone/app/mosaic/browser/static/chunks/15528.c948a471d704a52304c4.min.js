"use strict";(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[15528],{15528:function(e,i,a){a.r(i),a.d(i,{default:function(){return m}});var s=a(2511),t=a.n(s),o=a(23505),l=a(44563),c=a(20910),n=a(56917);const r=o.A.getLogger("pat-mosaic/layout");function d(e){return!!e.closest(".mosaic-tile")}class m{constructor(e){this.mosaic=e}layout={widthClasses:["col","col-1","col-2","col-3","col-4","col-5","col-6","col-7","col-8","col-9","col-10","col-11","col-12"],resizeClasses:["mosaic-resize-1","mosaic-resize-2","mosaic-resize-3","mosaic-resize-4","mosaic-resize-5","mosaic-resize-6","mosaic-resize-7","mosaic-resize-8","mosaic-resize-9","mosaic-resize-10","mosaic-resize-11","mosaic-resize-12","mosaic-resize-2.4","mosaic-resize-4.8","mosaic-resize-7.2","mosaic-resize-9.6"],resizeHandleClasses:["mosaic-resize-handle-1","mosaic-resize-handle-2","mosaic-resize-handle-3","mosaic-resize-handle-4","mosaic-resize-handle-5","mosaic-resize-handle-6","mosaic-resize-handle-7","mosaic-resize-handle-8","mosaic-resize-handle-9","mosaic-resize-handle-10","mosaic-resize-handle-11","mosaic-resize-handle-12"]};getWidthClass(e){for(const i of this.layout.widthClasses)if(e.classList.contains(i))return i;return this.layout.widthClasses[0]}getResizeHandleClassId(e){let i=0;return this.layout.resizeHandleClasses.forEach((a,s)=>{e.classList.contains(a)&&(i=s)}),i}async addAppTileHTML(e,i,a){let s=this.mosaic.getDomTreeFromHtml(i);this.mosaic.addHeadTags(a,s),await this.addTile(e,s.find(".temp_body_tag").html(),a)}async addTile(e,i,a){var s=this;s.mosaic.panels.addClass("mosaic-panel-dragging mosaic-panel-dragging-new");const o=document.createElement("div");o.classList.add("mosaic-grid-row"),o.innerHTML=`<div class="mosaic-grid-cell col"><div class="movable removable mosaic-tile mosaic-${e}-tile mosaic-helper-tile mosaic-helper-tile-new mosaic-original-tile"><div class="mosaic-tile-content" data-tileUrl="${a&&a.replace(/&/gim,"&amp;")}">`+i+"</div></div></div>",s.mosaic.panels[0].append(o);var l=s.mosaic.panels.find(".mosaic-helper-tile-new"),n=0;s.mosaic.panels.each(function(){t()(this).width()>n&&(n=t()(this).width())}),l.width()<n/4?l.width(n/4):l.width(l.width());var r=new c.A(s.mosaic,l);await r.initialize(),r.cacheHtml(),await r.scanRegistry()}async copyTile(e){const i=e[0]["mosaic-tile"],a=i.getType();e.removeClass("mosaic-original-tile");const s=e.closest(".mosaic-grid-row"),o=n.A.generate_uid();let l=t()(`<div class="mosaic-grid-cell col"><div class="movable removable copyable mosaic-tile mosaic-${a}-tile mosaic-helper-tile mosaic-helper-tile-new mosaic-original-tile"><div class="mosaic-tile-content" data-tileUrl="./@@${a}/${o}">`+i.getHtmlContent()+"</div></div></div>");s.append(l);var r=new c.A(this.mosaic,l.find(".mosaic-tile"));if(await r.initialize(),r.save(),"app"==r.getConfig().tile_type){const e=await i.serialize();await r.deserialize(e)}return r.cacheHtml(),await r.scanRegistry(),r.$el}getDefaultValue(e){var i,a;if("IDublinCore-title"===e.name?(i='<h1 class="documentFirstHeading">',a="</h1>"):"IDublinCore-description"===e.name?(i='<p class="documentDescription">',a="</p>"):(i="<div>",a="</div>"),"field"!=e.tile_type)return e.default_value;switch(e.widget){case"z3c.form.browser.text.TextWidget":case"z3c.form.browser.text.TextFieldWidget":return`${i}${t()("#"+e.id,this.mosaic.document).find("input").attr("value")}${a}`;case"z3c.form.browser.textarea.TextAreaWidget":case"z3c.form.browser.textarea.TextAreaFieldWidget":case"z3c.form.browser.textlines.TextLinesWidget":case"z3c.form.browser.textlines.TextLinesFieldWidget":return`${i}${t()("#"+e.id,this.mosaic.document).find("textarea").val().replace("\\n","<br/>")}${a}`;case"plone.app.z3cform.widget.RichTextFieldWidget":case"plone.app.z3cform.widgets.richtext.RichTextFieldWidget":case"plone.app.z3cform.wysiwyg.widget.WysiwygWidget":case"plone.app.z3cform.wysiwyg.widget.WysiwygFieldWidget":case"plone.app.widgets.dx.RichTextWidget":return t()("#"+e.id).find("textarea").val();default:return`<div class="text-bg-secondary">Placeholder for field:<br/><b>${e.label}</b></div>`}}getPageContent(e){var i=a=>{let s="";if(!a.querySelectorAll(".mosaic-tile").length)return s;s+=`<div class="${a.getAttribute("class")}">\n`;for(const t of a.children)if(t.classList.contains("mosaic-grid-cell")){s+=`<div class="${t.getAttribute("class")}">\n`;for(const a of t.children)a.classList.contains("mosaic-innergrid-row")&&(s+=i(a)),a.classList.contains("mosaic-tile")&&(s+=a["mosaic-tile"].getHtmlBody(e));s+="</div>\n"}return s+="</div>",s};let a="<body>";return this.mosaic.document.querySelectorAll("[data-panel]").forEach(e=>{a+=`<div data-panel="${e.dataset?.panel}" data-max-colums="${e.dataset?.maxColumns||6}">`;for(const s of e.children)s.classList.contains("mosaic-empty-row")||(a+=i(s));a+="</div>"}),a+="</body>",`<!DOCTYPE html><html data-layout="${this.mosaic.options.layout}">${a}</html>`}saveLayoutToForm(){const e=this.mosaic.document.querySelector("[name='form.widgets.ILayoutAware.customContentLayout']");if(this.mosaic.hasContentLayout)e.value="";else if(e){r.debug("saving pageContent to field");const i=this.getPageContent();e.value=i}else alert("Could not save layout. Please reload page.")}init_events(){var e=this;const i=this.mosaic.document,a=i.querySelectorAll(".mosaic-panel");if(0==a.length)return void console.log("No mosaic panel found!");a.length>1&&console.log("More than one mosaic panels found -> initializing events only for first panel!");const s=a[0];l.A.add_event_listener(i,"keydown","pat-layout--keydown",function(e){if(9===e.keyCode){i.querySelectorAll(".mosaic-selected-tile").forEach(async e=>await e["mosaic-tile"].blur());var a=document.activeElement.closest(".mosaic-tile");a&&t()(a).data("mosaic-tile").focus()}if(18===e.keyCode){const e=s.querySelector(".mosaic-original-tile");if(s.classList.contains("mosaic-panel-dragging")&&!s.classList.contains("mosaic-panel-dragging-new")){const i=e?.classList.contains("copyable")?"copy":"unique";s.classList.add(`mosaic-panel-dragging-${i}`)}else s.classList.contains("mosaic-advanced")?s.classList.remove("mosaic-advanced"):(s.classList.add("mosaic-advanced"),s["mosaic-advanced-enabled"]=(new Date).getTime())}if(17===e.keyCode&&s.classList.add("inner-subcolumn"),27===e.keyCode){var o=s.querySelectorAll(".mosaic-original-tile");o.length>0?o.forEach(e=>{if(e.classList.add("mosaic-drag-cancel"),e.classList.contains("mosaic-helper-tile-new")){const a=t()(e).parent().parent();t()(e).remove(),a.mosaicCleanupRow(),s.classList.remove("mosaic-panel-dragging","mosaic-panel-dragging-new"),i.querySelectorAll(".mosaic-selected-divider").forEach(e=>{e.classList.remove("mosaic-selected-divider")})}}):t()(".mosaic-selected-tile",i).each(function(){t()(this).trigger("blur")}),t()(".mosaic-resize-handle-helper",i).each(function(){t()(this).parents("[data-panel]").removeClass("mosaic-panel-resizing"),t()(this).parent().removeClass("mosaic-row-resizing"),t()(this).parent().children(".mosaic-resize-placeholder").remove(),t()(this).remove()})}}),l.A.add_event_listener(i,"keyup","pat-layout--keyup",function(e){18===e.keyCode&&(s.classList.contains("mosaic-panel-dragging-copy")?s.classList.remove("mosaic-panel-dragging-copy"):(new Date).getTime()-parseInt(s["mosaic-advanced-enabled"])>400&&s.classList.remove("mosaic-advanced"));17===e.keyCode&&s.classList.remove("inner-subcolumn")});l.A.add_event_listener(e.mosaic.document,"mousedown","pat-layout--mousedown-document",function(i){let a;i.target?a=i.target:i.srcElement&&(a=i.srcElement);var s=t()(".mosaic-helper-tile-new",e.mosaic.document);s.length>0?s.each(function(){t()(this).mosaicHandleDragEnd()}):a.closest(".mce-content-body, .tox, .modal-wrapper")||a.closest(".mosaic-tile")||(r.debug("Clicked outside tile -> trigger blur event"),e.mosaic.document.querySelectorAll(".mosaic-selected-tile:not(.mosaic-tile-loading)").forEach(async e=>await e["mosaic-tile"].blur()),a.closest(".mosaic-toolbar")||e.mosaic.toolbar.SelectedTileChange())});let o=null;const c=()=>{o&&(clearInterval(o),o=null)},n=e=>{o||(o=setInterval(()=>{window.scrollBy(0,e)},50))},d=function(i){var a=t()(".mosaic-helper-tile-new",e.mosaic.document);if(a.length){const e=a.parent().offset();a.css("top",i.pageY+3-e.top),a.css("left",i.pageX+3-e.left)}var o=t()(".mosaic-resize-handle-helper",e.mosaic.document);if(o.length){var l,d=o.parent(),m=o.data("resize_handle_index"),h=parseFloat(i.pageX-d.offset().left-parseInt(getComputedStyle(d[0]).paddingLeft)-4),g=Math.round(h/o.data("row_width")*100),v=8,f=8;u().forEach(function(e){(l=Math.abs(e-g))<f&&(v=e,f=l)});var w=function(e){var i=u();let a=12;return i.forEach((i,s)=>{i==e&&(a=s+1)}),a}(v),y=o[0].column_sizes,C=y.reduce((e,i)=>e+i,0),z=y.slice(0,m).reduce((e,i)=>e+i,0),_=y.slice(m+1,-1).reduce((e,i)=>e+i,0),b=12;b=m==y.length-1?12-z-_:C-z-_-1;var A=w-z;A=A>b?b:A<1?1:A;let a=[];y.forEach((e,i)=>{if(i===m)a.push(A);else if(i===y.length-1){var s=a.reduce((e,i)=>e+i),t=C-s;a.push(t<1?1:t)}else a.push(e)}),r.debug("------------------resize-handle(move)--------------------"),r.debug(`mouse_x: ${h}`),r.debug(`mouse_percentage: ${g}`),r.debug(`resize_handle_index: ${m}`),r.debug(`column_sizes: ${y}`),r.debug(`column_sizes_sum: ${C}`),r.debug(`cur_snap_offset: ${l}`),r.debug(`snap: ${v}`),r.debug(`snap_size: ${w}`),r.debug(`col_size_before: ${z}`),r.debug(`col_size_after: ${_}`),r.debug(`col_size_max: ${b}`),r.debug(`new_column_size: ${A}`),r.debug(`new_column_sizes: ${a}`);var E=0,$=e.layout.resizeClasses.join(" "),x=e.layout.widthClasses.join(" ");d.children(".mosaic-resize-placeholder").each(function(e){var i=y[e],a=p(i);t()(this).removeClass(`${x} ${$}`).addClass(`${a} mosaic-resize-${E}`).find(".info").html(i),E+=i,e===m&&o.removeClass($).addClass(`mosaic-resize-${E}`)}),o[0].column_sizes=a}s.classList.contains("mosaic-panel-dragging")&&(e=>{const i=window.innerHeight;e.clientY<60?n(-100):e.clientY>i-60?n(100):c()})(i)};l.A.add_event_listener(e.mosaic.document,"mousemove","pat-layout--mousemove",d),l.A.add_event_listener(e.mosaic.document,"dragover","pat-layout--dragover",d);l.A.add_event_listener(e.mosaic.document,"mouseup","pat-layout--mouseup",function(){c(),t()(".mosaic-resize-handle-helper",e.mosaic.document).each(function(){var i=t()(this).data("resize_handle_index");t()(this).parent().parent().mosaicCleanupRow();var a=t()(this).closest("[data-panel]"),s=t()(this)[0].column_sizes,o=e.layout.widthClasses.join(" ");t()(this).parent().children(".mosaic-grid-cell").each(function(a){t()(this).removeClass(o).addClass(p(s[a])),t()(this).hasClass("col")||a!==i||t()(this).children(".mosaic-tile").first().children(".mosaic-tile-side-tools").each(function(){var i=t()(this);i.children(".mosaic-tile-label.reset").remove(),i.append(t()(e.mosaic.document.createElement("div")).addClass("mosaic-tile-label reset").append(h(i,s[a])))})}),a.removeClass("mosaic-panel-resizing"),t()(this).parent().removeClass("mosaic-row-resizing"),t()(this).parent().children(".mosaic-resize-placeholder").remove(),t()(this).parent().mosaicSetResizeHandles();var l=a.find(".mosaic-selected-tile");l.length>0&&l.data("mosaic-tile").select(),t()(this).remove()})});const m=function(i){if(!1!==t()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging")&&(t()(".mosaic-selected-divider",e.mosaic.document).removeClass("mosaic-selected-divider"),!(!t()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging-copy")&&t()(this).hasClass("mosaic-original-tile")||t()(this).hasClass("mosaic-tile-align-left")||t()(this).hasClass("mosaic-tile-align-right")))){var a=t()(this).mosaicGetDirection(i),s=t()(this).children(".mosaic-divider-"+a);if("left"===a||"right"===a){var o=s.closest(".mosaic-grid-row");if(o.children(".mosaic-grid-cell").filter((e,i)=>0===t()(i).find(".mosaic-original-tile").length).length>=t()(".mosaic-panel").data("max-columns"))return;o.children(".mosaic-grid-cell").length>1?(s.height(o.height()+5),s.css("top",o.offset().top-s.parent().offset().top-5)):(s.height(s.parent().height()+5),s.css("top",-5))}s.addClass("mosaic-selected-divider")}};e.mosaic.document.querySelectorAll(".mosaic-tile").forEach(i=>{l.A.add_event_listener(i,"mousemove","pat-layout--mousemove-tile",m),l.A.add_event_listener(i,"dragover","pat-layout--dragover-tile",m),l.A.add_event_listener(i,"click","pat-layout--select-tile",()=>{t()(".mosaic-helper-tile-new",e.mosaic.document).length>0||i["mosaic-tile"].select()})});const g=function(i){"custom-css-input-box"!==i.target.id&&e.mosaic.document.querySelectorAll(".mosaic-set-custom-css").forEach(e=>{const i=e.parentNode;let a="mosaic-grid-row";i.classList.contains("mosaic-innergrid-row")&&(a+="mosaic-innergrid-row");const s=e.querySelector("#custom-css-input-box").value;s&&(a+=` ${s}`),i.setAttribute("class",a),t()(i).mosaicSetResizeHandles(),e.remove()})},v=function(e){const i=e.target;if(i.closest("[data-panel]").classList.contains("mosaic-advanced")&&i.classList.contains("mosaic-grid-row")){if(i.querySelector(".mosaic-set-custom-css"))return;var a=Array.from(i.classList).filter(e=>-1==["mosaic-grid-row","mosaic-innergrid-row"].indexOf(e));const e=document.createElement("div");e.classList.add("mosaic-set-custom-css"),e.innerHTML=`<label>Custom CSS for this row</label><input type="text" id="custom-css-input-box" value="${a.join(" ")}"></input>`,i.append(e),l.A.add_event_listener(e,"keyup","pat-layout--apply-custom-css",g)}};e.mosaic.document.querySelectorAll(".mosaic-grid-row").forEach(e=>{l.A.add_event_listener(e,"dblclick","pat-layout--dblclick-gridrow",v)}),l.A.add_event_listener(e.mosaic.document,"click","pat-layout--click",g)}async initialize(){this.initJQueryHelpers(),this.init_events(),await this.init_tiles(),this.focusFirstTile()}async init_tiles(){for(const e of this.mosaic.panels){const i=t()(e);for(const i of e.querySelectorAll("[data-tile]"))if(d(i)){const e=new c.A(this.mosaic,i);await e.initialize()}i.mosaicAddEmptyRows(),i.children(".mosaic-grid-row").mosaicSetResizeHandles(),e.querySelectorAll(".mosaic-innergrid-row").forEach(e=>{const i=t()(e);i.mosaicAddMouseMoveInnergridRow(),i.mosaicSetResizeHandles(),["top","bottom"].forEach(e=>{i.append(t()(this.mosaic.document.createElement("div")).addClass("mosaic-divider mosaic-divider-"+e))})})}}focusFirstTile(){r.debug("Focusing first tile");var e=0,i=0;this.mosaic.panels.each(function(a){t()(this).width()>e&&(e=t()(this).width(),i=a)});var a=this.mosaic.panels.eq(i).find(".mosaic-tile:first");a.length>0&&a.data("mosaic-tile").select()}initJQueryHelpers(){var e=this,i=e.mosaic.document;t().fn.mosaicAddMouseMoveEmptyRow=function(){return this.each(function(){t()(this).on("mousemove",function(){t()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging")&&(t()(".mosaic-selected-divider",i).removeClass("mosaic-selected-divider"),t()(this).children("div").addClass("mosaic-selected-divider"))})})},t().fn.mosaicAddEmptyRows=function(){const e=e=>t()(i.createElement("div")).addClass(`mosaic-grid-row mosaic-empty-row ${e}`).append(t()(i.createElement("div")).addClass("mosaic-grid-cell col").append(t()(i.createElement("div")))).mosaicAddMouseMoveEmptyRow();return this.each(()=>{t()(this).prepend(e("")),t()(this).find(".mosaic-grid-row:not(.mosaic-empty-row").each(function(){const i=e(t()(this).hasClass("mosaic-innergrid-row")?"mosaic-innergrid-row":"");t()(this).after(i)})})},t().fn.mosaicAddDrag=function(){return this.each(function(){let a=0,s=null;const o=e=>{var a=t()(".mosaic-helper-tile",i),s=a.parents("[data-panel]").offset();s&&(a.css("top",e.pageY+3-s.top),a.css("left",e.pageX+3-s.left))},c=()=>{if(clearTimeout(s),l.A.remove_event_listener(i,"pat-layout--dragmove"),l.A.remove_event_listener(i,"pat-layout--dragstop"),(new Date).getTime()-a<300)return;const e=t()(".mosaic-helper-tile",i);e.mosaicHandleDragEnd(),e.remove()},n=a=>{e.mosaic.panels.addClass("mosaic-panel-dragging"),t()(".mosaic-selected-tile",i).removeClass("mosaic-selected-tile").children(".mosaic-tile-content").trigger("blur");var s=t()(a.target).parents(".mosaic-tile");s.addClass("mosaic-original-tile");var c=s.clone(!0);c.removeClass("mosaic-original-tile").css({width:s.width(),"max-height":"33%",position:"absolute",opacity:.5}).addClass("mosaic-helper-tile"),s.parents("[data-panel]").append(c),l.A.add_event_listener(i,"mousemove","pat-layout--dragmove",o)};this.querySelectorAll(".mosaic-drag-handle").forEach(e=>{l.A.add_event_listener(e,"mousedown","pat-layout--startdrag",e=>{0===e.button&&(l.A.add_event_listener(i,"mouseup","pat-layout--dragstop",c),a=(new Date).getTime(),s=setTimeout(()=>{n(e)},300))})});const r=this.querySelector(".mosaic-btn-move");r&&l.A.add_event_listener(r,"mousedown","pat-layout--startmove",e=>{0===e.button&&n(e)})})},t().fn.mosaicHandleDragEnd=async function(){var a=t()(this).parents("[data-panel]");let s=a.hasClass("mosaic-panel-dragging-copy");const o=i.querySelector(".mosaic-selected-divider"),l=t()(o?.parentElement);let c="";for(const e of["top","bottom","left","right"])o?.classList.contains(`mosaic-divider-${e}`)&&(c=e);o?.classList.remove("mosaic-selected-divider");var n=t()(".mosaic-helper-tile-new",i).length>0,r=t()(".mosaic-original-tile",i),d=r.closest(".mosaic-grid-row");let m=s?await e.copyTile(r):r;o&&0!==o.length&&!l.hasClass("mosaic-helper-tile")||m.addClass("mosaic-drag-cancel");const h=o?.closest(".mosaic-grid-row");h?.classList.contains("mosaic-fixed-row")&&(t()(".mosaic-divider-left",m).remove(),t()(".mosaic-divider-right",m).remove());const u=e=>{e.removeClass("mosaic-drag-cancel"),e.removeClass("mosaic-original-tile mosaic-helper-tile mosaic-helper-tile-new mosaic-tile-align-right mosaic-tile-align-left"),e.css({width:"",left:"",top:""})};if(m.hasClass("mosaic-drag-cancel")||!1===l?.hasClass("mosaic-tile")&&!1===l?.hasClass("mosaic-innergrid-row")&&!1===l?.hasClass("mosaic-empty-row")||l?.parent().parent().children(".mosaic-grid-cell").length>=a.data("max-columns")&&("left"===c||"right"===c))u(m);else if(l?.hasClass("mosaic-empty-row"))l.removeClass("mosaic-empty-row").attr("class",d.attr("class")).off("mousemove"),l.children(".mosaic-grid-cell").children("div").remove(),u(m),l.children(".mosaic-grid-cell").append(m);else{if(u(m),a.hasClass("inner-subcolumn")){m=t()(i.createElement("div")).addClass("mosaic-grid-row mosaic-innergrid-row").append(t()(i.createElement("div")).addClass("mosaic-grid-cell col").append(m));for(const e of["top","bottom"])m.append(t()(i.createElement("div")).addClass("mosaic-divider mosaic-divider-"+e))}if("top"===c)l.before(m);else if("bottom"===c)l.after(m);else if("left"===c||"right"===c){var p=l.parent(),g=p.parent();if(1===g.children(".mosaic-grid-cell").length.length){var v=l.prevAll();v.length>0&&(g.before(t()(i.createElement("div")).addClass("mosaic-grid-row").append(t()(i.createElement("div")).addClass("mosaic-grid-cell col").append(t()(v.get().reverse()).clone(!0).mosaicAddDrag()))),v.remove());var f=l.nextAll();f.length>0&&(g.after(t()(i.createElement("div")).addClass("mosaic-grid-row").append(t()(i.createElement("div")).addClass("mosaic-grid-cell col").append(f.clone(!0).mosaicAddDrag()))),f.remove()),p.removeClass(e.layout.widthClasses.join(" ")).addClass("col"),"left"===c?l.parent().before(t()(i.createElement("div")).addClass("mosaic-grid-cell col").append(m)):l.parent().after(t()(i.createElement("div")).addClass("mosaic-grid-cell col").append(m)),g.mosaicSetResizeHandles()}else"left"===c?p.before(t()(i.createElement("div")).addClass("mosaic-grid-cell").append(m)):p.after(t()(i.createElement("div")).addClass("mosaic-grid-cell").append(m)),g.mosaicSetColumnSizes(),g.mosaicSetResizeHandles()}}if(a.removeClass("mosaic-panel-dragging mosaic-panel-dragging-copy mosaic-panel-dragging-unique mosaic-panel-dragging-new inner-subcolumn"),e.mosaic.panels.find(".mosaic-grid-row:not(:has(.mosaic-tile))").remove(),e.mosaic.panels.find(".mosaic-empty-row").remove(),d.mosaicCleanupRow(),e.mosaic.panels.mosaicAddEmptyRows(),e.init_events(),(n||s)&&m.length>0){if(m.mosaicAddDrag(),!m.data("mosaic-tile"))return;await m.data("mosaic-tile").initializeContent(n,s),m.data("mosaic-tile").select()}},t().fn.mosaicSetColumnSizes=function(){return this.each(function(){var i=[],a=t()(this).children(".mosaic-grid-cell"),s=a.length,o=e.layout.widthClasses.join(" ");a.each(function(e){t()(this).removeClass(o);for(var a=Math.floor(12/s),l=12-a*(s-1),c=0;c<s;c++)c===s-1&&(a=l),e===c&&(i.push(a),t()(this).addClass("col"))}),t()(this).data("column_sizes",i)})},t().fn.mosaicSetResizeHandles=function(){return this.each(function(){if(t()(this).children(".mosaic-resize-handle").remove(),!["mosaic-fixed-row","mosaic-empty-row"].filter(e=>this.classList.contains(e)).length){var a=t()(this).children(".mosaic-grid-cell"),s=a.length;if(s<=12){var o=[],l=0,c=0,n=0;for(let i=0;i<s;i++)n=g(e.getWidthClass(a[i])),o.push(n),c+=n,0===n&&(l+=1);var d=0;l&&(d=(12-c)/l);var m=0;n=0;for(let e=0;e<s;e++)m+=n=o[e]?o[e]:d,t()(this).append(t()(i.createElement("div")).addClass(`mosaic-resize-handle mosaic-resize-handle-${e+1} mosaic-resize-${5===s?m.toFixed(1).replace(".0",""):m}`).data("resize_handle_index",e)),t()(a[e]).data("col_size",n)}t()(this).children(".mosaic-resize-handle").off("mousedown").on("mousedown",function(){if(!(t()(".mosaic-helper-tile-new").length>0)){var a=t()(this).parent(),s=a.children(".mosaic-grid-cell");if(!(s.length>12)){var o=0,l=[];s.each(function(){var e=t()(this).data("col_size");l.push(e);var s=t()(i.createElement("div")).addClass(`mosaic-resize-placeholder col-${e} mosaic-resize-${o}`).append(t()(i.createElement("div")).addClass("mosaic-resize-placeholder-inner-border").append(t()(i.createElement("div")).addClass("info").html(e)));a.append(s),o+=e});var c=e.getResizeHandleClassId(this),n=l.reduce((e,i,a)=>a<=c?e+i:e,0),d=t()("<div />").addClass("mosaic-resize-handle mosaic-resize-handle-helper").addClass(`mosaic-resize-${n}`).data("row_width",a.width()).data("resize_handle_index",c);return d[0].column_sizes=l,a.append(d),t()(this).parents("[data-panel]").addClass("mosaic-panel-resizing"),a.addClass("mosaic-row-resizing"),t()(".mosaic-selected-tile",i).children(".mosaic-tile-content").trigger("blur"),r.debug("------------------resize-handle(click)--------------------"),r.debug(`resize_handle_index: ${c}`),r.debug(`resize_handle_index_size: ${n}`),r.debug(`row_width: ${a.width()}`),r.debug(`column_sizes: ${l}`),!1}}})}})},t().fn.mosaicCleanupRow=function(){return this.each(function(){var e=t()(this);if(e.children(".mosaic-grid-cell").each(function(){0===t()(this).children().length&&(t()(this).remove(),e.mosaicSetColumnSizes())}),0===e.find(".mosaic-tile").length){var i=e;if(e.nextAll(".mosaic-grid-row").length>0)e=e.next(".mosaic-grid-row");else{if(!(e.prevAll(".mosaic-grid-row").length>0))return void e.remove();e=e.prev(".mosaic-grid-row")}i.remove()}e.mosaicSetResizeHandles()})},t().fn.mosaicGetDirection=function(e){var i=parseFloat(t()(this).width()),a=parseFloat(t()(this).height()),s=parseFloat(e.pageX-t()(this).offset().left-i/2),o=parseFloat(e.pageY-t()(this).offset().top-a/2),l=i/2,c=a/2;return s<0?o<0?s/o<-1*l/(-1*c)?"top":"left":s/o<-1*l/c?"left":"bottom":o<0?s/o<1*l/(-1*c)?"right":"top":s/o<l/c?"bottom":"right"}}}var h=function(e,i){var a=document.createElement("a"),s=void 0===i?"":" ("+i+")";return a.href="javascript:",a.textContent="Reset"+s,t()(a).on("click",{el:e},function(e){e.preventDefault(),e.data.el.closest(".mosaic-grid-cell").removeClass("col-1 col-2 col-3 col-4 col-5 col-6 col-7 col-8 col-9 col-10 col-11 col-12").addClass("col"),e.data.el.closest(".mosaic-grid-row").mosaicSetResizeHandles(),t()(e.target).parent().remove()}),a};function u(){for(var e=[],i=100/12,a=0;a<99;)e.push(Math.round(a+=i));return e}function p(e){return e?"col-"+e:"col"}function g(e,i){return i=i||"col-",parseInt(e.replace(i,""))||0}}}]);
//# sourceMappingURL=15528.c948a471d704a52304c4.min.js.map