{"version":3,"file":"chunks/72682.7fc6fdf7fd2424dcde9a.min.js","mappings":"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","sources":["webpack://plone-mosaic/./node_modules/tinymce/plugins/link/index.js","webpack://plone-mosaic/./node_modules/tinymce/plugins/link/plugin.js"],"sourcesContent":["// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.7 (2022-12-06)\n */\n(function () {\n    'use strict';\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var is = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$5.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Optional.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'listbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName.toLowerCase() === 'a';\n    };\n    var isLink = function (elm) {\n      return isAnchor(elm) && !!getHref(elm);\n    };\n    var collectNodesInRange = function (rng, predicate) {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        var contents = rng.cloneContents();\n        var walker = new global$4(contents.firstChild, contents);\n        var elements = [];\n        var current = contents.firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$5.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$5.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var hasLinks = function (elements) {\n      return global$5.grep(elements, isLink).length > 0;\n    };\n    var hasLinksInSelection = function (rng) {\n      return collectNodesInRange(rng, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (editor) {\n      var inlineTextElements = editor.schema.getTextInlineElements();\n      var isElement = function (elm) {\n        return elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      };\n      var elements = collectNodesInRange(editor.selection.getRng(), isElement);\n      return elements.length === 0;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      var attrs = [\n        'title',\n        'rel',\n        'class',\n        'target'\n      ];\n      return foldl(attrs, function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(getRelList(editor).length > 0) && allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (has(anchorElm, 'innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var linkDomMutation = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlinkSelection = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var bookmark = selection.getBookmark();\n      var rng = selection.getRng().cloneRange();\n      var startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      var endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    var unlinkDomMutation = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    var unwrapOptions = function (data) {\n      var cls = data.class, href = data.href, rel = data.rel, target = data.target, text = data.text, title = data.title;\n      return filter({\n        class: cls.getOrNull(),\n        href: href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, function (v, _k) {\n        return isNull(v) === false;\n      });\n    };\n    var sanitizeData = function (editor, data) {\n      var href = data.href;\n      return __assign(__assign({}, data), { href: global$3.isDomSafe(href, 'a', editor.settings) ? href : '' });\n    };\n    var link = function (editor, attachState, data) {\n      var sanitizedData = sanitizeData(editor, data);\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(sanitizedData)) : linkDomMutation(editor, attachState, sanitizedData);\n    };\n    var unlink = function (editor) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'items');\n    };\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        if (isListGroup(item)) {\n          return findTextByValue(value, item.items);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Optional.none();\n    };\n    var findCatalog = function (catalogs, fieldName) {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    var init = function (initialData, linkCatalog) {\n      var persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      var getTitleFromUrlChange = function (url) {\n        return someIf(persistentData.title.length <= 0, Optional.from(url.meta.title).getOr(''));\n      };\n      var getTextFromUrlChange = function (url) {\n        return someIf(persistentData.text.length <= 0, Optional.from(url.meta.text).getOr(url.value));\n      };\n      var onUrlChange = function (data) {\n        var text = getTextFromUrlChange(data.url);\n        var title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some(__assign(__assign({}, text.map(function (text) {\n            return { text: text };\n          }).getOr({})), title.map(function (title) {\n            return { title: title };\n          }).getOr({})));\n        } else {\n          return Optional.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkCatalog, change.name).getOr([]);\n        return getDelta(persistentData.text, change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        var name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), change);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$2.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Optional.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets, defaultLinkProtocol) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n        return suggestProtocol ? Optional.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required ' + defaultLinkProtocol + ':// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: defaultLinkProtocol + '://' + url });\n          }\n        }) : Optional.none();\n      };\n    };\n    var preprocess = function (editor, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return global$1.resolve(data);\n      }, function (transform) {\n        return new global$1(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = getLinkList(editor);\n      return new global$1(function (callback) {\n        if (isString(linkList)) {\n          global.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Optional.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Optional.some(output));\n          });\n        } else {\n          callback(Optional.from(linkList));\n        }\n      }).then(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            var noneItem = [{\n                text: 'None',\n                value: ''\n              }];\n            return noneItem.concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = is(initialTarget, '_blank');\n        var enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Optional.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = isOnlyTextSelected(editor);\n      var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      var url = anchor ? Optional.some(dom.getAttrib(anchor, 'href')) : Optional.none();\n      var target = anchor ? Optional.from(dom.getAttrib(anchor, 'target')) : Optional.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).then(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Optional.from(linkNode),\n          flags: { titleEnabled: shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Optional.from(data[key]).filter(function (value) {\n            return !is(info.anchor[key], value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : noop\n        };\n        DialogConfirms.preprocess(editor, changedData).then(function (pData) {\n          link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      var anchor = info.anchor;\n      var url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var catalogs = settings.catalogs;\n      var dialogDelta = DialogChanges.init(initialData, catalogs);\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open$1 = function (editor) {\n      var data = collectData(editor);\n      data.then(function (info) {\n        var onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    var appendClickRemove = function (link, evt) {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    var open = function (url) {\n      var link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        open$1(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$6.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleState = function (editor, toggler) {\n      editor.on('NodeChange', toggler);\n      return function () {\n        return editor.off('NodeChange', toggler);\n      };\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setActive(!editor.mode.isReadOnly() && getAnchorElement(editor, editor.selection.getNode()) !== null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setDisabled(getAnchorElement(editor, editor.selection.getNode()) === null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleUnlinkState = function (editor) {\n      return function (api) {\n        var hasLinks$1 = function (parents) {\n          return hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n        };\n        var parents = editor.dom.getParents(editor.selection.getStart());\n        api.setDisabled(!hasLinks$1(parents));\n        return toggleState(editor, function (e) {\n          return api.setDisabled(!hasLinks$1(e.parents));\n        });\n      };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          openDialog(editor)();\n        }\n      });\n    };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!getAnchorElement(editor, node));\n        return noop;\n      };\n      var getLinkText = function (value) {\n        var anchor = getAnchorElement(editor);\n        var onlyText = isOnlyTextSelected(editor);\n        if (!anchor && onlyText) {\n          var text = getAnchorText(editor.selection, anchor);\n          return Optional.some(text.length > 0 ? text : value);\n        } else {\n          return Optional.none();\n        }\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!getAnchorElement(editor, node) && hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = getAnchorElement(editor);\n          return !!elm ? getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!getAnchorElement(editor, node));\n              return toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var value = formApi.getValue();\n              var text = getLinkText(value);\n              var attachState = {\n                href: value,\n                attach: noop\n              };\n              link(editor, attachState, {\n                href: value,\n                text: text,\n                title: Optional.none(),\n                rel: Optional.none(),\n                target: Optional.none(),\n                class: Optional.none()\n              });\n              collapseSelectionToEnd(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    function Plugin () {\n      global$7.add('link', function (editor) {\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"],"names":["t","call","id","global$7","tinymce","util","Tools","resolve","global$6","isType","type","value","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isArray","isNull","a","isBoolean","isFunction","noop","constant","identity","tripleEquals","b","never","always","none","NONE","fold","n","_s","isSome","isNone","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","me","f","s","Optional","from","nativeIndexOf","indexOf","nativePush","push","contains","xs","ts","rawIndexOf","flatten","r","i","len","length","apply","findMap","arr","is","lhs","rhs","comparator","left","cat","someIf","assumeExternalTargets","editor","externalTargets","getParam","getDefaultLinkTarget","getTargetList","getRelList","shouldShowLinkTitle","allowUnsafeLinkTarget","getDefaultLinkProtocol","global$5","getValue","item","sanitizeList","list","extractValue","out","text","title","getText","menu","items","sanitizeWith","extracter","ListOptions","sanitize","createUi","label","__assign","Object","assign","arguments","p","hasOwnProperty","this","keys","internalFilter","obj","pred","onTrue","onFalse","props","k","has","key","global$4","global$3","isAnchor","elm","nodeName","toLowerCase","isLink","getHref","collectNodesInRange","rng","predicate","collapsed","contents","cloneContents","walker","firstChild","elements","current","next","hasProtocol","url","test","href","getAttribute","applyRelTargetRules","rel","isUnsafe","rules","rels","split","removeTargetRules","val","inArray","newRels","concat","addTargetRules","trim","sort","join","getAnchorElement","selectedElm","selection","getNode","isImageFigure","dom","select","getParent","getAnchorText","anchorElm","replace","trimCaretContainers","innerText","textContent","getContent","format","hasLinks","grep","isOnlyTextSelected","inlineTextElements","schema","getTextInlineElements","getRng","nodeType","className","applyLinkOverrides","linkAttrs","newLinkAttrs","newRel","target","handleExternalTargets","linkDomMutation","attachState","data","acc","each$1","getLinkAttrs","undoManager","transact","attach","focus","setAttribs","updateLink","linkImageFigure","execCommand","insertContent","createHTML","encode","createLink","unwrapOptions","cls","class","v","_k","link","sanitizedData","isDomSafe","settings","sanitizeData","hasPlugin","unlink","node","unlinkImageFigure","bookmark","getBookmark","cloneRange","startAnchorElm","startContainer","getBody","endAnchorElm","endContainer","setStartBefore","setEndAfter","setRng","moveToBookmark","unlinkSelection","unlinkDomMutation","fig","img","getParents","parentNode","insertBefore","remove","attrs","create","appendChild","isListGroup","findTextByValue","catalog","getDelta","persistentText","fieldName","hasPersistentText","meta","DialogChanges","initialData","linkCatalog","persistentData","onUrlChange","getTitleFromUrlChange","onCatalogChange","change","catalogs","anchor","onChange","getData","global$2","global$1","tryEmailTransform","message","preprocess","oldData","tryProtocolTransform","defaultLinkProtocol","DialogConfirms","transform","callback","setEditorTimeout","windowManager","confirm","state","delayedConfirm","AnchorListOptions","anchorNodes","anchors","ClassListOptions","getLinkClassList","global","LinkListOptions","extractor","convertURL","linkList","getLinkList","send","success","JSON","parse","err","parseJson","error","_","output","then","optItems","RelOptions","initialTarget","isTargetBlank_1","fallbacks","TargetOptions","nonEmptyAttr","elem","getAttrib","DialogInfo","linkNode","links","linkClass","extractFromAnchor","targets","classes","optNode","flags","titleEnabled","open$1","anchorNode","collectData","info","onSubmit","api","close","getChangedValue","changedData","pData","handleSubmit","displayText","titleText","defaultTarget","original","getInitialData","dialogDelta","size","body","filetype","buttons","primary","_a","newData","setData","makeDialog","spec","open","document","createElement","evt","createEvent","initMouseEvent","window","dispatchEvent","removeChild","appendClickRemove","getLink","getSelectedLink","getStart","gotoLink","targetEl","$","scrollIntoView","openDialog","gotoSelectedLink","toggleState","toggler","on","off","toggleActiveState","updateState","setActive","mode","isReadOnly","toggleEnabledState","setDisabled","toggleUnlinkState","hasLinks$1","parents","e","setupContextToolbars","onSetupLink","buttonApi","ui","registry","addContextForm","launch","icon","tooltip","onSetup","hasContextToolbar","initValue","commands","onAction","formApi","onlyText","getLinkText","collapse","collapseSelectionToEnd","hide","add","addToggleButton","addButton","setupButtons","addMenuItem","shortcut","setupMenuItems","addContextMenu","update","element","setupContextMenu","metaKeyPressed","preventDefault","keyCode","altKey","shiftKey","ctrlKey","metaKey","hasOnlyAltModifier","setupGotoLinks","addCommand","useQuickLink","fire","toolbarKey","register","addShortcut","setup"],"sourceRoot":""}