(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[42037],{42037:function(){!function(){"use strict";function e(e){return function(t){return o=typeof(n=t),(null===n?"null":"object"==o&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==o&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":o)===e;var n,o}}function t(e){return function(t){return typeof t===e}}function n(e){return function(){return e}}function o(e){return e}function r(){return v}var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=0,c=tinymce.util.Tools.resolve("tinymce.util.Promise"),a=tinymce.util.Tools.resolve("tinymce.Env"),l=tinymce.util.Tools.resolve("tinymce.util.Delay"),s=e("string"),d=e("object"),f=e("array"),m=t("boolean"),g=t("function"),h=n(!1),p=n(!void 0),v={fold:function(e,t){return e()},isSome:h,isNone:p,getOr:o,getOrThunk:b,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:n(null),getOrUndefined:n(void 0),or:o,orThunk:b,map:r,each:function(){},bind:r,exists:h,forall:p,filter:function(){return v},toArray:function(){return[]},toString:n("none()")};function b(e){return e()}var y=function(e){function t(){return i}function o(t){return t(e)}var r=n(e),i={fold:function(t,n){return n(e)},isSome:p,isNone:h,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:t,orThunk:t,map:function(t){return y(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?i:v},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},k={some:y,none:r,from:function(e){return null==e?v:y(e)}};function w(e,t,n,o,r){return e(n,o)?k.some(n):g(r)&&r(n)?k.none():t(n,o,r)}function T(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}function E(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}var N={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return E(n.childNodes[0])},fromTag:function(e,t){return E((t||document).createElement(e))},fromText:function(e,t){return E((t||document).createTextNode(e))},fromDom:E,fromPoint:function(e,t,n){return k.from(e.dom.elementFromPoint(t,n)).map(E)}};function C(e,t,n){for(var o=e.dom,r=g(n)?n:h;o.parentNode;){o=o.parentNode;var i=N.fromDom(o);if(t(i))return k.some(i);if(r(i))break}return k.none()}function M(e,t,n){return C(e,(function(e){return T(e,t)}),n)}"undefined"!=typeof window||Function("return this;")();var S,O=(S=s,function(e,t,n){return function(){if(!S(n))throw new Error("Default value doesn't match requested type.")}(),function(e,t){if(f(e)||d(e))throw new Error("expected a string but found: "+e);return undefined===e?t:m(e)?!1===e?"":t:e}(e.getParam(t,n),n)});i.add("quickbars",(function(e){var t,n;(function(e){e.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){var t=e;new c((function(e){var n=document.createElement("input");n.type="file",n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",document.body.appendChild(n),n.addEventListener("change",(function(t){e(Array.prototype.slice.call(t.target.files))}));var o=function(r){function i(){e([]),n.parentNode.removeChild(n)}a.os.isAndroid()&&"remove"!==r.type?l.setEditorTimeout(t,i,0):i(),t.off("focusin remove",o)};t.on("focusin remove",o),n.click()})).then((function(t){var n,o;0<t.length&&(n=t[0],o=n,new c((function(e){var t=new FileReader;t.onloadend=function(){e(t.result.split(",")[1])},t.readAsDataURL(o)})).then((function(t){var o,r,i,c,a,l;r=t,i=n,l=(a=(o=e).editorUpload.blobCache).create((c=(new Date).getTime(),"mceu_"+Math.floor(1e9*Math.random())+ ++u+String(c)),i,r),a.add(l),o.insertContent(o.dom.createHTML("img",{src:l.blobUri()}))})))}))}}),e.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){var t,n;(t=e).plugins.table?t.plugins.table.insertTable(2,2):(n=t).undoManager.transact((function(){n.insertContent(function(){var e='<table data-mce-id="mce" style="width: 100%">';e+="<tbody>";for(var t=0;t<2;t++){e+="<tr>";for(var n=0;n<2;n++)e+="<td><br></td>";e+="</tr>"}return(e+="</tbody>")+"</table>"}());var e=n.dom.select("*[data-mce-id]")[0];e.removeAttribute("data-mce-id");var t=n.dom.select("td,th",e);n.selection.setCursorLocation(t[0],0)}))}})})(e),0<(n=O(t=e,"quickbars_insert_toolbar","quickimage quicktable")).trim().length&&t.ui.registry.addContextToolbar("quickblock",{predicate:function(e){function n(e){return e.dom===t.getBody()}var o=N.fromDom(e),r=t.schema.getTextBlockElements();return w(T,M,o,"table",n).fold((function(){return w((function(e,t){return t(e)}),C,o,(function(e){return e.dom.nodeName.toLowerCase()in r&&t.dom.isEmpty(e.dom)}),n).isSome()}),h)},items:n,position:"line",scope:"editor"}),function(e){function t(e){return"IMG"===e.nodeName||"FIGURE"===e.nodeName&&/image/i.test(e.className)}var n=O(e,"quickbars_image_toolbar","alignleft aligncenter alignright");0<n.trim().length&&e.ui.registry.addContextToolbar("imageselection",{predicate:t,items:n,position:"node"});var o=O(e,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote");0<o.trim().length&&e.ui.registry.addContextToolbar("textselection",{predicate:function(n){return!t(n)&&!e.selection.isCollapsed()&&"false"!==e.dom.getContentEditableParent(n)},items:o,position:"selection",scope:"editor"})}(e)}))}()}}]);
//# sourceMappingURL=42037.de35f7c6a166fca0d49b.min.js.map