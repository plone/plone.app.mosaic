{"version":3,"file":"chunks/7652.4fd6d4a3283f89ce353e.min.js","mappings":"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","sources":["webpack://plone-mosaic/./node_modules/tinymce/plugins/autolink/plugin.js"],"sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.7 (2022-12-06)\n */\n(function () {\n    'use strict';\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var link = function () {\n      return /(?:[A-Za-z][A-Za-z\\d.+-]{0,14}:\\/\\/(?:[-.~*+=!&;:'%@?^${}(),\\w]+@)?|www\\.|[-;:&=+$,.\\w]+@)[A-Za-z\\d-]+(?:\\.[A-Za-z\\d-]+)*(?::\\d+)?(?:\\/(?:[-.~*+=!;:'%@$(),\\/\\w]*[-~*+=%@$()\\/\\w])?)?(?:\\?(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+))?/g;\n    };\n\n    var defaultLinkPattern = new RegExp('^' + link().source + '$', 'i');\n    var getAutoLinkPattern = function (editor) {\n      return editor.getParam('autolink_pattern', defaultLinkPattern);\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target', false);\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var rangeEqualsBracketOrSpace = function (rangeString) {\n      return /^[(\\[{ \\u00a0]$/.test(rangeString);\n    };\n    var isTextNode = function (node) {\n      return node.nodeType === 3;\n    };\n    var isElement = function (node) {\n      return node.nodeType === 1;\n    };\n    var handleBracket = function (editor) {\n      return parseCurrentLine(editor, -1);\n    };\n    var handleSpacebar = function (editor) {\n      return parseCurrentLine(editor, 0);\n    };\n    var handleEnter = function (editor) {\n      return parseCurrentLine(editor, -1);\n    };\n    var scopeIndex = function (container, index) {\n      if (index < 0) {\n        index = 0;\n      }\n      if (isTextNode(container)) {\n        var len = container.data.length;\n        if (index > len) {\n          index = len;\n        }\n      }\n      return index;\n    };\n    var setStart = function (rng, container, offset) {\n      if (!isElement(container) || container.hasChildNodes()) {\n        rng.setStart(container, scopeIndex(container, offset));\n      } else {\n        rng.setStartBefore(container);\n      }\n    };\n    var setEnd = function (rng, container, offset) {\n      if (!isElement(container) || container.hasChildNodes()) {\n        rng.setEnd(container, scopeIndex(container, offset));\n      } else {\n        rng.setEndAfter(container);\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^([A-Za-z][A-Za-z\\d.+-]*:\\/\\/)|mailto:/.test(url);\n    };\n    var isPunctuation = function (char) {\n      return /[?!,.;:]/.test(char);\n    };\n    var parseCurrentLine = function (editor, endOffset) {\n      var end, endContainer, bookmark, text, prev, len, rngText;\n      var autoLinkPattern = getAutoLinkPattern(editor);\n      var defaultLinkTarget = getDefaultLinkTarget(editor);\n      if (editor.dom.getParent(editor.selection.getNode(), 'a[href]') !== null) {\n        return;\n      }\n      var rng = editor.selection.getRng().cloneRange();\n      if (rng.startOffset < 5) {\n        prev = rng.endContainer.previousSibling;\n        if (!prev) {\n          if (!rng.endContainer.firstChild || !rng.endContainer.firstChild.nextSibling) {\n            return;\n          }\n          prev = rng.endContainer.firstChild.nextSibling;\n        }\n        len = prev.length;\n        setStart(rng, prev, len);\n        setEnd(rng, prev, len);\n        if (rng.endOffset < 5) {\n          return;\n        }\n        end = rng.endOffset;\n        endContainer = prev;\n      } else {\n        endContainer = rng.endContainer;\n        if (!isTextNode(endContainer) && endContainer.firstChild) {\n          while (!isTextNode(endContainer) && endContainer.firstChild) {\n            endContainer = endContainer.firstChild;\n          }\n          if (isTextNode(endContainer)) {\n            setStart(rng, endContainer, 0);\n            setEnd(rng, endContainer, endContainer.nodeValue.length);\n          }\n        }\n        if (rng.endOffset === 1) {\n          end = 2;\n        } else {\n          end = rng.endOffset - 1 - endOffset;\n        }\n      }\n      var start = end;\n      do {\n        setStart(rng, endContainer, end >= 2 ? end - 2 : 0);\n        setEnd(rng, endContainer, end >= 1 ? end - 1 : 0);\n        end -= 1;\n        rngText = rng.toString();\n      } while (!rangeEqualsBracketOrSpace(rngText) && end - 2 >= 0);\n      if (rangeEqualsBracketOrSpace(rng.toString())) {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n        end += 1;\n      } else if (rng.startOffset === 0) {\n        setStart(rng, endContainer, 0);\n        setEnd(rng, endContainer, start);\n      } else {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n      }\n      text = rng.toString();\n      if (isPunctuation(text.charAt(text.length - 1))) {\n        setEnd(rng, endContainer, start - 1);\n      }\n      text = rng.toString().trim();\n      var matches = text.match(autoLinkPattern);\n      var protocol = getDefaultLinkProtocol(editor);\n      if (matches) {\n        var url = matches[0];\n        if (startsWith(url, 'www.')) {\n          url = protocol + '://' + url;\n        } else if (contains(url, '@') && !hasProtocol(url)) {\n          url = 'mailto:' + url;\n        }\n        bookmark = editor.selection.getBookmark();\n        editor.selection.setRng(rng);\n        editor.execCommand('createlink', false, url);\n        if (defaultLinkTarget !== false) {\n          editor.dom.setAttrib(editor.selection.getNode(), 'target', defaultLinkTarget);\n        }\n        editor.selection.moveToBookmark(bookmark);\n        editor.nodeChanged();\n      }\n    };\n    var setup = function (editor) {\n      var autoUrlDetectState;\n      editor.on('keydown', function (e) {\n        if (e.keyCode === 13) {\n          return handleEnter(editor);\n        }\n      });\n      if (global.browser.isIE()) {\n        editor.on('focus', function () {\n          if (!autoUrlDetectState) {\n            autoUrlDetectState = true;\n            try {\n              editor.execCommand('AutoUrlDetect', false, true);\n            } catch (ex) {\n            }\n          }\n        });\n        return;\n      }\n      editor.on('keypress', function (e) {\n        if (e.keyCode === 41 || e.keyCode === 93 || e.keyCode === 125) {\n          return handleBracket(editor);\n        }\n      });\n      editor.on('keyup', function (e) {\n        if (e.keyCode === 32) {\n          return handleSpacebar(editor);\n        }\n      });\n    };\n\n    function Plugin () {\n      global$1.add('autolink', function (editor) {\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"],"names":["global$1","tinymce","util","Tools","resolve","global","defaultLinkPattern","RegExp","source","rangeEqualsBracketOrSpace","rangeString","test","isTextNode","node","nodeType","isElement","scopeIndex","container","index","len","data","length","setStart","rng","offset","hasChildNodes","setStartBefore","setEnd","setEndAfter","parseCurrentLine","editor","endOffset","end","endContainer","bookmark","text","prev","rngText","autoLinkPattern","getParam","getAutoLinkPattern","defaultLinkTarget","getDefaultLinkTarget","dom","getParent","selection","getNode","getRng","cloneRange","startOffset","previousSibling","firstChild","nextSibling","nodeValue","char","start","toString","charAt","matches","trim","match","protocol","getDefaultLinkProtocol","url","str","substr","checkRange","indexOf","contains","hasProtocol","getBookmark","setRng","execCommand","setAttrib","moveToBookmark","nodeChanged","setup","autoUrlDetectState","on","e","keyCode","handleEnter","browser","isIE","ex","handleBracket","handleSpacebar","add"],"sourceRoot":""}